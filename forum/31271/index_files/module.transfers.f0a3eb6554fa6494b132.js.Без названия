(window.p=window.p||[]).push([[43],{1334:function(e,t,o){"use strict";o.r(t);var r,n,a=o(7),i=o(1),l=o(0);(n=r||(r={}))[n.WALLET=99]="WALLET",n[n.CARD=31873]="CARD";var s,c=r,d=o(298),p=o(299),u=o(319),m=o(320),y=o(18),f=o(20),v=o(4),b=o(12),h=o(2),S={self:i.__assign({},Object(h.l)(),{position:"relative",height:170,backgroundColor:"#fff",borderRadius:10,padding:[30,50,30,40]}),form:{self:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:25}},icon:{width:42,height:42,borderRadius:"100%",backgroundColor:"#f5f5f5"},iconContent:{self:{width:24,position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},path:{}},field:{margin:[0,25,0,16],flex:"1 1 130px"}},_=function(e){function TransactionsBlock(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(TransactionsBlock,e),TransactionsBlock.prototype.componentDidMount=function(){var e=this.props,t=e.provider,o=e.mask;this.paymentStore.valuesMap.set(t,Object(v.pb)(void 0===this.paymentStore.valuesMap.get(t)?o:this.paymentStore.valuesMap.get(t),Object(v.qb)(o)))},TransactionsBlock.prototype.render=function(){var t=this,e=this.props,o=e.Icon,r=e.title,n=e.placeholder,a=e.provider,i=e.mask,s=e.classes;return l.createElement("div",{className:s.self},l.createElement(b.h,null,r),l.createElement(b.s,{classes:s.form,onSubmit:function(){return t.paymentStore.goToForm(a)}},l.createElement("div",{className:s.icon},l.createElement(o,{classes:s.iconContent})),l.createElement("div",{className:s.field},l.createElement(b.Dc,{mask:Object(v.qb)(i),title:n||r,value:void 0===this.paymentStore.valuesMap.get(a)?i:this.paymentStore.valuesMap.get(a),error:this.paymentStore.visibleErrors.get(a),onFocus:Object(v.lb)(function(){return t.paymentStore.onFieldFocus(a)}),onBlur:Object(v.lb)(function(){return t.paymentStore.onFieldBlur(a)}),onChange:Object(v.kb)(function(e){return t.paymentStore.setValue(a,e)})})),l.createElement("div",null,l.createElement(b.Lc,{children:"Перевести"}))))},i.__decorate([Object(f.resolve)(a.Store)],TransactionsBlock.prototype,"paymentStore",void 0),TransactionsBlock=i.__decorate([Object(v.rb)(S),y.observer],TransactionsBlock)}(v.bb),g=function(e){function Transactions(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(Transactions,e),Transactions.prototype.render=function(){return l.createElement(d.a,null,l.createElement(p.a,{width:"6"},l.createElement(_,{Icon:m.a,title:"Перевод на QIWI Кошелек",placeholder:"Номер кошелька",provider:c.WALLET,mask:"+dddddddddddddd"})),l.createElement(p.a,{width:"6"},l.createElement(_,{Icon:u.a,title:"Перевод на карту",placeholder:"Номер карты",provider:c.CARD,mask:"dddd dddd dddd ddddddd"})))},Transactions}(l.Component),E=o(5),P=o(27),T=o(71),j={title:"PaymentTransaction",type:"object",properties:(s={},s[c.WALLET]={type:"string",filled:!0,pattern:"^\\+\\d{1,14}$",errorMessage:"Укажите правильный номер кошелька"},s[c.CARD]={type:"string",filled:!0,luhn:!0,pattern:"^\\d{4} \\d{4} \\d{4} \\d{4,7}$",errorMessage:"Укажите правильный номер карты"},s)},k=o(294),M=function(){function PaymentStore(){this.valuesMap=new Map,this.visibleErrors=new Map}return PaymentStore.prototype.init=function(){},PaymentStore.prototype.setValue=function(e,t){this.valuesMap.set(e,t)},PaymentStore.prototype.onFieldFocus=function(e){this.visibleErrors.delete(e)},PaymentStore.prototype.onFieldBlur=function(e){var t=this.errors.get(e.toString());t&&this.visibleErrors.set(e,t)},PaymentStore.prototype.goToForm=function(e){var t=this.valuesMap.get(e);t&&!this.errors.get(e.toString())?this.routerStore.post("/payment/form/"+e,{"extra['account']":t}):this.onFieldBlur(e)},Object.defineProperty(PaymentStore.prototype,"errors",{get:function(){return this.validator.validate(j,this.valuesMap.toJSON())},enumerable:!0,configurable:!0}),i.__decorate([Object(P.inject)(k.a)],PaymentStore.prototype,"validator",void 0),i.__decorate([Object(P.inject)(T.a)],PaymentStore.prototype,"routerStore",void 0),i.__decorate([E.observable],PaymentStore.prototype,"valuesMap",void 0),i.__decorate([E.observable],PaymentStore.prototype,"visibleErrors",void 0),i.__decorate([E.action,Object(P.postConstruct)()],PaymentStore.prototype,"init",null),i.__decorate([E.action],PaymentStore.prototype,"setValue",null),i.__decorate([E.action],PaymentStore.prototype,"onFieldFocus",null),i.__decorate([E.action],PaymentStore.prototype,"onFieldBlur",null),i.__decorate([E.action],PaymentStore.prototype,"goToForm",null),i.__decorate([E.computed],PaymentStore.prototype,"errors",null),PaymentStore=i.__decorate([Object(P.injectable)()],PaymentStore)}();t.default=function(e){var t=e.createChild();return t.bind(a.View).toConstructor(g),t.bind(a.Store).to(M).inSingletonScope(),t}}}]);