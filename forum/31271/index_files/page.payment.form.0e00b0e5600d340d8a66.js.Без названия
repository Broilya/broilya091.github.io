(window.p=window.p||[]).push([[18],{1601:function(e,t,r){var o,n=n||function(s){"use strict";if(!(void 0===s||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=s.document,c=function(){return s.URL||s.webkitURL||s},l=e.createElementNS("http://www.w3.org/1999/xhtml","a"),u="download"in l,m=/constructor/i.test(s.HTMLElement)||s.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(e){(s.setImmediate||s.setTimeout)(function(){throw e},0)},h=function(e){setTimeout(function(){"string"==typeof e?c().revokeObjectURL(e):e.remove()},4e4)},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},o=function(e,r,t){t||(e=f(e));var o,n=this,i="application/octet-stream"===e.type,a=function(){!function(e,t,r){for(var o=(t=[].concat(t)).length;o--;){var n=e["on"+t[o]];if("function"==typeof n)try{n.call(e,r||e)}catch(e){p(e)}}}(n,"writestart progress write writeend".split(" "))};if(n.readyState=n.INIT,u)return o=c().createObjectURL(e),void setTimeout(function(){var e,t;l.href=o,l.download=r,e=l,t=new MouseEvent("click"),e.dispatchEvent(t),a(),h(o),n.readyState=n.DONE});!function(){if((d||i&&m)&&s.FileReader){var t=new FileReader;return t.onloadend=function(){var e=d?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");s.open(e,"_blank")||(s.location.href=e),e=void 0,n.readyState=n.DONE,a()},t.readAsDataURL(e),n.readyState=n.INIT}o||(o=c().createObjectURL(e)),i?s.location.href=o:s.open(o,"_blank")||(s.location.href=o);n.readyState=n.DONE,a(),h(o)}()},t=o.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:(t.abort=function(){},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,function(e,t,r){return new o(e,t||e.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==e&&e.exports?e.exports.saveAs=n:null!==r(699)&&null!==r(1602)&&(void 0===(o=function(){return n}.call(t,r,t,e))||(e.exports=o))},1602:function(t,e){(function(e){t.exports=e}).call(this,{})},1603:function(e,t,r){e.exports=r.p+"purchase.cc4b9d48b395cbfbe78aebfb40ba732e.svg"},1604:function(e,t,r){e.exports=r.p+"select.7002f9cc60d1e322375d038584765b22.svg"},1605:function(e,t,r){e.exports=r.p+"phone.748aec87914ac4429b728cd973aabd6f.svg"},1606:function(e,t,r){e.exports=r.p+"push.d9be56fd047e7ad3cc9869b7a2c99ff5.png"},1607:function(e,t,r){e.exports=r.p+"push@2x.4018a1be7505d25a6566a0cc0e2bbd91.png"},1608:function(e,t,r){e.exports=r.p+"push@3x.2a00fde71e1c8aaa0ec1461006f77d30.png"},1672:function(e,t,r){"use strict";r.r(t);var o,n,i=r(7),a=r(3),s=r(1),c=function(){function PaymentFormContextParams(){}return s.__decorate([a.serializable],PaymentFormContextParams.prototype,"id",void 0),PaymentFormContextParams}(),l=function(){function PaymentFormContext(){}return s.__decorate([Object(a.serializable)(Object(a.object)(c))],PaymentFormContext.prototype,"params",void 0),PaymentFormContext}(),u=r(27),m=r(5),d=r(1478),p=r(9),h=r(1601),f=r(1397),y=r(1347),b=r(293),S=r(1526),g=r(1353),v=r(1456),_=r(1399),E=r(1359),F=r(1528),P=r(1398),C=r(296),O=r(150),I=r(74),j=r(1381),w=r(30),T=r(45),R=r(65),x=r(1483),A=r(1493),N=r(1496),k=r(1371),D=r(1458),L=r(1459),V=r(1488),M=r(1384),B=r(1401),G=r(1498),q=r(1423),U=function(){function RepeatingPayment(){this.paymentId=parseInt(((new Date).getTime()*Math.random()).toString(),10).toString(),this.fields={}}return s.__decorate([Object(a.serializable)(Object(a.identifier)())],RepeatingPayment.prototype,"paymentId",void 0),s.__decorate([a.serializable],RepeatingPayment.prototype,"repeatTransactionId",void 0),s.__decorate([Object(a.serializable)(Object(i.enums)(q.a,"type"))],RepeatingPayment.prototype,"paymentMethod",void 0),s.__decorate([a.serializable],RepeatingPayment.prototype,"amount",void 0),s.__decorate([Object(a.serializable)(Object(a.map)(Object(a.primitive)()))],RepeatingPayment.prototype,"fields",void 0),s.__decorate([a.serializable],RepeatingPayment.prototype,"comment",void 0),RepeatingPayment}(),W=r(1417),z=r(1495),Q=r(1361),H=r(1499),$=r(1485),Y=r(1484),J=r(1385),K=r(1386),X=r(1378),Z=r(1377),ee=r(1387),te=r(1388),re=r(1389),oe=function(){function SuggestionsQuery(e){this.query=e}return s.__decorate([a.serializable],SuggestionsQuery.prototype,"query",void 0),SuggestionsQuery}();(n=o||(o={}))[n.LOADING=0]="LOADING",n[n.NOT_REQUIRED=1]="NOT_REQUIRED",n[n.REQUIRED_VERIFIED=2]="REQUIRED_VERIFIED",n[n.REQUIRED_FULL=3]="REQUIRED_FULL";var ne,ie,ae=o,se=r(1357),ce=r(1346);(ie=ne||(ne={}))[ie.CARD=0]="CARD",ie[ie.WALLET=1]="WALLET";var le=ne,ue=r(1490),me=r(1491),de=r(1492),pe=r(1421),he=r(1420),fe=r(1418),ye=r(1419),be=r(1494),Se=r(1422),ge=r(1424),ve=r(1428),_e=r(1427),Ee=r(1426),Fe=r(1425),Pe=r(1429),Ce=r(1431),Oe=r(1430),Ie=r(1432),je=r(1433),we=r(1502),Te=r(1370),Re=r(1360),xe=r(1364),Ae=r(1376),Ne=r(1375),ke=r(1374),De=r(1372),Le=r(1373),Ve=r(1356),Me=r(1500),Be=r(1434),Ge=r(1435),qe=function(){function PurchaseTotals(e){this.total=e}return s.__decorate([Object(a.serializable)(Object(a.object)(T.a))],PurchaseTotals.prototype,"total",void 0),PurchaseTotals}(),Ue=function(){function ComplexCommissionRequest(e,t,r){this.account=e,this.paymentMethod=t,this.purchaseTotals=r}return s.__decorate([a.serializable],ComplexCommissionRequest.prototype,"account",void 0),s.__decorate([Object(a.serializable)(Object(i.enums)(q.a,"type"))],ComplexCommissionRequest.prototype,"paymentMethod",void 0),s.__decorate([Object(a.serializable)(Object(a.object)(qe))],ComplexCommissionRequest.prototype,"purchaseTotals",void 0),ComplexCommissionRequest}(),We=r(1414),ze=r(1415),Qe=r(1416),He=r(1487);function getBeautifiedPattern(e){return e.pattern.toString().slice(1,-1)}function handleAndOrPredicate(e){return e.subpredicates.map(function(e){switch(!0){case e instanceof We.a:return{pattern:getBeautifiedPattern(e)};case e instanceof ze.a:return{allOf:handleAndOrPredicate(e)};case e instanceof Qe.a:return{anyOf:handleAndOrPredicate(e)}}})}var $e,Ye,Je,Ke,Xe=r(1409),Ze=r(1503),et=r(1363),tt=r(25),rt=r(1474),ot=r(1473),nt=r(1504),it=r(1505),at=r(1506),st=r(1507),ct=r(1501),lt=r(1379),ut=r(1362),mt=r(15),dt=r(1527),pt="transaction.id",ht="confirmation.url",ft="feature.3ds.payment.form",yt=function(){function PaymentFormStore(){this.linkingCard=!0,this.identificationStatus=null,this.loading=m.observable.box(!1,{deep:!1}),this.providerNotFound=!1,this.loadingSource=!1,this.sms="",this.smsRemain=120,this.smsErrors=m.observable.map({},{deep:!1}),this.identificationDelay=700,this.submitPaymentLoading=!1,this.submitConfirmationLoading=!1,this.checkTransactionAttempts=0,this.cardDetailsError=null,this.amountBlur=!1,this.complexCommission=null,this.complexCommissionLoading=!1,this.refs=m.observable.array([],{deep:!1}),this.refContent=m.observable.map({},{deep:!1}),this.refError=m.observable.map({},{deep:!1}),this.refLoading=m.observable.map({},{deep:!1}),this.refMounted=m.observable.map({},{deep:!1}),this.valuesMap=m.observable.map({},{deep:!1}),this.dependencyVisible=m.observable.map({},{deep:!1}),this.identificationValuesMap=m.observable.map({},{deep:!1}),this.manualIdentification=!0,this.identificationNeedCheck=!1,this.identificationSubmitted=!1,this.identificationConfirmed=!1,this.identificationFailed=!1,this.successIdentificationDelay=2e3,this.identificationDocsTab=Ze.a.INN,this.errorsVisibleFields=new Map,this.repeatingPayment=!1,this.repeatingTransaction=null,this.favoritePayment=!1,this.comment=m.observable.box("",{deep:!1}),this.scheduled=!1,this.favoriteTitle=m.observable.box("",{deep:!1}),this.favoriteSchedule=m.observable.box(null,{deep:!1}),this.favoriteBlur=new Map,this.createFavoriteResult=null,this.createFavoriteLoading=!1,this.naMode=null,this.chequeEmailSending=!1,this.emailSent=!1,this.emailValue="",this.emailError=!1,this.lastTermsId=null,this.dependencyUpdatedOnload=!1,this.pageTimeOn=null,this.sendingItem=void 0,this.paymentLimits=new Map,this.limitsDetailsVisible=!1,this.externalFields=[],this.isExternalGreeting=!1,this.isExternalComment=!1,this.isExternalSum=!1}var r;return r=PaymentFormStore,Object.defineProperty(PaymentFormStore.prototype,"authStore",{get:function(){return this.auth?this.auth.get(i.Store):void 0},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.reset=function(){this.errorsVisibleFields.clear(),this.refContent.clear(),this.submitConfirmationResult=null,this.submitPaymentResult=null,this.checkTransactionResult=null,this.paymentCardStore.resetData(),this.cardDetails=null,this.cardDetailsError=null,this.complexCommission=null,this.transaction=null,this.confirmation=null,this.paymentCheck=void 0,this.sms="",this.smsErrors.clear(),this.resendConfirmation=void 0,this.lastTermsId=null,this.emailValue="",this.emailError=null,this.chequeEmailSending=!1,this.emailSent=!1,this.identificationValuesMap.clear(),this.loadingIdentification=!1,this.manualIdentification=!0,this.identificationNeedCheck=!1,this.identificationSubmitted=!1,this.identificationConfirmed=!1,this.identificationFailed=!1,this.identificationStatus=null,this.identificationDocsTab=Ze.a.INN,this.checkTransactionAttempts=0,clearTimeout(this.delaySmsResend),clearTimeout(this.delaySumChange),clearTimeout(this.delayAccountChange),clearTimeout(this.delayCheckTransaction),clearTimeout(this.delayedRefRequesting),clearTimeout(this.postTimer),clearTimeout(this.delayUpdateSources),this.router.search.payment&&(this.repeatingPayment=!1,this.repeatingTransaction=null),this.greeting=void 0,this.greetingCards=void 0,this.shownAllGreetings=void 0,this.greetingError=void 0,this.chosenGreetingCard=void 0,this.shownSaveGreeting=void 0,this.greetingCard=void 0,this.greetingCardPreview=void 0,this.greetingCardPreviewLoading=void 0,this.greetingCommentBlur=void 0},PaymentFormStore.prototype.hardReset=function(){this.terms=null,this.walletTerms=null,this.sources=null,this.pageTimeOn=null,this.selectedSource=null,this.sum=null,this.identificationStatus=null,this.favoritePayment=!1,this.valuesMap.clear(),this.comment.set(""),this.repeatingPayment=!1,this.repeatingTransaction=null,this.naMode=null,this.reset()},PaymentFormStore.prototype.loadAuth=function(){var t=this;return this.asyncAuth().then(function(e){return t.loadAuthSuccess(e)}).catch(function(e){return t.loadAuthError(e)})},PaymentFormStore.prototype.loadAuthSuccess=function(e){return this.auth=e,this.authError=void 0,this.actAuthShowChange(),this.auth},PaymentFormStore.prototype.loadAuthError=function(e){if(this.authError)throw e;return this.auth=void 0,this.authError=e,this.loadAuth()},PaymentFormStore.prototype.backup=function(e){e&&(r.recoveryValues=new Map(this.valuesMap.entries()),r.recoverySum=this.sum?new T.a(this.sum.amount,this.sum.currency):void 0,r.recoveryComment=this.comment.get())},PaymentFormStore.prototype.recover=function(){r.recoveryValues&&(this.valuesMap.merge(r.recoveryValues),r.recoveryValues=void 0,this.sum=r.recoverySum?new T.a(r.recoverySum.amount,r.recoverySum.currency):void 0,r.recoverySum=void 0,this.comment.set(r.recoveryComment),r.recoveryComment=void 0)},PaymentFormStore.prototype.init=function(){var t=this;Object(m.reaction)(function(){return t.loading},function(){return t.handleLoading()}),Object(m.reaction)(function(){return t.sum},function(){return t.handleSumChange()}),Object(m.reaction)(function(){return t.step},function(e){return t.handleStep(e)}),this.actUserAuthChange(),Object(m.reaction)(function(){return t.naMode},function(e){return t.selectNASource(e)}),Object(m.reaction)(function(){return t.terms},function(){return t.setChangedSumByLimit()}),Object(m.reaction)(function(){return t.terms},function(){return t.loadComplexCommission()}),Object(m.reaction)(function(){return t.terms},function(){return t.loadLimits()}),Object(m.reaction)(function(){return t.selectedSource},function(){return t.setChangedSumByLimit()}),Object(m.reaction)(function(){return t.selectedSource},function(){return t.loadComplexCommission()}),Object(m.reaction)(function(){return t.selectedSource},function(e){return t.clearGreetingByOuterSource(e)}),Object(m.reaction)(function(){return t.selectedSource},function(){return t.loadLimits()}),Object(m.reaction)(function(){return t.selectedSourceGroup},function(e){return t.clearGreetingByTerminal(e)}),Object(m.reaction)(function(){return t.cardDetails},function(){return t.setChangedSumByLimit()}),this.actPaymentCardPanChange(),this.actPaymentCardValidChange(),this.actPaymentCardCvvChange(),Object(m.observe)(this.valuesMap,function(e){return t.handleValuesChange(e)}),Object(m.observe)(this.refContent,function(){return t.handleRefContentChange()}),Object(m.observe)(this.dependencyVisible,function(e){return t.handleDependenciesChange(e)}),Object(m.observe)(this.refMounted,function(e){return t.handleRefsChange(e)}),Object(m.reaction)(function(){return t.greeting},function(e){return t.handleShowGreetings(e)}),Object(m.reaction)(function(){return t.greeting},function(e){return t.handleSourceChangeByGreeting(e)}),Object(m.reaction)(function(){return t.greeting},function(e){return t.handleCurrencyChangeByGreeting(e)}),this.load()},PaymentFormStore.prototype.actAuthShowChange=function(){var t=this;r.authShowChangeDisposer&&r.authShowChangeDisposer(),Object(m.reaction)(function(){return t.authStore.show},function(e){return t.handleAuthClosing(e)})},PaymentFormStore.prototype.actUserAuthChange=function(){var t=this;r.userAuthChangeDisposer&&r.userAuthChangeDisposer(),r.userAuthChangeDisposer=Object(m.reaction)(function(){return t.user.authorized},function(e){return t.handleUserAuthChange(e)})},PaymentFormStore.prototype.actPaymentCardPanChange=function(){var e=this;r.paymentCardPanChangeDisposer&&r.paymentCardPanChangeDisposer(),r.paymentCardPanChangeDisposer=Object(m.observe)(this.paymentCardStore.cardPan,function(){return e.handleCardPanChange()})},PaymentFormStore.prototype.actPaymentCardValidChange=function(){var e=this;r.paymentCardValidChangeDisposer&&r.paymentCardValidChangeDisposer(),r.paymentCardValidChangeDisposer=Object(m.reaction)(function(){return e.paymentCardStore.validThru},function(){return e.handleValidThruCvvChange()})},PaymentFormStore.prototype.actPaymentCardCvvChange=function(){var e=this;r.paymentCardCvvChangeDisposer&&r.paymentCardCvvChangeDisposer(),r.paymentCardCvvChangeDisposer=Object(m.reaction)(function(){return e.paymentCardStore.cvv},function(){return e.handleValidThruCvvChange()})},PaymentFormStore.prototype.load=function(){if(this.hardReset(),this.recover(),this.confirmation=this.createConfirmation(),this.id=parseInt(this.context.params.id,10),this.providerNotFound=this.context.params.id!==this.id.toString(),!this.providerNotFound)return this.errorStore.hide(),this.loading.set(!0),this.loadProvider()},PaymentFormStore.prototype.loadProvider=function(){var t=this;return this.providerService.getProvider(this.id).then(function(e){return t.loadProviderSuccess(e)}).catch(function(e){return t.loadProviderError(e)})},PaymentFormStore.prototype.loadProviderSuccess=function(e){return this.provider=e,this.providerNotFound=!1,this.router.setHead(this.provider.getExtraValue("ceo_title")||this.provider.shortName,this.provider.getExtraValue("ceo_description"),this.provider.logoUrl),e.hasPaymentForm?this.user.authorized&&!this.confirmation?this.checkIdentification():void this.loadForm():this.loading.set(!1)},PaymentFormStore.prototype.loadProviderError=function(e){404!==e.status?(this.errorStore.show(e.message,"Ошибка загрузки провайдера"),this.loading.set(!1),this.identificationStatus=null):this.providerNotFound=!0},PaymentFormStore.prototype.checkIdentification=function(){var t=this;this.identificationStatus=ae.LOADING,this.identificationService.getIdentificationRequired(this.id,this.user.id,rt.a.PRE).then(function(e){return t.checkIdentificationSuccess(e)}).catch(function(e){return t.checkIdentificationError(e)})},PaymentFormStore.prototype.checkIdentificationSuccess=function(e){var t=this;if(!e.required)return this.identificationStatus=ae.NOT_REQUIRED,setTimeout(function(){t.identificationStatus=null},this.identificationDelay),void(this.provider.hasPaymentForm?this.loadForm():this.loading.set(!1));e.status===ot.a.FULL?this.identificationStatus=ae.REQUIRED_FULL:(this.identificationFlow=rt.a.PRE,this.identificationStatus=ae.REQUIRED_VERIFIED)},PaymentFormStore.prototype.checkIdentificationError=function(e){this.errorStore.show(e.message,"Ошибка проверки идентификации"),this.loading.set(!1),this.identificationStatus=null},PaymentFormStore.prototype.submitIdentification=function(){var t=this;return 0<this.identificationDataErrors.size?(this.errorsVisibleFields=this.allIdentificationFieldsErrors,Promise.resolve()):(this.loadingIdentification=!0,this.identificationService.setIdentification(this.user.id,this.identification).then(function(e){return t.identificationSubmitSuccess(e)}).catch(function(e){return t.setIdentificationError(e)}))},PaymentFormStore.prototype.identificationSubmitSuccess=function(e){this.errorsVisibleFields.clear(),this.setIdentificationValues(e),this.loadingIdentification=!1,this.identificationNeedCheck?this.identificationSubmitted=!0:e.level!==tt.a.SIMPLE?(this.manualIdentification=!1,this.identificationSubmitted=!0):this.identificationNeedCheck=!0},PaymentFormStore.prototype.confirmIdentification=function(){var t=this;return 0<this.identificationDocsErrors.size?(this.errorsVisibleFields=this.allIdentificationFieldsErrors,Promise.resolve()):(this.loadingIdentification=!0,this.identificationService.setIdentification(this.user.id,this.identification).then(function(e){return t.identificationConfirmSuccess(e)}).catch(function(e){return t.setIdentificationError(e)}))},PaymentFormStore.prototype.identificationConfirmSuccess=function(e){this.errorsVisibleFields.clear(),this.setIdentificationValues(e),this.loadingIdentification=!1,this.identificationConfirmed=!0,e.level!==tt.a.SIMPLE&&(this.manualIdentification=!1)},PaymentFormStore.prototype.submitPreIdentification=function(){var t=this;return 0<this.identificationDataErrors.size?(this.errorsVisibleFields=this.allIdentificationFieldsErrors,Promise.resolve()):this.identificationNeedCheck?(this.errorsVisibleFields.clear(),this.identificationSubmitted=!0,Promise.resolve()):(this.loadingIdentification=!0,this.identificationService.setIdentification(this.user.id,this.identification).then(function(e){return t.preIdentificationSuccess(e)}).catch(function(e){return t.setIdentificationError(e)}))},PaymentFormStore.prototype.confirmPreIdentification=function(){var t=this;return 0<this.identificationDocsErrors.size?(this.errorsVisibleFields=this.allIdentificationFieldsErrors,Promise.resolve()):(this.loadingIdentification=!0,this.identificationService.setIdentification(this.user.id,this.identification).then(function(e){return t.preIdentificationSuccess(e)}).catch(function(e){return t.setIdentificationError(e)}))},PaymentFormStore.prototype.preIdentificationSuccess=function(e){var t=this;this.errorsVisibleFields.clear(),this.loadingIdentification=!1,e.level===tt.a.SIMPLE?(this.identificationNeedCheck&&(this.identificationSubmitted=!0,this.identificationConfirmed=!0,this.identificationFailed=!0),this.setIdentificationValues(e),this.identificationNeedCheck=!0):(this.identificationSubmitted=!0,this.identificationConfirmed=!0,this.identificationFailed=!1,setTimeout(function(){t.setIdentificationValues(e)},this.successIdentificationDelay),this.provider.hasPaymentForm?this.loadForm():this.loading.set(!1))},PaymentFormStore.prototype.setIdentificationError=function(e){this.identificationValuesMap.clear(),this.errorsVisibleFields.clear(),this.loadingIdentification=!1,this.errorStore.show(e.message,"Ошибка загрузки идентификации")},PaymentFormStore.prototype.setIdentificationValues=function(e){var t=this,r=Object(a.serialize)(e);Object.keys(r).forEach(function(e){t.identificationValuesMap.set(e,r[e])})},PaymentFormStore.prototype.setManualIdentification=function(){this.manualIdentification=!0},Object.defineProperty(PaymentFormStore.prototype,"identification",{get:function(){var e=this.identificationValuesMap.get("birthDate");return new Xe.a(R.a.QIWI,this.identificationValuesMap.get("lastName")||"",this.identificationValuesMap.get("firstName")||"",this.identificationValuesMap.get("middleName")||"",e?new Date(e):null,this.identificationValuesMap.get("passport")||"",this.identificationDocsTab===Ze.a.INN&&this.identificationValuesMap.get("inn")||"",this.identificationDocsTab===Ze.a.SNILS&&this.identificationValuesMap.get("snils")||"",this.identificationDocsTab===Ze.a.OMS&&this.identificationValuesMap.get("oms")||"",tt.a[this.identificationValuesMap.get("level")])},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationDataErrors",{get:function(){return this.validator.validate(it.a,Object(a.serialize)(this.identification))},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationDocsErrors",{get:function(){return this.validator.validate(nt.a,Object(a.serialize)(this.identification))},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationVisibleDataErrors",{get:function(){return this.validator.validateFields(it.a,Object(a.serialize)(this.identification),this.errorsVisibleFields)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationVisibleDocsErrors",{get:function(){return this.validator.validateFields(nt.a,Object(a.serialize)(this.identification),this.errorsVisibleFields)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"allIdentificationFieldsErrors",{get:function(){return new Map(Object.keys(Object(a.serialize)(this.identification)).map(function(e){return[e,!0]}))},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationVerified",{get:function(){return this.identification.level===tt.a.VERIFIED||this.identification.level===tt.a.FULL},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.setIdentificationDocsTab=function(e){this.identificationDocsTab=e},PaymentFormStore.prototype.loadLimits=function(){var t=this;if(this.terms&&this.terms.id&&this.selectedSource&&this.selectedSource.providerId){var e=new dt.c(this.selectedSource.providerId,this.terms.id);if(!this.prevProviderLimitInfo||!this.prevProviderLimitInfo.equals(e))return this.prevProviderLimitInfo=e,this.limitsService.getLimits(this.user.id,e).then(function(e){return t.loadLimitsSuccess(e.limits)})}},PaymentFormStore.prototype.loadLimitsSuccess=function(e){var o=this;Object.entries(e).forEach(function(e){var t=e[0],r=e[1];o.paymentLimits.set(new k.a(t),r)})},PaymentFormStore.prototype.loadForm=function(){var n=this;return Promise.all([this.sinapService.getForm(this.id),this.sinapService.getCrossRates(),this.identificationService.getIdentificationLimits()]).then(function(e){var t=e[0],r=e[1],o=e[2];return n.loadFormSuccess(t,r,o)}).catch(function(e){return n.loadFormError(e)})},PaymentFormStore.prototype.loadFormSuccess=function(e,t,r){if(this.loading.set(!1),this.form=e,this.crossRates=t.crossRates,this.limits=r,this.router.setHead(this.provider.getExtraValue("seo_title")||this.provider.shortName,this.provider.getExtraValue("seo_description"),this.provider.logoUrl),this.updateTerms(),this.fillValuesMap(this.elements),this.fillFormByRequest(),this.updateDependencyVisibility(!0),this.confirmation)return this.submitConfirmation();if(this.router.search.transaction){if(this.user.authorized)return this.loadTransaction();this.router.replace("/payment/form/"+this.id),this.hardReset()}if(this.router.search.payment){if(this.user.authorized)return this.loadPayment();this.router.replace("/payment/form/"+this.id),this.hardReset()}return Promise.resolve()},PaymentFormStore.prototype.loadFormError=function(e){this.errorStore.show(e.message,"Ошибка загрузки формы"),this.loading.set(!1),this.identificationStatus=null},PaymentFormStore.prototype.loadTransaction=function(){var t=this;return this.repeatingPayment=!0,this.historyService.getItem(this.router.search.transaction,"OUT").then(function(e){return t.loadTransactionSuccess(e)}).catch(function(e){return t.loadTransactionError(e)})},PaymentFormStore.prototype.loadTransactionSuccess=function(e){var t=this;if(e.provider.id!==this.id)return this.errorStore.show("Невозможно повторить платеж","Ошибка"),void(this.repeatingPayment=!1);(this.repeatingTransaction=e).paymentExtras.forEach(function(e){return t.valuesMap.set(e.name,e.value)}),this.sum=new T.a(e.sum.amount,e.sum.currency),e.comment&&this.comment.set(e.comment)},PaymentFormStore.prototype.loadTransactionError=function(e){this.repeatingPayment=!1,this.errorStore.show(e.message,"Ошибка загрузки транзакции")},Object.defineProperty(PaymentFormStore.prototype,"repeatingAccountExtra",{get:function(){return this.repeatingTransaction?this.repeatingTransaction.getPaymentExtra("account")||{name:"account",title:"Номер счета",value:this.repeatingTransaction.account}:null},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.loadPayment=function(){var t=this;return this.favoritePayment=!0,this.favoriteService.getFavoritePayment(this.user.id,this.router.search.payment,!0).then(function(e){return t.loadPaymentSuccess(e)}).catch(function(e){return t.loadPaymentError(e)})},PaymentFormStore.prototype.loadPaymentSuccess=function(e){if(e.provider.id!==this.id)return this.errorStore.show("Невозможно загрузить платеж","Ошибка"),void(this.favoritePayment=!1);this.valuesMap.merge(e.fields),this.comment.set(e.comment||""),this.sum=new T.a(e.sum.amount,e.sum.currency)},PaymentFormStore.prototype.loadPaymentError=function(e){this.favoritePayment=!1,this.errorStore.show(e.message,"Ошибка загрузки платежа")},PaymentFormStore.prototype.setInitialSum=function(){if(this.terms&&this.terms.sumConstraint)if(this.terms.sumConstraint instanceof $.a){var e=this.terms.sumConstraint;this.sum=new T.a(e.sum.amount,e.sum.currency)}else if(this.terms.sumConstraint instanceof Y.a){var t=this.terms.sumConstraint;t.suggestedSum&&(this.sum=new T.a(t.suggestedSum.amount,t.suggestedSum.currency))}!this.sum&&this.terms&&(this.sum=new T.a(NaN,this.terms.limits[0].currency))},PaymentFormStore.prototype.sendChequeEmail=function(){var t=this,e=this.checkTransactionResult;return this.chequeEmailSending=!0,this.emailSent=!0,this.historyService.sendEmail(e,this.emailExtra).then(function(){return t.sendChequeEmailSuccess()}).catch(function(e){return t.sendChequeEmailError(e)})},PaymentFormStore.prototype.sendChequeEmailSuccess=function(){this.chequeEmailSending=!1,this.emailValue=this.emailExtra},PaymentFormStore.prototype.sendChequeEmailError=function(e){this.chequeEmailSending=!1,this.emailValue="",this.emailSent=!1,e.status||this.sendChequeEmail()},PaymentFormStore.prototype.handleStep=function(e){switch(e){case se.a.WAITING_QUEUE:this.emailExtra&&(this.chequeEmailSending=!0,this.sendChequeEmail());break;case se.a.RESULT_SUCCESS:this.user.authorized&&(this.loadPostPaidBanner(),this.loadPostIdentification()),this.emailExtra&&!this.emailSent&&(this.chequeEmailSending=!0,this.sendChequeEmail())}},PaymentFormStore.prototype.handleDependenciesChange=function(e){this.updateValuesMap(e),this.updateTerms(),this.updateErrorOnDependencyChange()},PaymentFormStore.prototype.handleRefContentChange=function(){this.updateDependencyVisibility(),this.updateTerms()},PaymentFormStore.prototype.handleValuesChange=function(e){var t=this;this.updateDependencyVisibility(),this.handleRefRequesting(e),"account"===e.name&&(clearTimeout(this.delayAccountChange),this.delayAccountChange=setTimeout(function(){return t.loadComplexCommission()},666))},PaymentFormStore.prototype.setAmount=function(e){var t=(""+e).replace(/\s/g,"").replace(/,/,"."),r=t.split(".")[0];r.length>this.integerLimit?this.sum=new T.a(parseFloat(r.slice(0,this.integerLimit)),this.currency):this.sum=new T.a(parseFloat(t),this.currency)},PaymentFormStore.prototype.setChangedSumByLimit=function(){if(this.sum){var e=Math.floor(this.amount).toString();e.length<=this.integerLimit||(this.sum=new T.a(parseFloat(e.slice(0,this.integerLimit)),this.currency))}},Object.defineProperty(PaymentFormStore.prototype,"amount",{get:function(){return this.sum.amount||0},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"currency",{get:function(){return this.sum.currency},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.setComment=function(e){this.comment.set(e)},Object.defineProperty(PaymentFormStore.prototype,"commentAvailable",{get:function(){return this.provider&&this.providerService.isCommentAvailable(this.provider)},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.setValues=function(e,t){this.valuesMap.set(e,t)},PaymentFormStore.prototype.setIdentificationValue=function(e,t){this.identificationValuesMap.set(e,t)},PaymentFormStore.prototype.setCurrency=function(e){this.sum=new T.a(this.sum.amount,e)},PaymentFormStore.prototype.changeSmsValue=function(e){this.smsErrors.clear(),this.sms=e},PaymentFormStore.prototype.changeSelectedSourceCard=function(e){this.paymentCardStore.resetData(),this.selectedSource=e,this.selectedSource instanceof xe.a&&this.makeCardDisabled()},PaymentFormStore.prototype.makeCardDisabled=function(){var e=this.selectedSource;this.paymentCardStore.cardPan.set(e.maskedPan),this.paymentCardStore.validThru="**  /  **",this.paymentCardStore.disabled=!0},PaymentFormStore.prototype.changeCardLinking=function(e){this.linkingCard=e},PaymentFormStore.prototype.changeSelectedSourceWallet=function(e){this.selectedSource=e},PaymentFormStore.prototype.changeSelectedSourceGroup=function(e){e!==this.selectedSourceGroup&&(this.selectedSourceGroup=e,this.resetSelectedSourceByTab(e))},PaymentFormStore.prototype.handleSumChange=function(){var e=this;clearTimeout(this.delaySumChange),this.delaySumChange=setTimeout(function(){return e.delayedSumChange()},666)},PaymentFormStore.prototype.delayedSumChange=function(){this.loadCardDetails(),this.loadComplexCommission()},PaymentFormStore.prototype.handleCardPanChange=function(){this.loadCardDetails(),this.loadComplexCommission()},PaymentFormStore.prototype.handleValidThruCvvChange=function(){this.loadComplexCommission()},PaymentFormStore.prototype.createCardDetailRequest=function(){return this.selectedSource instanceof Re.a?this.paymentCardStore.errors.get("pan")?null:this.createCardDetailsRequestFromUnlinkedCard():this.selectedSource instanceof xe.a?this.createCardDetailsRequestFromNewLinkedCard():null},PaymentFormStore.prototype.createCardDetailsRequestFromUnlinkedCard=function(){return new Me.a(new Be.a(this.paymentCardStore.cardPan.get().replace(/\D/g,"")),new T.a(this.amount,this.currency))},PaymentFormStore.prototype.createCardDetailsRequestFromNewLinkedCard=function(){var e=this.selectedSource;return new Me.a(new Ge.a(e.linkId),new T.a(this.amount,this.currency))},PaymentFormStore.prototype.loadCardDetails=function(){var t=this;if(null!=this.terms){var e=this.createCardDetailRequest();null!=e&&this.sinapService.getCardDetails(this.terms.id,e).then(function(e){return t.loadCardDetailsSuccess(e)}).catch(function(e){return t.loadCardDetailsFailure(e)})}},PaymentFormStore.prototype.loadCardDetailsSuccess=function(e){this.cardDetails=e,this.cardDetailsError=null},PaymentFormStore.prototype.loadCardDetailsFailure=function(e){this.cardDetailsError=e,this.cardDetails=null},PaymentFormStore.prototype.resetSelectedSourceByTab=function(e){this.cardDetails=null,this.complexCommission=null,e===ce.a.MOBILE&&(this.selectedSource=this.sourceMobile),e===ce.a.CARD&&(this.selectedSource=this.sourcesCard[0],this.paymentCardStore.resetData(),this.selectedSource instanceof xe.a&&this.makeCardDisabled()),e===ce.a.WALLET&&(this.selectedSource=this.defaultWallet),e===ce.a.TERMINAL&&(this.selectedSource=null)},Object.defineProperty(PaymentFormStore.prototype,"defaultWallet",{get:function(){return this.sourcesWallet.find(function(e){return e.isDefault})||this.sourcesWallet[0]},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.showFormErrors=function(r){var o=this;this.amountBlur=r,this.paymentCardStore.errorsVisibleFields.set("pan",r),this.paymentCardStore.errorsVisibleFields.set("validThru",r),this.paymentCardStore.errorsVisibleFields.set("cvv",r),this.valuesMap.forEach(function(e,t){return o.errorsVisibleFields.set(t,r)}),this.favoriteBlur.set("title",r),this.favoriteBlur.set("schedule",r),this.onBlurEmail(),this.greetingCommentBlur=r},PaymentFormStore.prototype.submitPayment=function(){return this.showFormErrors(!1),this.cardDetailsError?(this.errorStore.show(this.cardDetailsError.message,"Ошибка банковской карты"),Promise.resolve()):this.isFormValid?this.refErrors?Promise.resolve():this.isNotEnoughMoney?Promise.resolve():this.user.expired?(this.router.loading=!0,this.router.goto("/options/password.action"),Promise.resolve()):this.greeting&&this.greetingCardsLoading?Promise.resolve():this.selectedSourceGroup!==ce.a.WALLET?this.confirmPayment():(this.paymentCheck=!0,Promise.resolve()):(this.showFormErrors(!0),Promise.resolve())},PaymentFormStore.prototype.editPayment=function(){this.paymentCheck=void 0},PaymentFormStore.prototype.confirmPayment=function(){var t=this;return this.submitPaymentLoading?Promise.resolve():(this.submitPaymentLoading=!0,this.submitPaymentResult=null,this.repeatingPayment?this.sinapService.sendRepeatingPayment(this.createRepeatingPayment()).then(function(e){return t.submitPaymentSuccess(e)}).catch(function(e){return t.submitPaymentError(e)}):this.sinapService.sendPayment(this.terms.id,this.createPayment()).then(function(e){return t.submitPaymentSuccess(e)}).catch(function(e){return t.submitPaymentError(e)}))},PaymentFormStore.prototype.submitPaymentSuccess=function(e){this.submitPaymentLoading=!1;var t=(this.submitPaymentResult=e).transaction,r=this.paymentTransactionState;r instanceof he.a&&(localStorage.setItem(pt,t.id),localStorage.setItem(ht,r.confirmationUrl),this.postTimer=this.router.post(r.redirectUrl,{PaReq:r.paReq,MD:r.md,TermUrl:location.href},1500)),r instanceof pe.a&&(this.transaction=parseInt(t.id,10),this.confirmation=null,this.submitConfirmationResult=t,this.scheduled?this.createFavorite():this.checkTransaction()),r instanceof ye.a&&this.resendSmsCountdown(20),r instanceof fe.a&&this.resendSmsCountdown()},PaymentFormStore.prototype.submitPaymentError=function(e){this.submitPaymentLoading=!1,this.submitPaymentResult=e},PaymentFormStore.prototype.submitPaymentErrorCheck=function(){this.submitPaymentResult=null},PaymentFormStore.prototype.submitPaymentErrorGoToIndexPage=function(){this.submitPaymentResult=null,this.router.push("/")},PaymentFormStore.prototype.submitPaymentErrorGoToIdentificationForm=function(){this.submitPaymentResult=null,this.router.open("/settings/identification/form")},PaymentFormStore.prototype.submitPaymentErrorGoToBlock=function(){this.submitPaymentResult=null,this.router.open("/support/request/security/unlock.action")},Object.defineProperty(PaymentFormStore.prototype,"paymentId",{get:function(){return this.submitPaymentResult instanceof W.a||this.submitPaymentResult instanceof z.a?this.submitPaymentResult.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"paymentTransactionState",{get:function(){return this.submitPaymentResult instanceof W.a||this.submitPaymentResult instanceof z.a?this.submitPaymentResult.transaction.state:null},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.submitSms=function(){var t=this;return null===this.sms||""===this.sms?(this.smsErrors.set("sms","Укажите код из сообщения"),Promise.resolve()):this.submitConfirmationLoading?Promise.resolve():(this.submitConfirmationLoading=!0,this.sinapService.sendSmsConfirmation(this.sms,this.paymentId).then(function(e){return t.submitSmsSuccess(e)}).catch(function(e){return t.submitSmsError(e)}))},PaymentFormStore.prototype.submitSmsSuccess=function(e){this.sms="",this.smsErrors.clear(),clearTimeout(this.delaySmsResend),this.transaction=parseInt(e.transaction.id,10),this.submitConfirmationLoading=!1,this.submitConfirmationResult=e.transaction,this.scheduled?this.createFavorite():this.checkTransaction()},PaymentFormStore.prototype.submitSmsError=function(e){this.sms="",this.smsErrors.clear(),this.submitConfirmationLoading=!1,"QWPRC-903"===e.code?(this.sms="",this.smsErrors.set("sms",e.message)):(this.submitConfirmationResult=e,clearTimeout(this.delaySmsResend))},PaymentFormStore.prototype.goToMain=function(){this.router.goto("/main")},PaymentFormStore.prototype.goToIdentification=function(){this.router.goto("/settings/identification")},PaymentFormStore.prototype.retrySchedule=function(){this.router.push("/payment/favorite/create/"+this.transaction+"?schedule=true")},PaymentFormStore.prototype.loadFavorite=function(){var t=this;return this.createFavoriteLoading=!0,this.favoriteService.getFavoritePayment(this.user.id,this.scheduledCreated.id).then(function(e){return t.loadFavoriteSuccess(e)}).catch(function(e){return t.loadFavoriteError(e)})},PaymentFormStore.prototype.loadFavoriteSuccess=function(e){this.createFavoriteLoading=!1,this.createFavoriteResult=e},PaymentFormStore.prototype.loadFavoriteError=function(e){this.createFavoriteLoading=!1,this.createFavoriteResult=e},PaymentFormStore.prototype.createFavorite=function(){var t=this;return this.createFavoriteLoading=!0,this.historyService.getItem(this.transaction,y.h[y.h.OUT]).then(function(e){if(!t.terms||e.provider.id.toString()!==t.terms.id)throw new w.a("Техническая ошибка");return t.favoriteService.createFavorite(t.favoritePaymentRequest,t.user.id,t.transaction)}).then(function(e){return t.createFavoriteSuccess(e)}).catch(function(e){return t.createFavoriteError(e)})},PaymentFormStore.prototype.createFavoriteSuccess=function(e){this.createFavoriteLoading=!1,(this.createFavoriteResult=e).status===lt.a.AWAITING_SMS_CONFIRMATION&&this.resendSmsCountdown(),this.checkTransaction()},PaymentFormStore.prototype.createFavoriteError=function(e){this.createFavoriteLoading=!1,this.createFavoriteResult=e,this.checkTransaction()},PaymentFormStore.prototype.submitFavoriteSms=function(){var t=this;return null===this.sms||""===this.sms?(this.smsErrors.set("sms","Укажите код из сообщения"),Promise.resolve()):this.submitConfirmationLoading?Promise.resolve():(this.submitConfirmationLoading=!0,this.favoriteService.confirmSms(this.sms,this.user.id,this.scheduledCreated.id).then(function(){return t.submitFavoriteSmsSuccess()}).catch(function(e){return t.submitFavoriteSmsError(e)}))},PaymentFormStore.prototype.submitFavoriteSmsSuccess=function(){this.sms="",this.smsErrors.clear(),clearTimeout(this.delaySmsResend),this.submitConfirmationLoading=!1,this.loadFavorite(),this.checkTransaction()},PaymentFormStore.prototype.submitFavoriteSmsError=function(e){this.sms="",this.smsErrors.clear(),this.submitConfirmationLoading=!1,"confirmation.failed"===e.code?(this.sms="",this.smsErrors.set("sms",e.message)):(this.createFavoriteResult=e,clearTimeout(this.delaySmsResend),this.checkTransaction())},PaymentFormStore.prototype.resendFavoriteSms=function(){var t=this;return this.resendSmsLoading=!0,this.favoriteService.resendSms(this.user.id,this.scheduledCreated.id).then(function(){return t.resendFavoriteSmsSuccess()}).catch(function(e){return t.resendFavoriteSmsFailure(e)})},PaymentFormStore.prototype.resendFavoriteSmsSuccess=function(){this.resendSmsLoading=!1,this.smsErrors.clear(),this.resendSmsCountdown()},PaymentFormStore.prototype.resendFavoriteSmsFailure=function(e){this.resendSmsLoading=!1,this.smsErrors.set("sms",e.message)},PaymentFormStore.prototype.resetIdentificationStep=function(){this.identificationFailed=!1,this.identificationSubmitted=!1,this.identificationConfirmed=!1},PaymentFormStore.prototype.retry=function(){this.reset()},PaymentFormStore.prototype.saveFavoritePayment=function(){var e=this.checkTransactionResult.txnId;this.router.push("/payment/favorite/create/"+e)},PaymentFormStore.prototype.submitConfirmation=function(){var t=this;return this.submitConfirmationLoading=!0,this.submitConfirmationResult=null,this.sinapService.sendConfirmations(this.confirmation).then(function(e){return t.submitConfirmationSuccess(e)}).catch(function(e){return t.submitConfirmationError(e)})},PaymentFormStore.prototype.submitConfirmationSuccess=function(e){return this.transaction=parseInt(this.confirmation.id,10),this.confirmation=null,this.submitConfirmationLoading=!1,this.submitConfirmationResult=e,this.checkTransaction()},PaymentFormStore.prototype.submitConfirmationError=function(e){this.submitConfirmationLoading=!1,this.submitConfirmationResult=e},PaymentFormStore.prototype.createRepeatingPayment=function(){var e=new U;return e.repeatTransactionId=this.router.search.transaction,e.paymentMethod=this.createPaymentMethodFromSource(this.selectedSource),e.amount=this.amount,e.fields={ga_cid:this.cookieStore.get("_ga_cid")?Object(d.crc32)(this.cookieStore.get("_ga_cid")).toString(16):void 0,cardId:this.greetingCardAvailable?this.chosenGreetingCard.id.toString():void 0},e.comment=this.commentAvailable?this.comment.get():"",e},PaymentFormStore.prototype.createPayment=function(){var e=new G.a;return e.sum=new T.a(this.amount,this.currency),e.paymentMethod=this.createPaymentMethodFromSource(this.selectedSource),e.fields=Object.assign(this.valuesMap.toJSON(),{browser_user_agent_crc:Object(d.crc32)(navigator.userAgent).toString(16),ga_cid:this.cookieStore.get("_ga_cid")?Object(d.crc32)(this.cookieStore.get("_ga_cid")).toString(16):void 0,from_favorite:this.favoritePayment?this.router.search.payment:void 0,unauth_cheque_email:this.user.authorized||0===this.emailValue.length?void 0:this.emailValue,pfto:this.pageTimeOn?Object(p.differenceInMilliseconds)(new Date,this.pageTimeOn).toString():void 0,cardId:this.greetingCardAvailable?this.chosenGreetingCard.id.toString():void 0}),e.comment=this.commentAvailable?this.comment.get():"",e},PaymentFormStore.prototype.createPaymentMethodFromSource=function(e){switch(!0){case e instanceof Te.a:return this.createPaymentMethodFromAccountSource();case e instanceof xe.a:return this.createPaymentMethodFromNewLinkedCardSource();case e instanceof Re.a:return this.createPaymentMethodFromUnlinkedCardSource();case e instanceof Ae.a:return new ve.a;case e instanceof Ne.a:return new _e.a;case e instanceof ke.a:return new Ee.a;case e instanceof De.a:return new Fe.a;case e instanceof Le.a:return new Pe.a;default:return null}},PaymentFormStore.prototype.createPaymentMethodFromAccountSource=function(){var e=new ge.a;return e.accountId=this.selectedSource.accountId,e},PaymentFormStore.prototype.createPaymentMethodFromUnlinkedCardSource=function(){var e=new Ce.a;e.card=new Ie.a,e.card.pan=this.paymentCardStore.cardPan.get(),e.card.cvv=this.paymentCardStore.cvv,e.card.expirationDate=new je.a;var t=this.paymentCardStore.validThru.replace(/\D/g,"");return e.card.expirationDate.month=t.substr(0,2),e.card.expirationDate.year="20"+t.substr(2,2),localStorage.getItem(ft)&&(e.card.cardholderName=localStorage.getItem(ft)),e.saveCard=!!this.user.authorized&&this.linkingCard,e},PaymentFormStore.prototype.createPaymentMethodFromNewLinkedCardSource=function(){var e=new Oe.a;return e.cvv=this.paymentCardStore.cvv,e.linkId=this.selectedSource.linkId,e},PaymentFormStore.prototype.createConfirmation=function(){var e=this.requestStore.body;if(null==e.MD||null==e.PaRes)return null;var t=localStorage.getItem(pt),r=localStorage.getItem(ht);if(localStorage.removeItem(pt),localStorage.removeItem(ht),null==t||null==r)return null;var o=new H.a;return o.id=t,o.completionURL=r,o.md=e.MD,o.paRes=e.PaRes,o},PaymentFormStore.prototype.getRequestPayload=function(e){var o=this,t=e.params.reduce(function(e,t){var r;return Object.assign(e,((r={})[t.field]=o.valuesMap.get(t.field),r))},{}),r=Object.keys(t).find(function(e){return o.errors.has(e)}),n=Object.keys(t).some(function(e){return void 0===t[e]});return r||n?null:t},PaymentFormStore.prototype.checkRef=function(e){null!==this.getRequestPayload(e)&&(this.refError.delete(e.id),this.refContent.delete(e.id),this.loadRef(e))},PaymentFormStore.prototype.loadRef=function(t){var r=this;this.refContent.has(t.id)&&this.cleanUpValuesMap(this.refContent.get(t.id).elements);var o=this.getRefRequestId(t.id);this.refLoading.set(o,!0),this.sinapService.getRefs(t.id,this.getRequestPayload(t)).then(function(e){return r.loadRefSuccess(e,t.id,o)}).catch(function(e){return r.loadRefError(e,t.id,o)})},PaymentFormStore.prototype.loadRefSuccess=function(e,t,r){this.refLoading.delete(r),this.isCurrentRefRequest(t)&&(this.refContent.has(t)?this.fillValuesMapWithReset(e.elements):this.fillValuesMap(e.elements),this.refContent.set(t,e))},PaymentFormStore.prototype.loadRefError=function(e,t,r){this.refLoading.delete(r),this.isCurrentRefRequest(t)&&this.refError.set(t,e.message)},PaymentFormStore.prototype.getRefRequestId=function(e){return e+"UID"+1e9*Math.random()},PaymentFormStore.prototype.isCurrentRefRequest=function(t){return!Object.keys(this.refLoading.toJSON()).find(function(e){return e.startsWith(t)})},PaymentFormStore.prototype.replenishWallet=function(){this.router.open("/replenish","_blank")},PaymentFormStore.prototype.goBack=function(){return this.router.push("/payment")},Object.defineProperty(PaymentFormStore.prototype,"total",{get:function(){if(!this.amount)return 0;var e=this.amount;return this.sourceCommissionCancelsPrimary&&this.sourceCommission?Object(f.g)(Object(f.f)(e,this.sourceCommission.getValueForAmount(e)),2):(this.commission&&(e=Object(f.g)(Object(f.f)(e,this.commission.getValueForAmount(e)),2)),this.sourceCommission&&(e=Object(f.g)(Object(f.f)(e,this.sourceCommission.getValueForAmount(e)),2)),e)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"unauthWalletTotal",{get:function(){var e=this.amount;return e?Object(f.g)(Object(f.f)(e,this.unauthWalletCommission.getValueForAmount(e)),2):0},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"commissionForInfo",{get:function(){return this.sourceCommissionCancelsPrimary&&this.sourceCommission?this.sourceCommission:this.commission},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"additionalCommissionForInfo",{get:function(){return this.sourceCommissionCancelsPrimary?null:this.sourceCommission},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isNotEnoughMoney",{get:function(){return this.user.authorized&&this.selectedSource&&this.selectedSourceGroup===ce.a.WALLET&&this.totalSumView&&this.selectedSource.balance&&this.totalSumView.amount>this.selectedSource.balance.amount},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"converting",{get:function(){return this.selectedSource&&this.sourceCurrency&&!this.currency.equals(this.sourceCurrency)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"convertedCurrencyAmount",{get:function(){return this.convertCurrency(this.rate)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"rate",{get:function(){return this.findCurrenciesRate(this.sourceCurrency,this.currency)},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.findCurrenciesRate=function(t,r){return this.crossRates.find(function(e){return e.from.equals(t)&&e.to.equals(r)}).rate},PaymentFormStore.prototype.convertCurrency=function(e){return Object(f.g)(Object(f.a)(1,e),4)},PaymentFormStore.prototype.convertValue=function(e,t){return Object(f.g)(Object(f.h)(e,t),2)},Object.defineProperty(PaymentFormStore.prototype,"limit",{get:function(){return null==this.terms?null:this.terms.getCurrencyLimit(this.currency)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"minAmount",{get:function(){return this.limit&&0<this.limit.min&&this.sourceTerms&&0<this.sourceTerms.minAmount?this.limit.min>this.sourceTerms.minAmount?this.limit.min:this.sourceTerms.minAmount:this.limit&&0<this.limit.min?this.limit.min:this.sourceTerms&&0<this.sourceTerms.minAmount?this.sourceTerms.minAmount:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"maxAmount",{get:function(){return this.limit&&0<this.limit.max&&this.sourceTerms&&0<this.sourceTerms.maxAmount?this.limit.max<this.sourceTerms.maxAmount?this.limit.max:this.sourceTerms.maxAmount:this.limit&&0<this.limit.max?this.limit.max:this.sourceTerms&&0<this.sourceTerms.maxAmount?this.sourceTerms.maxAmount:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"integerLimit",{get:function(){return(""+this.maxAmount).split(".")[0].length},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"limitCurrency",{get:function(){return null==this.limit?null:this.limit.currency},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"commission",{get:function(){return null==this.terms?null:null==this.terms.commission?null:this.terms.commission.getAmountCommission(this.amount)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"unauthWalletCommission",{get:function(){var e=this.walletTerms;return null==e?null:null==e.commission?null:e.commission.getAmountCommission(this.amount)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"commissionSum",{get:function(){return this.complexCommission?new T.a(Object(f.f)(this.complexCommission.qwCommission.amount,this.complexCommission.fundingSourceCommission.amount),this.complexCommission.enrollmentSum.currency):new T.a(Object(f.e)(this.total,this.amount),this.currency)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"amountSum",{get:function(){return this.complexCommission?this.complexCommission.enrollmentSum:this.sum},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"totalSum",{get:function(){return this.complexCommission?this.complexCommission.withdrawSum:this.sourceCurrency?new T.a(this.total,this.sourceCurrency):this.user.authorized?null:new T.a(this.total,this.currency)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"totalSumView",{get:function(){return this.totalSum?this.converting&&!this.complexCommission?new T.a(this.convertValue(this.totalSum.amount,this.rate),this.totalSum.currency):this.totalSum:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"unauthWalletTotalSum",{get:function(){return new T.a(this.unauthWalletTotal,this.currency)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sourceTerms",{get:function(){return this.cardDetails&&this.cardDetails.terms?this.cardDetails.terms:null==this.selectedSource?null:this.selectedSource.terms},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sourceCommission",{get:function(){return null==this.sourceTerms?null:null==this.sourceTerms.commission?null:this.sourceTerms.commission.getAmountCommission(this.amount)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sourceCommissionCancelsPrimary",{get:function(){return null==this.sourceTerms?null:this.sourceTerms.cancelsPrimaryCommission},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sourceCurrency",{get:function(){return null==this.sourceTerms?null:this.sourceTerms.currency},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"amountView",{get:function(){return isNaN(this.sum.amount)?"":this.amount.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sumFixed",{get:function(){return!(!this.terms||!this.terms.sumConstraint)&&this.terms.sumConstraint instanceof $.a},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"currencies",{get:function(){return this.terms.limits.map(function(e){return e.currency})},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"currencyOptions",{get:function(){return this.currencies.map(function(e){return{label:e.title,value:e,disabled:!1}})},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"currencyForMulticurrencyAmount",{get:function(){var t=this;return this.currencyOptions.find(function(e){return e.value.equals(t.currency)}).value},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"deadline",{get:function(){return this.form&&this.form.content&&this.form.content.terms&&this.form.content.terms.deadline?this.form.content.terms.deadline:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"elements",{get:function(){return this.form&&this.form.content&&this.form.content.elements?this.form.content.elements:[]},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"flatElements",{get:function(){return this.getPartFlatElements(this.elements)},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.getPartFlatElements=function(e){var i=this;return e.reduce(function(e,t){if(t instanceof D.a){var r=t;if(r.view)return e.concat(r)}if(t instanceof V.a){var o=t;if(o.hasElements&&i.isDependencyVisible(o))return e.concat(i.getPartFlatElements(o.elements))}if(t instanceof L.a){var n=t;if(e.push(n),i.refContent.has(n.id)&&i.refContent.get(n.id).hasElements&&i.ifRefContentVisible(i.refContent.get(n.id)))return e.concat(i.getPartFlatElements(i.refContent.get(n.id).elements))}return e},[])},Object.defineProperty(PaymentFormStore.prototype,"values",{get:function(){var o=this.valuesMap.toJSON();return Object.keys(o).reduce(function(e,t){var r;return Object.assign(e,((r={})[t]=void 0===o[t]?"":o[t],r))},{})},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"error",{get:function(){return this.submitPaymentResult instanceof w.a?this.submitPaymentResult:this.submitConfirmationResult instanceof w.a?this.submitConfirmationResult:this.checkTransactionResult instanceof w.a?this.checkTransactionResult:this.submitPaymentResult&&this.submitPaymentResult.transaction.state instanceof be.a?new w.a("Попробуйте повторить платеж"):null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationError",{get:function(){return this.error&&["QWPRC-866","QWPRC-867","QWPRC-868","QWPRC-869"].includes(this.error.code)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"blockedError",{get:function(){return this.error&&["QWPRC-1021"].includes(this.error.code)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"errors",{get:function(){return this.validator.validate(this.schema,this.values)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"visibleErrors",{get:function(){return this.validator.validateFields(this.schema,this.values,this.errorsVisibleFields)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"firstVisibleError",{get:function(){return 0<this.visibleErrors.size?this.visibleErrors.keys().next().value:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"firstSumError",{get:function(){return null===this.firstVisibleError&&this.amountBlur&&!this.isValidSum},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"schema",{get:function(){return{title:"SinapForm",type:"object",properties:this.schemaProperties(this.elements)}},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"formErrors",{get:function(){return this.user.authorized||this.naMode!==le.CARD?this.repeatingPayment?{fields:!1,sum:!this.isValidSum,paymentCard:!1,favorite:this.scheduled&&0<this.favoriteErrors.size,email:!1,comment:!1}:{fields:0<this.errors.size,sum:!this.isValidSum,paymentCard:this.selectedSourceGroup===ce.a.CARD&&0<this.paymentCardStore.errors.size,favorite:this.scheduled&&0<this.favoriteErrors.size,email:!1,comment:!this.isValidGreetingComment}:{fields:0<this.errors.size,sum:!this.isValidSum,paymentCard:0<this.paymentCardStore.errors.size,favorite:!1,email:this.emailError,comment:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isFormValid",{get:function(){var t=this.formErrors;return 0===Object.keys(t).filter(function(e){return!!t[e]}).length},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"refErrors",{get:function(){return 0!==this.refError.size},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isValidSum",{get:function(){return!!this.totalSum&&(0!==this.amount&&(0<this.maxAmount&&0<this.minAmount?this.totalSum.amount<=this.maxAmount&&this.totalSum.amount>=this.minAmount:0<this.minAmount?this.totalSum.amount>=this.minAmount:!(0<this.maxAmount)||this.totalSum.amount<=this.maxAmount))},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"favoritePaymentRequest",{get:function(){return new st.a(this.favoriteTitle.get(),new ut.a(this.favoriteSchedule.get()))},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"favoriteErrors",{get:function(){return this.validator.validate(at.a,Object(a.serialize)(this.favoritePaymentRequest))},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"favoriteVisibleErrors",{get:function(){return this.validator.validateFields(at.a,Object(a.serialize)(this.favoritePaymentRequest),this.favoriteBlur)},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.resendSmsCountdown=function(e){var t=this;void 0===e&&(e=120),0!==(this.smsRemain=e)&&(this.delaySmsResend=setTimeout(function(){return t.resendSmsCountdown(e-1)},1e3))},PaymentFormStore.prototype.resendSms=function(){var t=this;return this.resendSmsLoading=!0,this.sinapService.resendSmsConfirmation(this.paymentId).then(function(e){return t.resendSmsSuccess(e)}).catch(function(e){return t.resendSmsFailure(e)})},PaymentFormStore.prototype.resendSmsSuccess=function(e){this.resendSmsLoading=!1,this.smsErrors.clear(),this.resendConfirmation=e.notificationType,this.resendConfirmation instanceof Se.a?this.resendSmsCountdown(20):this.resendSmsCountdown()},PaymentFormStore.prototype.resendSmsFailure=function(e){this.resendSmsLoading=!1,this.resendConfirmation=void 0,this.smsErrors.set("sms",e.message)},PaymentFormStore.prototype.schemaProperties=function(e){return null==e||0===e.length?{}:e.map(this.mapSchemaPropertiesElement,this).reduce(this.reduceSchemaPropertiesElement)},PaymentFormStore.prototype.reduceSchemaPropertiesElement=function(e,t){return Object.assign(e,t)},PaymentFormStore.prototype.mapSchemaPropertiesElement=function(e){return e instanceof D.a?this.mapSchemaPropertiesField(e):e instanceof V.a?this.mapSchemaPropertiesDependency(e):e instanceof L.a?this.mapSchemaPropertiesRef(e):{}},PaymentFormStore.prototype.mapSchemaPropertiesField=function(e){var t;return e.validator?((t={})[e.name]=function(e){if(e.validator instanceof He.a){var t=e.validator.predicate;return t instanceof We.a?e.view&&e.control instanceof X.a?{type:"string",pattern:getBeautifiedPattern(t),yearValid:!0,errorMessage:e.validator.message}:e.view&&e.control instanceof Z.a&&!1===e.control.allowsFutureDate?{type:"string",pattern:getBeautifiedPattern(t),notFuture:!0,errorMessage:e.validator.message}:{type:"string",pattern:getBeautifiedPattern(t),errorMessage:e.validator.message}:t instanceof ze.a?{type:"string",allOf:handleAndOrPredicate(t),errorMessage:e.validator.message}:t instanceof Qe.a?{type:"string",anyOf:handleAndOrPredicate(t),errorMessage:e.validator.message}:null}}(e),t):{}},PaymentFormStore.prototype.mapSchemaPropertiesDependency=function(e){return this.dependencyVisible.get(e.id)?this.schemaProperties(e.elements):{}},PaymentFormStore.prototype.mapSchemaPropertiesRef=function(e){return this.refContent.has(e.id)?this.schemaProperties(this.refContent.get(e.id).elements):{}},PaymentFormStore.prototype.fillValuesMap=function(e){null!=e&&0!==e.length&&e.forEach(this.mapFillValuesMap,this)},PaymentFormStore.prototype.fillValuesMapWithReset=function(e){null!=e&&0!==e.length&&e.forEach(this.mapFillValuesMapReset,this)},PaymentFormStore.prototype.mapFillValuesMap=function(e){e instanceof D.a&&this.mapFillValuesMapField(e),e instanceof V.a&&this.mapFillValuesMapDependency(e),e instanceof L.a&&this.mapFillValuesMapRef(e)},PaymentFormStore.prototype.mapFillValuesMapReset=function(e){e instanceof D.a&&this.mapFillValuesMapFieldReset(e),e instanceof V.a&&this.mapFillValuesMapDependencyReset(e),e instanceof L.a&&this.mapFillValuesMapRefReset(e)},PaymentFormStore.prototype.mapFillValuesMapField=function(e){this.isListSetting(e)?this.valuesMap.set(e.name,this.valuesMap.get(e.name)||e.value||e.view.widget.choices[0].value.toString()):e.value?this.valuesMap.set(e.name,e.value):this.valuesMap.set(e.name,this.valuesMap.get(e.name)||e.value)},PaymentFormStore.prototype.mapFillValuesMapFieldReset=function(e){this.isListSetting(e)?this.valuesMap.set(e.name,e.value||e.view.widget.choices[0].value.toString()):this.valuesMap.set(e.name,e.value)},PaymentFormStore.prototype.isListSetting=function(e){return!!e.view&&!!e.view.widget&&e.view.widget instanceof ee.a&&0<e.view.widget.choices.length},PaymentFormStore.prototype.mapFillValuesMapDependency=function(e){this.isDependencyVisible(e)&&this.fillValuesMap(e.elements)},PaymentFormStore.prototype.mapFillValuesMapDependencyReset=function(e){this.isDependencyVisible(e)&&this.fillValuesMapWithReset(e.elements)},PaymentFormStore.prototype.mapFillValuesMapRef=function(t){this.refs.every(function(e){return e.id!==t.id})&&this.refs.push(t),this.refContent.has(t.id)&&this.fillValuesMap(this.refContent.get(t.id).elements)},PaymentFormStore.prototype.mapFillValuesMapRefReset=function(t){this.refs.every(function(e){return e.id!==t.id})&&this.refs.push(t),this.refContent.has(t.id)&&this.fillValuesMapWithReset(this.refContent.get(t.id).elements)},PaymentFormStore.prototype.cleanUpValuesMap=function(e){var r=this;e&&e.forEach(function(e){if(e instanceof D.a){var t=e;r.valuesMap.delete(t.name)}e instanceof V.a&&r.cleanUpValuesMap(e.elements),e instanceof L.a&&r.refContent.has(e.id)&&r.cleanUpValuesMap(r.refContent.get(e.id).elements)})},PaymentFormStore.prototype.updateValuesMap=function(e){var t=this.getDependency(e.name);if(t&&e.newValue!==e.oldValue&&!1!==e.newValue)switch(this.dependencyUpdatedOnload){case!0:this.fillValuesMap(t.elements),this.dependencyUpdatedOnload=!1;break;default:this.fillValuesMapWithReset(t.elements)}},PaymentFormStore.prototype.updateDependencyVisibility=function(e){var t=this;void 0===e&&(e=!1),e&&(this.dependencyUpdatedOnload=!0);var r=m.observable.map({},{deep:!1});this.allDependencies.forEach(function(e){return r.set(e.id,t.isDependencyVisible(e))}),this.dependencyVisible.merge(r)},PaymentFormStore.prototype.isDependencyVisible=function(e){return this.isDependencyVisibleMatch(e.condition)},PaymentFormStore.prototype.isDependencyVisibleMatch=function(e){return e instanceof me.a?this.isDependencyVisibleByPredicate(this.valuesMap.get(e.field),e.predicate):e instanceof ue.a?this.isDependencyVisibleByValidity(e.field):e instanceof de.a?this.isDependencyVisibleByAnd(e.conditions):void 0},PaymentFormStore.prototype.isDependencyVisibleByAnd=function(e){var t=this;return e.every(function(e){return t.isDependencyVisibleMatch(e)})},PaymentFormStore.prototype.isDependencyVisibleByPredicate=function(e,t){return t.pattern.test(null==e?"":e.toString())},PaymentFormStore.prototype.isDependencyVisibleByValidity=function(e){return!this.errors.get(e)},PaymentFormStore.prototype.getDependency=function(e){return this.findDependency(this.elements,e)},PaymentFormStore.prototype.findDependency=function(e,t){if(e)return this.allDependencies.find(function(e){return e.id===t})},Object.defineProperty(PaymentFormStore.prototype,"allDependencies",{get:function(){var e=[];return this.getPartDependenciesRecursively(this.elements,e),e},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.getPartDependenciesRecursively=function(e,r){var o=this;return e.forEach(function(e){if(e instanceof V.a&&(r.push(e),e.elements&&o.getPartDependenciesRecursively(e.elements,r)),e instanceof L.a){var t=o.refContent.get(e.id);t&&t.elements&&o.getPartDependenciesRecursively(t.elements,r)}}),r},Object.defineProperty(PaymentFormStore.prototype,"userFilledFields",{get:function(){var t=this;if(this.repeatingPayment){var e=this.repeatingAccountExtra;return[{title:e.title,value:e.value}]}return this.getViewedElements(this.elements).map(function(e){return{title:e.title,value:t.getValueForFieldView(e)}})},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.getValueForFieldView=function(e){var t=e.view.widget,r=this.valuesMap.get(e.name);switch(!0){case t instanceof K.a:case t instanceof X.a:case t instanceof Z.a:case t instanceof te.a:return e.sensitiveData?this.getMaskedValue(r):r;case t instanceof J.a:return t.choices.find(function(e){return e.value===r}).title;case t instanceof ee.a:return t.choices.find(function(e){return e.value===r}).title}},PaymentFormStore.prototype.getMaskedValue=function(e){var t=e.split("");return[].concat(t.slice(0,4),t.slice(4,-4).map(function(e){return e.replace(/\S/,"*")}),t.slice(-4)).slice(0,t.length).join("")},PaymentFormStore.prototype.getViewedElements=function(e){var t=this,r=[];return e&&e.forEach(function(e){switch(!0){case e instanceof D.a:r=r.concat(t.getViewedField(e)||[]);break;case e instanceof V.a:r=r.concat(t.getViewedDependencyFields(e));break;case e instanceof L.a:r=r.concat(t.getViewedRefFields(e))}}),r},PaymentFormStore.prototype.getViewedField=function(e){return e.view?e.view instanceof te.a||e.view instanceof re.a?null:e:null},PaymentFormStore.prototype.getViewedDependencyFields=function(e){return this.isDependencyVisible(e)?this.getViewedElements(e.elements):[]},PaymentFormStore.prototype.getViewedRefFields=function(e){var t=this.refContent.get(e.id);return t&&t.elements?this.getViewedElements(t.elements):[]},PaymentFormStore.prototype.ifRefContentVisible=function(e){var r=this;return!!e.elements&&e.elements.some(function(e){if(e instanceof D.a)return!!e.view;if(e instanceof V.a){var t=e;if(r.isDependencyVisible(t))return r.ifRefContentVisible(t.content)}})},PaymentFormStore.prototype.updateTerms=function(){var e=this,t=this.findTermedContents(this.form?this.form.content:null).pop();this.terms=t&&t.terms?t.terms:null,this.walletTerms=t&&t.walletTerms?t.walletTerms:this.form&&this.form.walletTerms?this.form.walletTerms:null,this.setInitialSum(),clearTimeout(this.delayUpdateSources),this.delayUpdateSources=setTimeout(function(){return e.updateSources()},0)},PaymentFormStore.prototype.findTermedContents=function(e){var t=this,r=[];return null==e?r:(null!==e.terms&&void 0!==e.terms&&r.push(e),null===e.elements||void 0===e.elements||0===e.elements.length||e.elements.forEach(function(e){e instanceof L.a&&t.findTermedContentsRef(e).forEach(function(e){return r.push(e)}),e instanceof V.a&&t.isDependencyVisible(e)&&t.findTermedContentsDependency(e).forEach(function(e){return r.push(e)})}),r)},PaymentFormStore.prototype.findTermedContentsDependency=function(e){return this.isDependencyVisible(e)?this.findTermedContents(e.content):[]},PaymentFormStore.prototype.findTermedContentsRef=function(e){return this.refContent.has(e.id)?this.findTermedContents(this.refContent.get(e.id)):[]},PaymentFormStore.prototype.updateSources=function(){var t=this;return this.terms?this.terms.id===this.lastTermsId?Promise.resolve():(this.lastTermsId=this.terms.id,this.loadingSource=!0,this.sinapService.getSources(this.terms.id).then(function(e){return t.updateSourcesSuccess(e)}).catch(function(e){return t.updateSourcesError(e)})):Promise.resolve()},PaymentFormStore.prototype.updateSourcesSuccess=function(e){this.sources=e,this.user.authorized&&(this.isPaymentModeCard&&0<this.sourcesCard.length?(this.selectedSourceGroup=ce.a.CARD,this.selectedSource=this.sourcesCard[0],this.selectedSource instanceof xe.a&&this.makeCardDisabled()):this.isPaymentModePhone&&this.sourceMobile?(this.selectedSourceGroup=ce.a.MOBILE,this.selectedSource=this.sourceMobile):this.isPaymentModeTerminal?this.selectedSourceGroup=ce.a.TERMINAL:0<this.sourcesWallet.length?(this.selectedSourceGroup=ce.a.WALLET,this.selectedSource=this.defaultWallet):0<this.sourcesCard.length?(this.selectedSourceGroup=ce.a.CARD,this.selectedSource=this.sourcesCard[0],this.selectedSource instanceof xe.a&&this.makeCardDisabled()):this.sourceMobile?(this.selectedSourceGroup=ce.a.MOBILE,this.selectedSource=this.sourceMobile):this.selectedSourceGroup=ce.a.TERMINAL),this.loadingSource=!1,!this.user.authorized&&0<this.sources.items.length&&(this.pageTimeOn=new Date)},PaymentFormStore.prototype.updateSourcesError=function(e){this.lastTermsId=null,this.sources=null,this.selectedSourceGroup=null,this.selectedSource=null,this.loadingSource=!1},PaymentFormStore.prototype.loadComplexCommission=function(){return s.__awaiter(this,void 0,void 0,function(){var t,r,o,n,i;return s.__generator(this,function(e){switch(e.label){case 0:if(this.complexCommission=null,!this.terms||!this.terms.isComplexCommission)return[2];if(this.amount<=0)return[2];if(null==(t=this.createPaymentMethodFromSource(this.selectedSource)))return[2];if(null==(r=this.valuesMap.get("account"))||""===r)return[2];if((t instanceof Ce.a||t instanceof Oe.a)&&0<this.paymentCardStore.errors.size)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),o=new Ue(r,t,new qe(new T.a(this.amount,this.currency))),this.complexCommissionLoading=!0,[4,this.sinapService.onlineCommission(this.terms.id,o)];case 2:return n=e.sent(),this.loadComplexCommissionSuccess(n),[3,4];case 3:return i=e.sent(),this.loadComplexCommissionError(i),[3,4];case 4:return[2]}})})},PaymentFormStore.prototype.loadComplexCommissionSuccess=function(e){this.complexCommission=e,this.complexCommissionLoading=!1},PaymentFormStore.prototype.loadComplexCommissionError=function(e){throw this.complexCommission=null,this.complexCommissionLoading=!1,e},Object.defineProperty(PaymentFormStore.prototype,"isPaymentModeCard",{get:function(){return this.router.search.paymentModeType===we.a.CARD},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isPaymentModePhone",{get:function(){var e=this.router.search.paymentModeType;return e===we.a.PHONE||e===we.a.MEGAFON},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isPaymentModeTerminal",{get:function(){return this.router.search.paymentModeType===we.a.TERMINAL},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sourcesWallet",{get:function(){return this.greeting?this.rubWallet?[this.rubWallet]:[]:this.sources.items.filter(function(e){return e instanceof Te.a})},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"rubWallet",{get:function(){return this.sources?this.sources.items.find(function(e){return e instanceof Te.a&&e.balance&&e.balance.currency.equals(new k.a(643))}):null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sourcesCard",{get:function(){return this.sources.items.filter(function(e){return e instanceof Re.a||e instanceof xe.a})},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"sourceMobile",{get:function(){return this.sources.items.find(function(e){return e instanceof Ve.a})},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.handleRefRequesting=function(t){var r=this;if(0!==this.refs.length){var e=this.refs.filter(function(e){return e.params.some(function(e){return e.field===t.name})}).filter(function(e){return r.refError.delete(e.id),r.refContent.delete(e.id),null!==r.getRequestPayload(e)}).filter(function(e){return r.isRefVisible(e.id)});clearTimeout(this.delayedRefRequesting),this.delayedRefRequesting=setTimeout(function(){e.forEach(function(e){return r.loadRef(e)})},500)}},PaymentFormStore.prototype.handleRefsChange=function(t){if(t.newValue){var e=this.refs.find(function(e){return e.id===t.name});this.getRequestPayload(e)&&(this.refError.delete(e.id),this.refContent.delete(e.id),this.loadRef(e))}},PaymentFormStore.prototype.isRefVisible=function(e){return!!this.findRef(this.elements,e)},PaymentFormStore.prototype.findRef=function(e,t){var r=this;return e.find(function(e){return e instanceof L.a?r.findRefAtRef(e,t):e instanceof V.a?r.findRefAtDependency(e,t):void 0})},PaymentFormStore.prototype.findRefAtRef=function(e,t){return e.id===t||!!this.refContent.has(e.id)&&this.findRef(this.refContent.get(e.id).elements,t)},PaymentFormStore.prototype.findRefAtDependency=function(e,t){return!!e.hasElements&&(!!this.isDependencyVisible(e)&&this.findRef(e.elements,t))},PaymentFormStore.prototype.isRefButton=function(e){return!this.refContent.has(e.id)||null===this.getRequestPayload(e)},PaymentFormStore.prototype.isRefError=function(e){return this.refError.has(e.id)&&null!==this.getRequestPayload(e)},PaymentFormStore.prototype.onAmountFocus=function(){this.amountBlur=!1},PaymentFormStore.prototype.onFieldFocus=function(e){this.errorsVisibleFields.set(e,!1)},PaymentFormStore.prototype.onFieldBlur=function(e){this.errorsVisibleFields.set(e,!0)},PaymentFormStore.prototype.onDiscreteChange=function(e,t){this.valuesMap.set(t.name,e)},PaymentFormStore.prototype.updateErrorOnDependencyChange=function(){var r=this;this.valuesMap.forEach(function(e,t){void 0===e&&r.errorsVisibleFields.set(t,!1)})},PaymentFormStore.prototype.checkTransaction=function(){var t=this;return this.checkTransactionLoading=!0,this.checkTransactionAttempts=this.checkTransactionAttempts+1,this.historyService.getItem(this.transaction).then(function(e){return t.checkTransactionSuccess(e)}).catch(function(e){return t.checkTransactionError(e)})},PaymentFormStore.prototype.checkTransactionSuccess=function(e){var t=this;this.checkTransactionLoading=e.statusWaiting,this.checkTransactionResult=e,this.checkTransactionLoading&&(this.delayCheckTransaction=setTimeout(function(){return t.checkTransaction()},5e3))},PaymentFormStore.prototype.checkTransactionError=function(e){var t=this;this.checkTransactionLoading=!1,this.checkTransactionResult=e,this.checkTransactionAttempts<12?this.delayCheckTransaction=setTimeout(function(){return t.checkTransaction()},5e3):this.errorStore.show("Не удалось получить статус платежа, проверьте платеж в истории.","Ошибка",e.code,[{text:"Проверить платеж",href:"/history"},{text:"Вернуться на главную",href:"/"}])},PaymentFormStore.prototype.loadPostPaidBanner=function(){var t=this;this.asyncPostPaidBanners().then(function(e){return t.loadPostPaidBannerSuccess(e)}).catch(function(e){return t.loadPostPaidBannerError(e)})},PaymentFormStore.prototype.loadPostPaidBannerSuccess=function(e){this.postPaidBanners=e,this.postPaidBanners.bind("Affix").toConstantValue(!1),this.postPaidBanners.bind(i.Config).toConstantValue({source:mt.BannerSource.POSTPAID,place:mt.BannerPlace.PROMO,transaction:this.transaction,filter:Object(mt.filterPlaceBanners)(mt.BannerPlace.PROMO),fallback:[]}),this.postPaidBannersError=void 0},PaymentFormStore.prototype.loadPostPaidBannerError=function(e){this.postPaidBannersError||(this.postPaidBanners=void 0,this.postPaidBannersError=e,this.loadPostPaidBanner())},PaymentFormStore.prototype.loadPostIdentification=function(){var t=this,e=this.checkTransactionResult;e.statusSuccess&&this.sinapService.getIdentification(e.provider.id.toString(),e.source.id.toString()).then(function(e){return t.loadPostIdentificationSuccess(e)}).catch(function(e){return t.loadPostIdentificationError(e)})},PaymentFormStore.prototype.loadPostIdentificationSuccess=function(e){this.identificationFlow=rt.a.POST,this.postIdentification=e},PaymentFormStore.prototype.loadPostIdentificationError=function(e){this.postIdentification=null},Object.defineProperty(PaymentFormStore.prototype,"mobileConfirmation",{get:function(){return this.selectedSource instanceof Ve.a&&this.submitPaymentResult&&this.paymentTransactionState instanceof pe.a},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isConfirmation",{get:function(){return this.paymentTransactionState instanceof fe.a||this.paymentTransactionState instanceof ye.a},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"pushConfirmation",{get:function(){return this.resendConfirmation?this.resendConfirmation instanceof Se.a:this.paymentTransactionState instanceof ye.a},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"timerStartsAt",{get:function(){return this.pushConfirmation?53:113},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"acquiringConfirmation",{get:function(){return this.paymentTransactionState instanceof he.a},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"preIdentificationLoading",{get:function(){return this.identificationStatus===ae.LOADING||this.identificationStatus===ae.NOT_REQUIRED},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationStepForm",{get:function(){return!this.identificationVerified&&!this.identificationSubmitted&&!this.identificationConfirmed},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationStepConfirm",{get:function(){return(!this.identificationVerified||this.identificationFlow===rt.a.POST)&&this.identificationSubmitted&&!this.identificationConfirmed},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationStepFail",{get:function(){return!this.identificationVerified&&this.identificationSubmitted&&this.identificationConfirmed&&this.identificationFailed},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationStepSuccess",{get:function(){return(!this.identificationVerified||this.identificationFlow===rt.a.POST)&&this.identificationSubmitted&&this.identificationConfirmed&&!this.identificationFailed},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"identificationStep",{get:function(){return this.identificationStepForm?et.a.FORM:this.identificationStepConfirm?et.a.CONFIRM:this.identificationStepFail?et.a.FAIL:this.identificationStepSuccess?et.a.SUCCESS:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"step",{get:function(){if(!this.loading.get()&&!this.provider.hasPaymentForm)return se.a.INFO;if(null!==this.identificationStatus&&this.user.authorized){if(this.preIdentificationLoading)return se.a.IDENTIFICATION_LOADING;if(this.identificationStatus===ae.REQUIRED_FULL)return se.a.IDENTIFICATION_REQUIRED;if(this.identificationStatus===ae.REQUIRED_VERIFIED&&!this.identificationVerified)return se.a.IDENTIFICATION_FORM}if(this.mobileConfirmation)return se.a.RESULT_MOBILE;if(this.checkTransactionResult instanceof y.d){if(this.checkTransactionResult.statusSuccess)return se.a.RESULT_SUCCESS;if(this.checkTransactionResult.statusError)return se.a.RESULT_ERROR;if(this.checkTransactionResult.statusWaiting)return se.a.WAITING_QUEUE}return this.submitConfirmationResult instanceof Q.a?se.a.WAITING_INITIAL:this.submitConfirmationResult instanceof w.a?se.a.RESULT_ERROR:this.checkTransactionResult instanceof w.a?se.a.RESULT_ERROR:this.acquiringConfirmation?se.a.CONFIRMATION_ACQUIRING:this.paymentCheck?se.a.CONFIRMATION_SMS:se.a.FORM},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"postIdentificationRequired",{get:function(){return this.user.authorized&&this.postIdentification&&"Required"===this.postIdentification.status},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"offerAvailable",{get:function(){return this.user.authorized&&(this.selectedSourceGroup===ce.a.CARD||this.selectedSourceGroup===ce.a.WALLET&&this.scheduleAvailable)||!this.user.authorized&&this.naMode===le.CARD},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"scheduleAvailable",{get:function(){return this.providerService.isScheduleAvailable(this.provider)&&this.selectedSourceGroup===ce.a.WALLET},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"favoriteAvailable",{get:function(){return this.providerService.isFavoriteAvailable(this.provider)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"resultFavoriteAvailable",{get:function(){var e=this.checkTransactionResult;return e&&e.features.favoritePaymentEnabled&&this.terms&&e.provider.id.toString()===this.terms.id},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.fillFormByRequest=function(){this.fillValuesByUrlData(),this.fillValuesByPostData(),this.fillIncomingSum(),this.requestStore.clear()},PaymentFormStore.prototype.handleLoading=function(){window.prerenderReady=this.loading.get()},PaymentFormStore.prototype.setScheduled=function(e){this.scheduled=e},PaymentFormStore.prototype.setFavoriteTitle=function(e){this.favoriteTitle.set(e)},PaymentFormStore.prototype.setFavoriteSchedule=function(e){this.favoriteSchedule.set(e)},PaymentFormStore.prototype.onFavoriteFocus=function(e){this.favoriteBlur.set(e,!1)},PaymentFormStore.prototype.onFavoriteBlur=function(e){this.favoriteBlur.set(e,!0)},Object.defineProperty(PaymentFormStore.prototype,"scheduledAwaitingSmsConfirmation",{get:function(){return this.scheduledCreated&&this.createFavoriteResult.status===lt.a.AWAITING_SMS_CONFIRMATION},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"scheduledAwaitingTransactionPayed",{get:function(){return this.scheduledCreated&&this.createFavoriteResult.status===lt.a.AWAITING_TRANSACTION_PAYED},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"scheduledActive",{get:function(){return this.scheduledCreated&&this.createFavoriteResult.status===lt.a.ACTIVE},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"scheduledCreated",{get:function(){return this.scheduled&&this.createFavoriteResult instanceof ct.a?this.createFavoriteResult:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"scheduledSuccess",{get:function(){return this.scheduledActive||this.scheduledAwaitingTransactionPayed},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"scheduledError",{get:function(){return this.scheduled&&this.createFavoriteResult instanceof w.a?this.createFavoriteResult:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"maskedEmail",{get:function(){return this.emailValue?Object(b.e)(this.emailValue):null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"emailExtra",{get:function(){return this.checkTransactionResult instanceof y.d&&this.checkTransactionResult.serviceExtras.unauth_cheque_email||null},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.setEmailValue=function(e){this.emailValue=e},PaymentFormStore.prototype.onFocusEmail=function(){this.emailError=!1},PaymentFormStore.prototype.onBlurEmail=function(){Object(b.d)(this.emailValue)||(this.emailError=!0)},PaymentFormStore.prototype.gotoManageVouchers=function(){this.router.goto("/transfer/eggs/list.action","_blank")},PaymentFormStore.prototype.changeNAMode=function(e){e!==this.naMode&&(this.naMode=e)},PaymentFormStore.prototype.handleAuthClosing=function(e){this.user.authorized||e||this.naMode!==le.WALLET||(this.naMode=le.CARD)},PaymentFormStore.prototype.handleUserAuthChange=function(e){this.backup(e),this.clearSources(),this.clearUrlSearch(),this.clearAppRequest(e)},PaymentFormStore.prototype.clearSources=function(){this.naMode=null,this.selectedSource=null},PaymentFormStore.prototype.clearUrlSearch=function(){!this.user.authorized&&this.router.location.search&&(this.router.replace("/payment/form/"+this.id),this.hardReset())},PaymentFormStore.prototype.clearAppRequest=function(e){e&&this.requestStore.clear()},PaymentFormStore.prototype.selectNASource=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:switch(t){case le.WALLET:return[3,1];case le.CARD:return[3,5]}return[3,5];case 1:return e.trys.push([1,3,,4]),[4,this.loadAuth()];case 2:return e.sent(),this.authStore.showSignIn(),this.selectedSource=null,[3,4];case 3:return e.sent(),this.selectedSource=null,[3,4];case 4:return[3,6];case 5:return this.selectedSource=this.sourcesCard[0],[3,6];case 6:return[2]}})})},PaymentFormStore.prototype.checkGreeting=function(e){this.greeting=e},PaymentFormStore.prototype.handleShowGreetings=function(e){e?e&&!this.greetingCards&&this.loadGreeting():this.shownAllGreetings=void 0},PaymentFormStore.prototype.handleSourceChangeByGreeting=function(e){e&&(this.selectedSource=this.rubWallet)},PaymentFormStore.prototype.handleCurrencyChangeByGreeting=function(e){e&&(this.sum=new T.a(this.sum.amount,new k.a(643)))},PaymentFormStore.prototype.loadGreeting=function(){var t=this;this.greetingCardsLoading=!0,this.greetingError=void 0,this.greetingCardsService.getCards().then(function(e){return t.loadGreetingSuccess(e)}).catch(function(e){return t.loadGreetingError(e)})},PaymentFormStore.prototype.loadGreetingSuccess=function(e){this.greetingCardsLoading=!1,this.greetingCards=e,this.chosenGreetingCard=e[0]},PaymentFormStore.prototype.loadGreetingError=function(e){this.greetingCardsLoading=!1,this.greetingError=e,this.greeting=void 0,this.greetingCards=void 0},PaymentFormStore.prototype.showAllGreetings=function(){this.shownAllGreetings=!0},PaymentFormStore.prototype.chooseGreetingCard=function(e){this.chosenGreetingCard=e},Object.defineProperty(PaymentFormStore.prototype,"greetingCardAvailable",{get:function(){return this.user.authorized&&this.greeting&&this.selectedSourceGroup===ce.a.WALLET&&void 0!==this.chosenGreetingCard},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"greetingCardsView",{get:function(){return this.greetingCards?this.shownAllGreetings?this.greetingCards:this.greetingCards.slice(0,6):[]},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.showSaveGreetingCard=function(e){if((this.shownSaveGreeting=e)&&!this.greetingCardPreview)return this.getGreetingCardPreview()},PaymentFormStore.prototype.getGreetingCardPreview=function(){var t=this;return this.greetingCardPreviewLoading=!0,this.greetingCardsService.getCardImage(this.transaction).then(function(e){return t.getGreetingCardPreviewSuccess(e)}).catch(function(e){return t.getGreetingCardPreviewError(e)})},PaymentFormStore.prototype.getGreetingCardPreviewSuccess=function(e){this.greetingCard=e,this.greetingCardPreview=URL.createObjectURL(e),this.greetingCardPreviewLoading=!1},PaymentFormStore.prototype.getGreetingCardPreviewError=function(e){this.greetingCardPreviewLoading=!1,this.errorStore.show(e.message,"Ошибка загрузки открытки","",[{href:"/history",text:"Посмотреть открытку в Истории"},{href:"/main",text:"Вернуться на главную"}])},PaymentFormStore.prototype.downloadGreetingCard=function(){Object(h.saveAs)(this.greetingCard,"postcard.png")},PaymentFormStore.prototype.clearGreetingByOuterSource=function(e){(e instanceof Ve.a||e instanceof Re.a||e instanceof xe.a)&&(this.greeting=void 0)},PaymentFormStore.prototype.clearGreetingByTerminal=function(e){e===ce.a.TERMINAL&&(this.greeting=void 0)},PaymentFormStore.prototype.onGreetingCommentBlur=function(e){this.greetingCommentBlur=e},Object.defineProperty(PaymentFormStore.prototype,"isValidGreetingComment",{get:function(){return!this.greeting||this.comment.get().length<141},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.printedCommission=function(e,t){if(void 0===t&&(t=!1),null==e)return null;if(this.complexCommission&&!t)return null;var r=[];return 0<e.decimalRate&&r.push(e.decimalRate+"%"),0<e.fixed&&(r.length&&r.push("+"),r.push(f.b.sum(e.fixed,this.limitCurrency.symbol))),e.min&&(r.length&&r.push(","),r.push("не менее"),r.push(f.b.sum(e.min,this.limitCurrency.symbol))),e.max&&(r.length&&r.push(","),r.push("не более"),r.push(f.b.sum(e.max,this.limitCurrency.symbol))),0===r.length?null:r.join(" ")},PaymentFormStore.prototype.fillValuesByUrlData=function(){var r=this,o=this.router.search;0!==Object.keys(o).length&&(o.extra&&Object.keys(o.extra).forEach(function(e){var t=e.slice(1,-1);"comment"===t?(r.comment.set(o.extra[e]),o.blocked&&o.blocked.includes("comment")&&(r.isExternalComment=!0)):"greeting"===t&&"true"===o.extra[e]&&99===r.id?(r.greeting=!0,o.blocked&&o.blocked.includes("greeting")&&(r.isExternalGreeting=!0)):(r.valuesMap.set(t,o.extra[e]),o.blocked&&o.blocked.includes(t)&&r.externalFields.push(t))}),o.comment&&(this.comment.set(o.comment),o.blocked&&o.blocked.includes("comment")&&(this.isExternalComment=!0)))},PaymentFormStore.prototype.fillValuesByPostData=function(){var r=this,o=this.requestStore.body;Object.keys(o).forEach(function(t){if("comment"===t)r.comment.set(o[t]);else if("extra"===t.slice(0,5)){var e=t.slice(7,-2);"comment"===e?r.comment.set(o[t]):"greeting"===e&&"true"===o[t]&&99===r.id?r.greeting=!0:r.valuesMap.set(e,o[t])}else"blocked"===t&&o[t].forEach(function(e){"comment"===e?r.isExternalComment=!0:"greeting"===e?r.isExternalGreeting=!0:r.externalFields.push(t)})})},PaymentFormStore.prototype.fillIncomingSum=function(){if(this.terms&&!this.sumFixed){var e=this.requestStore.body,t=this.router.search,r=NaN,o=null,n=!1;if(e.amountInteger||e.amountFraction||e.currency){var i=parseInt(e.amountInteger,10),a=parseInt(e.amountFraction,10);isNaN(i)||isNaN(a)||(r=Object(f.f)(i,Object(f.a)(a,100)));try{o=e.currency?new k.a(e.currency):this.terms.limits[0].currency}catch(e){o=null}e.blocked&&e.blocked.includes("sum")&&(n=!0)}else if(t.amountInteger||t.amountFraction||t.currency){i=parseInt(t.amountInteger,10),a=parseInt(t.amountFraction,10);isNaN(i)||isNaN(a)||(r=Object(f.f)(i,Object(f.a)(a,100)));try{o=t.currency?new k.a(t.currency):this.terms.limits[0].currency}catch(e){o=null}t.blocked&&t.blocked.includes("sum")&&(n=!0)}var s=this.terms&&o?this.terms.getCurrencyLimit(o):null;s&&(this.sum=new T.a(r,s.currency),n&&(this.isExternalSum=!0))}},PaymentFormStore.prototype.getStatus=function(){var t=this;if(void 0!==this.limits&&this.user.valid&&void 0!==this.user.identification[R.a.QIWI]&&void 0!==this.user.identificationLevel[R.a.QIWI])return this.limits.find(function(e){return e.bank===R.a.QIWI}).statuses.find(function(e){return e.type===t.user.identificationLevel[R.a.QIWI]&&(e.expiredPassport===t.user.identification[R.a.QIWI].passportExpired||void 0===e.expiredPassport)})},PaymentFormStore.prototype.showCheque=function(e){this.router.open("/payment/cheque/"+e.txnId+"/"+y.h[e.type],"_blank")},PaymentFormStore.prototype.showSendCheque=function(e){this.sendingItem=e,this.loadSendCheque()},PaymentFormStore.prototype.loadSendCheque=function(){var t=this;this.asyncSendCheque().then(function(e){return t.loadSendChequeSuccess(e)}).catch(function(e){return t.loadSendChequeError(e)})},PaymentFormStore.prototype.loadSendChequeSuccess=function(e){this.sendCheque=e,this.sendCheque.get(i.Store).setItem(this.sendingItem),this.sendChequeError=void 0},PaymentFormStore.prototype.loadSendChequeError=function(e){this.sendChequeError||(this.sendCheque=void 0,this.sendChequeError=e,this.loadSendCheque())},PaymentFormStore.prototype.loadSuggestions=function(e){var t=this;this.sinapService.getSuggestions(e.suggestionSource,new oe(this.valuesMap.get(e.name))).then(function(e){return t.loadSuggestionSuccess(e.result)}).catch(function(e){return t.loadSuggestionsError(e)})},PaymentFormStore.prototype.loadSuggestionSuccess=function(e){this.suggestionsError=void 0,this.suggestions=e},PaymentFormStore.prototype.loadSuggestionsError=function(e){this.suggestionsError=e,this.suggestions=[]},PaymentFormStore.prototype.onSelectSuggestion=function(e,t){this.setValues(e.name,t.value),t.isFinal?this.valuesMap.merge(t.compoundValue):this.loadSuggestions(e)},PaymentFormStore.prototype.onChangeSuggestion=function(e,t){var r=this;this.setValues(e.name,t),clearTimeout(this.delayValueChange),this.delayValueChange=setTimeout(function(){return r.loadSuggestions(e)},666)},Object.defineProperty(PaymentFormStore.prototype,"isPaymentLimits",{get:function(){return 0<this.paymentLimits.size},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"matchedPaymentTurnoverLimit",{get:function(){return this.isPaymentLimits&&this.selectedSource?this.getLimitByType(dt.b.TURNOVER):null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"matchedPaymentBalanceLimit",{get:function(){return this.isPaymentLimits&&this.selectedSource&&(this.selectedSource instanceof Ve.a||this.selectedSource instanceof Re.a||this.selectedSource instanceof xe.a)?this.getLimitByType(dt.b.REFILL):null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"matchedPaymentProviderLimit",{get:function(){return this.isPaymentLimits&&this.selectedSource?this.getLimitByType(dt.b.PROVIDER):null},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.getLimitByType=function(t){var r=this.currency,e=Array.from(this.paymentLimits.entries()).find(function(e){var t=e[0];e[1];return t.equals(r)});return e?e[1].find(function(e){return e.type===t}):null},Object.defineProperty(PaymentFormStore.prototype,"isPaymentTurnoverLimitApplied",{get:function(){var e=this.matchedPaymentTurnoverLimit,t=this.totalSum;return e&&t&&e.rest<t.amount},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isPaymentBalanceLimitApplied",{get:function(){if([27290,20175].includes(this.id))return!1;if(99===this.id&&"+"+this.user.id===this.valuesMap.get("account"))return!1;var e=this.matchedPaymentBalanceLimit,t=this.totalSum;return e&&t&&e.rest<t.amount},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isPaymentProviderLimitApplied",{get:function(){var e=this.matchedPaymentProviderLimit,t=this.totalSum;return e&&t&&e.rest<t.amount},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isPaymentLimitApplied",{get:function(){return(!this.complexCommission||!this.converting)&&(this.isPaymentTurnoverLimitApplied||this.isPaymentBalanceLimitApplied||this.isPaymentProviderLimitApplied)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"limitApplied",{get:function(){var e=[this.matchedPaymentTurnoverLimit,this.matchedPaymentBalanceLimit,this.matchedPaymentProviderLimit].filter(function(e){return!!e});return 0===e.length?null:(e.sort(function(e,t){return e.rest-t.rest}),e[0])},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"limitAppliedMessage",{get:function(){return this.limitApplied?this.limitApplied.message:null},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"isLimitAppliedDescription",{get:function(){return this.limitApplied&&!!this.limitApplied.description&&(!!this.limitApplied.description.title||!!this.limitApplied.description.content)},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentFormStore.prototype,"limitAppliedDescription",{get:function(){return this.limitApplied?this.limitApplied.description:null},enumerable:!0,configurable:!0}),PaymentFormStore.prototype.showLimitsDetails=function(){this.limitsDetailsVisible=!0},PaymentFormStore.prototype.closeLimitsDetails=function(){this.limitsDetailsVisible=!1},s.__decorate([Object(u.inject)(i.Context)],PaymentFormStore.prototype,"context",void 0),s.__decorate([Object(u.inject)(S.a)],PaymentFormStore.prototype,"sinapService",void 0),s.__decorate([Object(u.inject)(E.a)],PaymentFormStore.prototype,"identificationService",void 0),s.__decorate([Object(u.inject)(g.a)],PaymentFormStore.prototype,"historyService",void 0),s.__decorate([Object(u.inject)(v.a)],PaymentFormStore.prototype,"providerService",void 0),s.__decorate([Object(u.inject)(_.a)],PaymentFormStore.prototype,"favoriteService",void 0),s.__decorate([Object(u.inject)(F.a)],PaymentFormStore.prototype,"greetingCardsService",void 0),s.__decorate([Object(u.inject)(P.c)],PaymentFormStore.prototype,"limitsService",void 0),s.__decorate([Object(u.inject)(i.Router)],PaymentFormStore.prototype,"router",void 0),s.__decorate([Object(u.inject)(C.a)],PaymentFormStore.prototype,"cookieStore",void 0),s.__decorate([Object(u.inject)(O.a)],PaymentFormStore.prototype,"requestStore",void 0),s.__decorate([Object(u.inject)(I.a)],PaymentFormStore.prototype,"errorStore",void 0),s.__decorate([Object(u.inject)(j.a)],PaymentFormStore.prototype,"paymentCardStore",void 0),s.__decorate([Object(u.inject)(i.User)],PaymentFormStore.prototype,"user",void 0),s.__decorate([Object(u.inject)(i.Auth)],PaymentFormStore.prototype,"asyncAuth",void 0),s.__decorate([Object(u.inject)(b.a)],PaymentFormStore.prototype,"validator",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"auth",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"authError",void 0),s.__decorate([a.serializable],PaymentFormStore.prototype,"id",void 0),s.__decorate([a.serializable],PaymentFormStore.prototype,"provider",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"confirmation",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"transaction",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"paymentCheck",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"sum",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.object)(A.a))],PaymentFormStore.prototype,"sources",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.object)(B.a))],PaymentFormStore.prototype,"terms",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"walletTerms",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"selectedSource",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"selectedSourceGroup",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"linkingCard",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationStatus",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"loading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"providerNotFound",void 0),s.__decorate([m.observable,a.serializable],PaymentFormStore.prototype,"loadingSource",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.object)(x.a))],PaymentFormStore.prototype,"form",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.list)(Object(a.object)(N.a)))],PaymentFormStore.prototype,"crossRates",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"limits",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"sms",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"smsRemain",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"smsErrors",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationDelay",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"submitPaymentLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"submitPaymentResult",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"submitConfirmationLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"submitConfirmationResult",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"checkTransactionLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"checkTransactionResult",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"checkTransactionAttempts",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"cardDetails",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"cardDetailsError",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"resendSmsLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"resendConfirmation",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"amountBlur",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"postIdentification",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"complexCommission",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"complexCommissionLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"refs",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.map)(Object(a.object)(M.a)))],PaymentFormStore.prototype,"refContent",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.map)(Object(a.primitive)()))],PaymentFormStore.prototype,"refError",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.map)(Object(a.primitive)()))],PaymentFormStore.prototype,"refLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"refMounted",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.map)(Object(a.primitive)()))],PaymentFormStore.prototype,"valuesMap",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.map)(Object(a.primitive)()))],PaymentFormStore.prototype,"dependencyVisible",void 0),s.__decorate([m.observable,Object(a.serializable)(Object(a.map)(Object(a.primitive)()))],PaymentFormStore.prototype,"identificationValuesMap",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"loadingIdentification",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"manualIdentification",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationNeedCheck",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationSubmitted",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationConfirmed",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationFailed",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationFlow",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"successIdentificationDelay",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"identificationDocsTab",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"errorsVisibleFields",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"repeatingPayment",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"repeatingTransaction",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"favoritePayment",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"comment",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"scheduled",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"favoriteTitle",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"favoriteSchedule",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"favoriteBlur",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"createFavoriteResult",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"createFavoriteLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"naMode",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"chequeEmailSending",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"emailSent",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"emailValue",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"emailError",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"greeting",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"greetingCardsLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"greetingError",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"shownAllGreetings",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"greetingCards",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"chosenGreetingCard",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"shownSaveGreeting",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"greetingCardPreviewLoading",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"greetingCommentBlur",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"suggestions",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"suggestionsError",void 0),s.__decorate([Object(u.inject)("PostPaidBanners")],PaymentFormStore.prototype,"asyncPostPaidBanners",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"postPaidBanners",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"postPaidBannersError",void 0),s.__decorate([Object(u.inject)("SendCheque")],PaymentFormStore.prototype,"asyncSendCheque",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"sendCheque",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"sendChequeError",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"sendingItem",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"paymentLimits",void 0),s.__decorate([m.observable],PaymentFormStore.prototype,"limitsDetailsVisible",void 0),s.__decorate([m.computed],PaymentFormStore.prototype,"authStore",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadAuth",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadAuthSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadAuthError",null),s.__decorate([m.action],PaymentFormStore.prototype,"backup",null),s.__decorate([m.action],PaymentFormStore.prototype,"recover",null),s.__decorate([Object(u.postConstruct)(),m.action],PaymentFormStore.prototype,"init",null),s.__decorate([m.action],PaymentFormStore.prototype,"load",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadProvider",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadProviderSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadProviderError",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkIdentification",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkIdentificationSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkIdentificationError",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitIdentification",null),s.__decorate([m.action],PaymentFormStore.prototype,"identificationSubmitSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"confirmIdentification",null),s.__decorate([m.action],PaymentFormStore.prototype,"identificationConfirmSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPreIdentification",null),s.__decorate([m.action],PaymentFormStore.prototype,"confirmPreIdentification",null),s.__decorate([m.action],PaymentFormStore.prototype,"preIdentificationSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"setIdentificationError",null),s.__decorate([m.action],PaymentFormStore.prototype,"setIdentificationValues",null),s.__decorate([m.action],PaymentFormStore.prototype,"setManualIdentification",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identification",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationDataErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationDocsErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationVisibleDataErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationVisibleDocsErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"allIdentificationFieldsErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationVerified",null),s.__decorate([m.action],PaymentFormStore.prototype,"setIdentificationDocsTab",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadLimits",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadLimitsSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadForm",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadFormSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadFormError",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadTransaction",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadTransactionSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadTransactionError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"repeatingAccountExtra",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPayment",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPaymentSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPaymentError",null),s.__decorate([m.action],PaymentFormStore.prototype,"sendChequeEmail",null),s.__decorate([m.action],PaymentFormStore.prototype,"sendChequeEmailSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"sendChequeEmailError",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleStep",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleDependenciesChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleRefContentChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleValuesChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"setAmount",null),s.__decorate([m.computed],PaymentFormStore.prototype,"amount",null),s.__decorate([m.computed],PaymentFormStore.prototype,"currency",null),s.__decorate([m.action],PaymentFormStore.prototype,"setComment",null),s.__decorate([m.computed],PaymentFormStore.prototype,"commentAvailable",null),s.__decorate([m.action],PaymentFormStore.prototype,"setValues",null),s.__decorate([m.action],PaymentFormStore.prototype,"setIdentificationValue",null),s.__decorate([m.action],PaymentFormStore.prototype,"setCurrency",null),s.__decorate([m.action],PaymentFormStore.prototype,"changeSmsValue",null),s.__decorate([m.action],PaymentFormStore.prototype,"changeSelectedSourceCard",null),s.__decorate([m.action],PaymentFormStore.prototype,"makeCardDisabled",null),s.__decorate([m.action],PaymentFormStore.prototype,"changeCardLinking",null),s.__decorate([m.action],PaymentFormStore.prototype,"changeSelectedSourceWallet",null),s.__decorate([m.action],PaymentFormStore.prototype,"changeSelectedSourceGroup",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleSumChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"delayedSumChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleCardPanChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleValidThruCvvChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadCardDetails",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadCardDetailsSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadCardDetailsFailure",null),s.__decorate([m.action],PaymentFormStore.prototype,"resetSelectedSourceByTab",null),s.__decorate([m.computed],PaymentFormStore.prototype,"defaultWallet",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPayment",null),s.__decorate([m.action],PaymentFormStore.prototype,"editPayment",null),s.__decorate([m.action],PaymentFormStore.prototype,"confirmPayment",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPaymentSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPaymentError",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPaymentErrorCheck",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPaymentErrorGoToIndexPage",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPaymentErrorGoToIdentificationForm",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitPaymentErrorGoToBlock",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitSms",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitSmsSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitSmsError",null),s.__decorate([m.action],PaymentFormStore.prototype,"goToMain",null),s.__decorate([m.action],PaymentFormStore.prototype,"goToIdentification",null),s.__decorate([m.action],PaymentFormStore.prototype,"retrySchedule",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadFavorite",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadFavoriteSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadFavoriteError",null),s.__decorate([m.action],PaymentFormStore.prototype,"createFavorite",null),s.__decorate([m.action],PaymentFormStore.prototype,"createFavoriteSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"createFavoriteError",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitFavoriteSms",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitFavoriteSmsSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitFavoriteSmsError",null),s.__decorate([m.action],PaymentFormStore.prototype,"resendFavoriteSms",null),s.__decorate([m.action],PaymentFormStore.prototype,"resendFavoriteSmsSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"resendFavoriteSmsFailure",null),s.__decorate([m.action],PaymentFormStore.prototype,"resetIdentificationStep",null),s.__decorate([m.action],PaymentFormStore.prototype,"retry",null),s.__decorate([m.action],PaymentFormStore.prototype,"saveFavoritePayment",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitConfirmation",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitConfirmationSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"submitConfirmationError",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkRef",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadRef",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadRefSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadRefError",null),s.__decorate([m.action],PaymentFormStore.prototype,"replenishWallet",null),s.__decorate([m.action],PaymentFormStore.prototype,"goBack",null),s.__decorate([m.computed],PaymentFormStore.prototype,"total",null),s.__decorate([m.computed],PaymentFormStore.prototype,"unauthWalletTotal",null),s.__decorate([m.computed],PaymentFormStore.prototype,"commissionForInfo",null),s.__decorate([m.computed],PaymentFormStore.prototype,"additionalCommissionForInfo",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isNotEnoughMoney",null),s.__decorate([m.computed],PaymentFormStore.prototype,"converting",null),s.__decorate([m.computed],PaymentFormStore.prototype,"convertedCurrencyAmount",null),s.__decorate([m.computed],PaymentFormStore.prototype,"rate",null),s.__decorate([m.computed],PaymentFormStore.prototype,"limit",null),s.__decorate([m.computed],PaymentFormStore.prototype,"minAmount",null),s.__decorate([m.computed],PaymentFormStore.prototype,"maxAmount",null),s.__decorate([m.computed],PaymentFormStore.prototype,"integerLimit",null),s.__decorate([m.computed],PaymentFormStore.prototype,"limitCurrency",null),s.__decorate([m.computed],PaymentFormStore.prototype,"commission",null),s.__decorate([m.computed],PaymentFormStore.prototype,"unauthWalletCommission",null),s.__decorate([m.computed],PaymentFormStore.prototype,"commissionSum",null),s.__decorate([m.computed],PaymentFormStore.prototype,"amountSum",null),s.__decorate([m.computed],PaymentFormStore.prototype,"totalSum",null),s.__decorate([m.computed],PaymentFormStore.prototype,"totalSumView",null),s.__decorate([m.computed],PaymentFormStore.prototype,"unauthWalletTotalSum",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sourceTerms",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sourceCommission",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sourceCommissionCancelsPrimary",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sourceCurrency",null),s.__decorate([m.computed],PaymentFormStore.prototype,"amountView",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sumFixed",null),s.__decorate([m.computed],PaymentFormStore.prototype,"currencies",null),s.__decorate([m.computed],PaymentFormStore.prototype,"currencyOptions",null),s.__decorate([m.computed],PaymentFormStore.prototype,"currencyForMulticurrencyAmount",null),s.__decorate([m.computed],PaymentFormStore.prototype,"deadline",null),s.__decorate([m.computed],PaymentFormStore.prototype,"elements",null),s.__decorate([m.computed],PaymentFormStore.prototype,"flatElements",null),s.__decorate([m.computed],PaymentFormStore.prototype,"values",null),s.__decorate([m.computed],PaymentFormStore.prototype,"error",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"blockedError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"errors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"visibleErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"firstVisibleError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"firstSumError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"schema",null),s.__decorate([m.computed],PaymentFormStore.prototype,"formErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isFormValid",null),s.__decorate([m.computed],PaymentFormStore.prototype,"refErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isValidSum",null),s.__decorate([m.computed],PaymentFormStore.prototype,"favoritePaymentRequest",null),s.__decorate([m.computed],PaymentFormStore.prototype,"favoriteErrors",null),s.__decorate([m.computed],PaymentFormStore.prototype,"favoriteVisibleErrors",null),s.__decorate([m.action],PaymentFormStore.prototype,"resendSmsCountdown",null),s.__decorate([m.action],PaymentFormStore.prototype,"resendSms",null),s.__decorate([m.action],PaymentFormStore.prototype,"resendSmsSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"resendSmsFailure",null),s.__decorate([m.action],PaymentFormStore.prototype,"fillValuesMap",null),s.__decorate([m.action],PaymentFormStore.prototype,"fillValuesMapWithReset",null),s.__decorate([m.action],PaymentFormStore.prototype,"cleanUpValuesMap",null),s.__decorate([m.action],PaymentFormStore.prototype,"updateValuesMap",null),s.__decorate([m.action],PaymentFormStore.prototype,"getDependency",null),s.__decorate([m.computed],PaymentFormStore.prototype,"allDependencies",null),s.__decorate([m.computed],PaymentFormStore.prototype,"userFilledFields",null),s.__decorate([m.action],PaymentFormStore.prototype,"ifRefContentVisible",null),s.__decorate([m.action],PaymentFormStore.prototype,"updateTerms",null),s.__decorate([m.action],PaymentFormStore.prototype,"findTermedContents",null),s.__decorate([m.action],PaymentFormStore.prototype,"updateSources",null),s.__decorate([m.action],PaymentFormStore.prototype,"updateSourcesSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"updateSourcesError",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadComplexCommission",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadComplexCommissionSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadComplexCommissionError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentModeCard",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentModePhone",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentModeTerminal",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sourcesWallet",null),s.__decorate([m.computed],PaymentFormStore.prototype,"rubWallet",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sourcesCard",null),s.__decorate([m.computed],PaymentFormStore.prototype,"sourceMobile",null),s.__decorate([m.action],PaymentFormStore.prototype,"onAmountFocus",null),s.__decorate([m.action],PaymentFormStore.prototype,"onFieldFocus",null),s.__decorate([m.action],PaymentFormStore.prototype,"onFieldBlur",null),s.__decorate([m.action],PaymentFormStore.prototype,"onDiscreteChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"updateErrorOnDependencyChange",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkTransaction",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkTransactionSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkTransactionError",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPostPaidBanner",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPostPaidBannerSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPostPaidBannerError",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPostIdentification",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPostIdentificationSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadPostIdentificationError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"mobileConfirmation",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isConfirmation",null),s.__decorate([m.computed],PaymentFormStore.prototype,"pushConfirmation",null),s.__decorate([m.computed],PaymentFormStore.prototype,"timerStartsAt",null),s.__decorate([m.computed],PaymentFormStore.prototype,"acquiringConfirmation",null),s.__decorate([m.computed],PaymentFormStore.prototype,"preIdentificationLoading",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationStepForm",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationStepConfirm",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationStepFail",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationStepSuccess",null),s.__decorate([m.computed],PaymentFormStore.prototype,"identificationStep",null),s.__decorate([m.computed],PaymentFormStore.prototype,"step",null),s.__decorate([m.computed],PaymentFormStore.prototype,"postIdentificationRequired",null),s.__decorate([m.computed],PaymentFormStore.prototype,"offerAvailable",null),s.__decorate([m.computed],PaymentFormStore.prototype,"scheduleAvailable",null),s.__decorate([m.computed],PaymentFormStore.prototype,"favoriteAvailable",null),s.__decorate([m.computed],PaymentFormStore.prototype,"resultFavoriteAvailable",null),s.__decorate([m.action],PaymentFormStore.prototype,"fillFormByRequest",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleLoading",null),s.__decorate([m.action],PaymentFormStore.prototype,"setScheduled",null),s.__decorate([m.action],PaymentFormStore.prototype,"setFavoriteTitle",null),s.__decorate([m.action],PaymentFormStore.prototype,"setFavoriteSchedule",null),s.__decorate([m.action],PaymentFormStore.prototype,"onFavoriteFocus",null),s.__decorate([m.action],PaymentFormStore.prototype,"onFavoriteBlur",null),s.__decorate([m.computed],PaymentFormStore.prototype,"scheduledAwaitingSmsConfirmation",null),s.__decorate([m.computed],PaymentFormStore.prototype,"scheduledAwaitingTransactionPayed",null),s.__decorate([m.computed],PaymentFormStore.prototype,"scheduledActive",null),s.__decorate([m.computed],PaymentFormStore.prototype,"scheduledCreated",null),s.__decorate([m.computed],PaymentFormStore.prototype,"scheduledSuccess",null),s.__decorate([m.computed],PaymentFormStore.prototype,"scheduledError",null),s.__decorate([m.computed],PaymentFormStore.prototype,"maskedEmail",null),s.__decorate([m.computed],PaymentFormStore.prototype,"emailExtra",null),s.__decorate([m.action],PaymentFormStore.prototype,"setEmailValue",null),s.__decorate([m.action],PaymentFormStore.prototype,"onFocusEmail",null),s.__decorate([m.action],PaymentFormStore.prototype,"onBlurEmail",null),s.__decorate([m.action],PaymentFormStore.prototype,"gotoManageVouchers",null),s.__decorate([m.action],PaymentFormStore.prototype,"changeNAMode",null),s.__decorate([m.action],PaymentFormStore.prototype,"checkGreeting",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleShowGreetings",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleSourceChangeByGreeting",null),s.__decorate([m.action],PaymentFormStore.prototype,"handleCurrencyChangeByGreeting",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadGreeting",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadGreetingSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadGreetingError",null),s.__decorate([m.action],PaymentFormStore.prototype,"showAllGreetings",null),s.__decorate([m.action],PaymentFormStore.prototype,"chooseGreetingCard",null),s.__decorate([m.computed],PaymentFormStore.prototype,"greetingCardAvailable",null),s.__decorate([m.computed],PaymentFormStore.prototype,"greetingCardsView",null),s.__decorate([m.action],PaymentFormStore.prototype,"showSaveGreetingCard",null),s.__decorate([m.action],PaymentFormStore.prototype,"getGreetingCardPreview",null),s.__decorate([m.action],PaymentFormStore.prototype,"getGreetingCardPreviewSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"getGreetingCardPreviewError",null),s.__decorate([m.action],PaymentFormStore.prototype,"downloadGreetingCard",null),s.__decorate([m.action],PaymentFormStore.prototype,"clearGreetingByOuterSource",null),s.__decorate([m.action],PaymentFormStore.prototype,"clearGreetingByTerminal",null),s.__decorate([m.action],PaymentFormStore.prototype,"onGreetingCommentBlur",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isValidGreetingComment",null),s.__decorate([m.action],PaymentFormStore.prototype,"showCheque",null),s.__decorate([m.action],PaymentFormStore.prototype,"showSendCheque",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadSendCheque",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadSendChequeSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadSendChequeError",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadSuggestions",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadSuggestionSuccess",null),s.__decorate([m.action],PaymentFormStore.prototype,"loadSuggestionsError",null),s.__decorate([m.action],PaymentFormStore.prototype,"onSelectSuggestion",null),s.__decorate([m.action],PaymentFormStore.prototype,"onChangeSuggestion",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentLimits",null),s.__decorate([m.computed],PaymentFormStore.prototype,"matchedPaymentTurnoverLimit",null),s.__decorate([m.computed],PaymentFormStore.prototype,"matchedPaymentBalanceLimit",null),s.__decorate([m.computed],PaymentFormStore.prototype,"matchedPaymentProviderLimit",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentTurnoverLimitApplied",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentBalanceLimitApplied",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentProviderLimitApplied",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isPaymentLimitApplied",null),s.__decorate([m.computed],PaymentFormStore.prototype,"limitApplied",null),s.__decorate([m.computed],PaymentFormStore.prototype,"limitAppliedMessage",null),s.__decorate([m.computed],PaymentFormStore.prototype,"isLimitAppliedDescription",null),s.__decorate([m.computed],PaymentFormStore.prototype,"limitAppliedDescription",null),s.__decorate([m.action],PaymentFormStore.prototype,"showLimitsDetails",null),s.__decorate([m.action],PaymentFormStore.prototype,"closeLimitsDetails",null),PaymentFormStore=r=s.__decorate([Object(u.injectable)()],PaymentFormStore)}(),bt=r(0),St=r.n(bt),gt=r(18),vt=r(20),_t=r(12),Et=r(4),Ft=r(2),Pt=r(6),Ct={self:{padding:[45,45,50],margin:[0,0,20,0],color:Ft.r.mutedTextColor,border:[1,"solid",Object(Pt.rgba)(Ft.r.baseColor,.06)],borderRadius:12}},Ot=function(e){function Info(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Info,e),Info.prototype.render=function(){var e=this.props.classes;return this.store.provider&&this.store.provider.description||this.store.deadline?bt.createElement("div",{className:e.self},this.store.provider||this.store.provider.description?bt.createElement(_t.ad,{size:Et.ib.TEXT_SMALL,bold:!0},Object(Et.nb)(this.store.provider.description,{a:_t.ye,p:_t.Vc})):null,this.store.deadline?bt.createElement(_t.ad,{size:Et.ib.TEXT_SMALL,bold:!0},this.store.deadline):null):null},s.__decorate([Object(vt.resolve)(i.Store)],Info.prototype,"store",void 0),Info=s.__decorate([Object(Et.rb)(Ct),gt.observer],Info)}(Et.bb),It={self:{position:"relative",paddingLeft:60,height:"auto"},title:{marginLeft:24},longname:{fontSize:14,marginLeft:24,lineHeight:1.8,color:Object(Pt.rgba)(Ft.r.baseColor,.6)},logo:{position:"absolute",top:-5,left:-5,display:"inline-block",width:60,height:60,textAlign:"center",fontSize:0,$before:{content:'""',display:"inline-block",height:"100%",verticalAlign:"middle"}},image:{display:"inline-block",maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle"}},jt=function(e){function Provider(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Provider,e),Provider.prototype.render=function(){var e=this.props.classes;if(!this.store.provider)return null;var t=this.store.provider.hasPaymentForm?"Оплата "+this.store.provider.shortName:this.store.provider.shortName,r=this.store.provider.hasPaymentForm?"Оплатить "+this.store.provider.shortName+" банковской картой или со счета QIWI Кошелек":this.store.provider.shortName;return bt.createElement(_t.w,{noBottom:this.store.provider.hasPaymentForm},bt.createElement(_t.Md,null,bt.createElement("div",{className:e.self},bt.createElement("div",{className:e.logo},this.store.provider.logoUrl?bt.createElement("img",{className:e.image,alt:r,title:t,src:this.store.provider.logoUrl}):bt.createElement("div",{className:e.image},bt.createElement(_t.pd,null))),bt.createElement("div",{className:e.title},bt.createElement(_t.ob,{tag:"h1"},this.store.provider.shortName)),bt.createElement("div",{className:e.longname},this.store.provider.longName)),this.store.provider.hasPaymentForm||null===this.store.provider.description?null:bt.createElement(_t.Bc,{source:this.store.provider.description})))},s.__decorate([Object(vt.resolve)(i.Store)],Provider.prototype,"store",void 0),Provider=s.__decorate([Object(Et.rb)(It),gt.observer],Provider)}(Et.bb),wt=function(e){function IdentificationLoading(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationLoading,e),IdentificationLoading.prototype.render=function(){return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"},bt.createElement(_t.n,null)),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{centered:!0},bt.createElement(_t.Hd,null,bt.createElement(_t.rc,null),this.store.identificationStatus===ae.LOADING?bt.createElement(_t.oc,null,"Получение статуса идентификации"):bt.createElement(_t.oc,null,"Статус идентификации",bt.createElement("br",null),"позволяет совершить платеж"))))),bt.createElement(_t.pb,{width:"4"},bt.createElement(Ot,null)))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationLoading.prototype,"store",void 0),IdentificationLoading=s.__decorate([gt.observer],IdentificationLoading)}(bt.Component),Tt=function(e){function IdentificationRequired(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationRequired,e),IdentificationRequired.prototype.render=function(){var e=this;return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"},bt.createElement(_t.n,null)),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0},bt.createElement(_t.Jd,null,bt.createElement(_t.Fd,null,bt.createElement(_t.h,null,"Для платежа требуется идентификация"),bt.createElement(_t.oc,null,"Для совершения платежа необходимо пройти идентификацию очно в ",bt.createElement(_t.ye,{href:"/settings/identification/full-ru"},"офисе QIWI")," или в ",bt.createElement(_t.ye,{href:"https://interc.ru/map",target:"_blank"},"офисах наших партнеров"),".")),bt.createElement(_t.Fd,null,bt.createElement(_t.h,null,"Какие документы нужны?"),bt.createElement(_t.oc,null,"Для граждан РФ нужен только паспорт гражданина РФ."),bt.createElement(_t.oc,null,"Для граждан Белоруссии нужен национальный паспорт."),bt.createElement(_t.oc,null,"Для иностранных граждан нужен паспорт иностранного гражданина (с нотариально заверенным переводом на русский язык), виза (для прибывших по визе) и один из документов: миграционная карта, разрешение на временное проживание или вид на жительство.")),bt.createElement(_t.Ub,null,bt.createElement(_t.Td,{onClick:function(){return e.router.push("/settings/identification")}},"Подробнее про идентификацию")))))),bt.createElement(_t.pb,{width:"4"},bt.createElement(Ot,null)))},s.__decorate([Object(vt.resolve)(i.Router)],IdentificationRequired.prototype,"router",void 0),s.__decorate([Object(vt.resolve)(i.Store)],IdentificationRequired.prototype,"store",void 0),IdentificationRequired=s.__decorate([gt.observer],IdentificationRequired)}(bt.Component),Rt={self:{textAlign:"center",margin:[122,0]},spinner:{width:29,margin:[36,"auto"]}},xt=function(e){function IdentificationFormWaiting(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormWaiting,e),IdentificationFormWaiting.prototype.render=function(){var e=this.props.classes;return bt.createElement("div",{className:e.self},bt.createElement(_t.gb,null,"Проверяем данные"),bt.createElement("div",{className:e.spinner},bt.createElement(_t.Yd,null)))},IdentificationFormWaiting=s.__decorate([Object(Et.rb)(Rt)],IdentificationFormWaiting)}(Et.bb),At={self:{},warning:{marginBottom:25,position:"relative"},warningIcon:{position:"absolute",left:0,top:0,width:21,height:21},warningText:{paddingLeft:31},description:{marginBottom:24},fieldSet:{display:"flex",flexDirection:"row",flexWrap:"wrap"},fieldSetItem:{width:"50%",overflow:"visible",$firstChild:{paddingRight:20},$notFirstChild:{paddingLeft:10}},passportHint:{color:"#282828",padding:0,fontSize:13,lineHeight:1.31,opacity:1},security:{position:"relative",paddingLeft:34},securityIcon:{position:"absolute",left:0,top:0},securityText:{color:"#282828",padding:0,fontSize:13,lineHeight:1.31,opacity:.7}},Nt=function(e){function IdentificationFormData(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormData,e),IdentificationFormData.prototype.render=function(){var t=this,e=this.props.classes;return bt.createElement(_t.s,{onSubmit:function(){return t.store.submitPreIdentification()}},bt.createElement(_t.h,null,"Укажите свои данные для проведения платежа"),this.store.identificationNeedCheck?bt.createElement("div",{className:e.warning},bt.createElement("div",{className:e.warningIcon},bt.createElement(_t.Le,null)),bt.createElement("div",{className:e.warningText},bt.createElement(_t.oc,null,"Ваши данные не прошли проверку. Проверьте их ещё раз. Если все верно, нажмите «Мои данные верны. Продолжить»."))):bt.createElement("div",{className:e.description},bt.createElement(_t.oc,null,"Предоставление данных необходимо по закону 115-ФЗ. Согласно п. 3 ч. 1 ст. 7 115-ФЗ мы обязаны идентифицировать пользователей.")),this.store.loadingIdentification?bt.createElement(xt,null):bt.createElement(_t.Md,null,bt.createElement(_t.Gd,null,bt.createElement(_t.oe,{value:this.store.identification.lastName,title:"Фамилия",onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("lastName",e)}),onFocus:function(){return t.store.onFieldFocus("lastName")},onBlur:function(){return t.store.onFieldBlur("lastName")},error:this.store.identificationVisibleDataErrors.get("lastName")}),bt.createElement(_t.oe,{value:this.store.identification.firstName,title:"Имя",onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("firstName",e)}),onFocus:function(){return t.store.onFieldFocus("firstName")},onBlur:function(){return t.store.onFieldBlur("firstName")},error:this.store.identificationVisibleDataErrors.get("firstName")}),bt.createElement(_t.oe,{value:this.store.identification.middleName,title:"Отчество",help:"Если есть",onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("middleName",e)}),onFocus:function(){return t.store.onFieldFocus("middleName")},onBlur:function(){return t.store.onFieldBlur("middleName")},error:this.store.identificationVisibleDataErrors.get("middleName")}),bt.createElement("div",{className:e.fieldSet},bt.createElement("div",{className:e.fieldSetItem},bt.createElement(_t.vb,{value:this.store.identification.birthDate,title:"Дата рождения",onChange:function(e){return t.store.setIdentificationValue("birthDate",e)},onFocus:function(){return t.store.onFieldFocus("birthDate")},onBlur:function(){return t.store.onFieldBlur("birthDate")},error:this.store.identificationVisibleDataErrors.get("birthDate")}))),bt.createElement("div",{className:e.fieldSet},bt.createElement("div",{className:e.fieldSetItem},bt.createElement(_t.Dc,{value:this.store.identification.passport,title:"Серия и номер паспорта",mask:Object(Et.qb)("dddd dddddd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("passport",e)}),onFocus:function(){return t.store.onFieldFocus("passport")},onBlur:function(){return t.store.onFieldBlur("passport")},error:this.store.identificationVisibleDataErrors.get("passport")})),bt.createElement("div",{className:e.fieldSetItem},bt.createElement("div",{className:e.passportHint},"Если у вас нет паспорта гражданина РФ, пройдите очную идентификацию в ",bt.createElement(_t.ye,{href:"/settings/identification/full-ru"},"офисе QIWI")," или в ",bt.createElement(_t.ye,{href:"https://interc.ru/map",target:"_blank"},"офисах наших партнеров"),".",bt.createElement("br",null),bt.createElement(_t.ye,{href:"/settings/identification"},"Подробнее об идентификации"),".")))),bt.createElement(_t.Sb,null,bt.createElement(_t.b,null,this.store.identificationNeedCheck?"Мои данные верны. Продолжить":"Пройти упрощенную идентификацию")),bt.createElement("div",{className:e.security},bt.createElement("div",{className:e.securityIcon},bt.createElement(_t.Sd,null)),bt.createElement("div",{className:e.securityText},bt.createElement(_t.Vc,null,"КИВИ Банк (АО) обеспечивает безопасность ваших данных",bt.createElement("br",null),"в соответствии со своей Политикой конфиденциальности")))))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationFormData.prototype,"store",void 0),IdentificationFormData=s.__decorate([Object(Et.rb)(At),gt.observer],IdentificationFormData)}(Et.bb),kt={self:{},tabContent:{display:"flex"},field:{flexGrow:1,padding:[10,15,10,0],paddingLeft:0},actions:{flexShrink:0,padding:[10,0,10,15]},security:{position:"relative",paddingLeft:34},securityIcon:{position:"absolute",left:0,top:0},securityText:{color:"#282828",padding:0,fontSize:13,lineHeight:1.31,opacity:.7}},Dt=function(e){function IdentificationFormDocs(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormDocs,e),IdentificationFormDocs.prototype.render=function(){var t=this;if(this.store.loadingIdentification)return bt.createElement(xt,null);var e=this.props.classes,r=bt.createElement("div",{className:e.actions},bt.createElement(_t.Tb,null,bt.createElement(_t.Hc,{children:"Подтвердить"}),bt.createElement(_t.Lc,{children:"Назад",onClick:function(){return t.store.resetIdentificationStep()}})));return bt.createElement(_t.s,{onSubmit:function(){return t.store.confirmPreIdentification()}},bt.createElement(_t.h,null,"Подтвердите данные"),bt.createElement(_t.Md,null,bt.createElement("div",null,bt.createElement(_t.oc,null,"В соответствии с законодательством РФ, введенные данные нужно подтвердить в государственной базе."),bt.createElement(_t.oc,null,"Для этого укажите номер одного из этих документов: ИНН, полис ОМС или СНИЛС.")),bt.createElement(_t.F,{selected:this.store.identificationDocsTab,onChange:function(e){return t.store.setIdentificationDocsTab(e)},items:[{title:"ИНН",content:bt.createElement("div",{className:e.tabContent},bt.createElement("div",{className:e.field},bt.createElement(_t.Dc,{value:this.store.identification.inn,title:"ИНН",mask:Object(Et.qb)("dddddddddddd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("inn",e)}),onFocus:function(){return t.store.onFieldFocus("inn")},onBlur:function(){return t.store.onFieldBlur("inn")},error:this.store.identificationVisibleDocsErrors.get("inn")})),r)},{title:"СНИЛС",content:bt.createElement("div",{className:e.tabContent},bt.createElement("div",{className:e.field},bt.createElement(_t.Dc,{value:this.store.identification.snils,title:"СНИЛС",mask:Object(Et.qb)("ddd-ddd-ddd dd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("snils",e)}),onFocus:function(){return t.store.onFieldFocus("snils")},onBlur:function(){return t.store.onFieldBlur("snils")},error:this.store.identificationVisibleDocsErrors.get("snils")})),r)},{title:"Полис ОМС",content:bt.createElement("div",{className:e.tabContent},bt.createElement("div",{className:e.field},bt.createElement(_t.Dc,{value:this.store.identification.oms,title:"Полис ОМС",mask:Object(Et.qb)("dddd dddd dddd dddd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("oms",e)}),onFocus:function(){return t.store.onFieldFocus("oms")},onBlur:function(){return t.store.onFieldBlur("oms")},error:this.store.identificationVisibleDocsErrors.get("oms")})),r)}]}),bt.createElement("div",{className:e.security},bt.createElement("div",{className:e.securityIcon},bt.createElement(_t.Sd,null)),bt.createElement("div",{className:e.securityText},bt.createElement(_t.Vc,null,"КИВИ Банк (АО) обеспечивает безопасность ваших данных",bt.createElement("br",null),"в соответствии со своей Политикой конфиденциальности")))))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationFormDocs.prototype,"store",void 0),IdentificationFormDocs=s.__decorate([Object(Et.rb)(kt),gt.observer],IdentificationFormDocs)}(Et.bb),Lt={self:{margin:[39,0,79]},icon:{width:104,margin:[0,"auto",36]},text:{textAlign:"center"}},Vt=function(e){function IdentificationFormSuccess(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormSuccess,e),IdentificationFormSuccess.prototype.render=function(){var e=this.props.classes;return bt.createElement("div",{className:e.self},bt.createElement("div",{className:e.icon},bt.createElement(_t.de,null)),bt.createElement("div",{className:e.text},bt.createElement(_t.h,null,"Данные верны.",bt.createElement("br",null),"Можно совершить платеж")))},IdentificationFormSuccess=s.__decorate([Object(Et.rb)(Lt)],IdentificationFormSuccess)}(Et.bb),Mt=function(e){function IdentificationFormFail(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormFail,e),IdentificationFormFail.prototype.render=function(){var e=this;return bt.createElement(_t.Gd,null,bt.createElement(_t.h,null,"Не удалось проверить ваши данные"),bt.createElement(_t.Jd,null,bt.createElement(_t.oc,null,"Внимательно проверьте введенные реквизиты документов и попробуйте пройти идентификацию ещё раз."),bt.createElement(_t.oc,null,"Если вы уверены, что ввели все правильно, оставьте заявку в нашей ",bt.createElement(_t.ye,{href:"/support.action"},"службе поддержки"),"."),bt.createElement(_t.Ub,null,bt.createElement(_t.C,{children:"Попробовать еще раз",onClick:function(){return e.store.resetIdentificationStep()}}))))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationFormFail.prototype,"store",void 0),IdentificationFormFail}(bt.Component),Bt=(($e={})[et.a.FORM]=Nt,$e[et.a.CONFIRM]=Dt,$e[et.a.SUCCESS]=Vt,$e[et.a.FAIL]=Mt,$e),Gt=function(e){function IdentificationForm(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationForm,e),IdentificationForm.prototype.render=function(){var e=Bt[this.store.identificationStep];return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"},bt.createElement(_t.n,null)),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0},this.store.loadingIdentification?bt.createElement(_t.Yd,null):bt.createElement(e,null)))),bt.createElement(_t.pb,{width:"4"},bt.createElement(Ot,null)))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationForm.prototype,"store",void 0),IdentificationForm=s.__decorate([gt.observer],IdentificationForm)}(bt.Component),qt=r(14),Ut=r(118),Wt=r(1413),zt=function(e){function DateControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(DateControl,e),DateControl.prototype.modifyFormat=function(e){if(e)return e.split(".").reverse().join("-")},DateControl.prototype.setDateValue=function(e,t){t?this.store.setValues(e,Object(p.format)(t,"DD.MM.YYYY")):this.store.setValues(e,null)},DateControl.prototype.getDate=function(e){var t=this.store.valuesMap.get(e),r=Object(p.parse)(this.modifyFormat(t));return Object(p.isValid)(r)?r:null},DateControl.prototype.render=function(){var t=this,e=this.props,r=e.field,o=e.error;return bt.createElement(_t.vb,{value:this.getDate(r.name),title:r.title,disabled:this.store.externalFields.includes(r.name),onChange:function(e){return t.setDateValue(r.name,e)},onFocus:function(){return t.store.onFieldFocus(r.name)},onBlur:function(){return t.store.onFieldBlur(r.name)},error:o,help:r.view.hint,hint:r.view.info?bt.createElement(_t.rd,{size:_t.Qb.ACCENT,position:_t.Pb.BOTTOM},bt.createElement(_t.Bc,{source:r.view.info,type:Et.eb.HINT})):null})},s.__decorate([Object(vt.resolve)(i.Store)],DateControl.prototype,"store",void 0),DateControl=s.__decorate([gt.observer],DateControl)}(bt.Component),Qt=function(e){function ExpiryDateControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ExpiryDateControl,e),ExpiryDateControl.prototype.render=function(){var t=this,e=this.props,r=e.field,o=e.error;return bt.createElement(_t.Dc,{title:r.title,value:this.store.valuesMap.get(r.name),disabled:this.store.externalFields.includes(r.name),mask:Object(Et.qb)("dd/dd"),pipe:b.g,error:o,onChange:Object(Et.kb)(function(e){return t.store.setValues(r.name,e.replace("/",""))}),onFocus:function(){return t.store.onFieldFocus(r.name)},onBlur:function(){return t.store.onFieldBlur(r.name)},help:r.view.hint,hint:r.view.info?bt.createElement(_t.rd,{size:_t.Qb.ACCENT,position:_t.Pb.BOTTOM},bt.createElement(_t.Bc,{source:r.view.info,type:Et.eb.HINT})):null})},s.__decorate([Object(vt.resolve)(i.Store)],ExpiryDateControl.prototype,"store",void 0),ExpiryDateControl=s.__decorate([gt.observer],ExpiryDateControl)}(bt.Component),Ht={self:{margin:[25,0],lineHeight:1.3},title:{color:Ft.r.mutedTextColor},value:{fontWeight:500}},$t=function(e){function InfoControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(InfoControl,e),InfoControl.prototype.render=function(){var e=this.props,t=e.classes,r=e.field;return bt.createElement("div",{className:t.self},r.value&&r.view.title?bt.createElement("div",{className:t.title},r.view.title):null,bt.createElement("div",{className:t.value},r.value||r.view.title))},InfoControl=s.__decorate([Object(Et.rb)(Ht),gt.observer],InfoControl)}(Et.bb),Yt=function(e){function ListControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ListControl,e),ListControl.prototype.render=function(){var t=this,r=this.props.field,e=r.control;return 0===e.choices.length?null:bt.createElement(_t.Nd,{title:r.title,options:e.choices.map(function(e){return{label:e.title,value:e.value,disabled:!1}}),value:this.store.valuesMap.get(r.name),disabled:this.store.externalFields.includes(r.name),help:r.view.hint,onChange:function(e){return t.store.onDiscreteChange(e,r)}})},s.__decorate([Object(vt.resolve)(i.Store)],ListControl.prototype,"store",void 0),ListControl=s.__decorate([gt.observer],ListControl)}(bt.Component),Jt=function(e){function RadioControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(RadioControl,e),RadioControl.prototype.render=function(){var t=this,e=this.props,r=e.field,o=e.error,n=r.control;return bt.createElement(_t.td,{title:r.title,value:this.store.valuesMap.get(r.name),options:n.choices.map(function(e){return{value:e.value,label:e.title,description:null,disabled:t.store.externalFields.includes(r.name)}}),error:o,onChange:function(e){return t.store.onDiscreteChange(e,r)},help:r.view.hint,hint:r.view.info?bt.createElement(_t.rd,{size:_t.Qb.ACCENT,position:_t.Pb.BOTTOM},bt.createElement(_t.Bc,{source:r.view.info,type:Et.eb.HINT})):null})},s.__decorate([Object(vt.resolve)(i.Store)],RadioControl.prototype,"store",void 0),RadioControl=s.__decorate([gt.observer],RadioControl)}(bt.Component),Kt=function(e){function SwitchControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(SwitchControl,e),SwitchControl.prototype.render=function(){var t=this,r=this.props.field,o=r.control;return bt.createElement(_t.ge,{label:r.title,checked:this.store.valuesMap.get(r.name)===o.onValue,description:r.view.hint,onChange:function(e){return t.store.onDiscreteChange(e?o.onValue:o.offValue,r)},disabled:this.store.externalFields.includes(r.name)})},s.__decorate([Object(vt.resolve)(i.Store)],SwitchControl.prototype,"store",void 0),SwitchControl=s.__decorate([gt.observer],SwitchControl)}(bt.Component),Xt={RadioControlModel:Jt,TextControlModel:function(e){function TextControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(TextControl,e),TextControl.prototype.componentDidMount=function(){var e=this.props.field;if(e.control.mask&&!this.store.repeatingPayment){var t=Object(Et.pb)(void 0===this.value||null===this.value?this.mask:this.value,Object(Et.qb)(this.mask,!this.strip));this.store.valuesMap.set(e.name,this.strip?Object(Et.sb)(t,this.mask):t)}},Object.defineProperty(TextControl.prototype,"strip",{get:function(){return this.props.field.control.stripStaticSymbols},enumerable:!0,configurable:!0}),Object.defineProperty(TextControl.prototype,"value",{get:function(){return this.store.valuesMap.get(this.props.field.name)},enumerable:!0,configurable:!0}),Object.defineProperty(TextControl.prototype,"mask",{get:function(){return this.props.field.control.mask.replace("?","")},enumerable:!0,configurable:!0}),Object.defineProperty(TextControl.prototype,"computedValue",{get:function(){return Object(Et.pb)(void 0===this.value||null===this.value||this.strip&&""===this.value?this.mask:this.value,Object(Et.qb)(this.mask,!this.strip))},enumerable:!0,configurable:!0}),TextControl.prototype.render=function(){var t=this,e=this.props,r=e.field,o=e.error;return r.control.mask&&!this.store.repeatingPayment?bt.createElement(_t.Dc,{title:r.title,value:this.computedValue,mask:Object(Et.qb)(this.mask),error:o,onChange:Object(Et.kb)(function(e){return t.store.setValues(r.name,t.strip?Object(Et.sb)(e,t.mask):e)}),onFocus:function(){return t.store.onFieldFocus(r.name)},onBlur:function(){return t.store.onFieldBlur(r.name)},disabled:this.store.externalFields.includes(r.name),help:r.view.hint,hint:r.view.info?bt.createElement(_t.rd,{size:_t.Qb.NORMAL},bt.createElement(_t.Bc,{source:r.view.info,type:Et.eb.HINT})):null}):bt.createElement(_t.oe,{title:r.title,value:this.value,error:o,onChange:Object(Et.kb)(function(e){return t.store.setValues(r.name,e)}),onFocus:function(){return t.store.onFieldFocus(r.name)},onBlur:function(){return t.store.onFieldBlur(r.name)},disabled:this.store.externalFields.includes(r.name),help:r.view.hint,hint:r.view.info?bt.createElement(_t.rd,{size:_t.Qb.ACCENT,position:_t.Pb.BOTTOM},bt.createElement(_t.Bc,{source:r.view.info,type:Et.eb.HINT})):null})},s.__decorate([Object(vt.resolve)(i.Store)],TextControl.prototype,"store",void 0),TextControl=s.__decorate([gt.observer],TextControl)}(bt.Component),SwitchControlModel:Kt,DateControlModel:zt,ExpiryDateControlModel:Qt,ListControlModel:Yt,InfoControlModel:$t,SuggestionControlModel:function(e){function SuggestionControl(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(SuggestionControl,e),Object.defineProperty(SuggestionControl.prototype,"value",{get:function(){return this.store.valuesMap.get(this.props.field.name)},enumerable:!0,configurable:!0}),SuggestionControl.prototype.render=function(){var t=this,e=this.props,r=e.field,o=e.error;return bt.createElement(_t.fe,{title:r.title,value:this.value,error:o,onChange:function(e){return t.store.onChangeSuggestion(r,e)},onSelect:function(e){return t.store.onSelectSuggestion(r,e)},onFocus:function(){return t.store.onFieldFocus(r.name)},onBlur:function(){return t.store.onFieldBlur(r.name)},disabled:this.store.externalFields.includes(r.name),help:r.view.hint,hint:r.view.info?bt.createElement(_t.rd,{size:_t.Qb.ACCENT,position:_t.Pb.BOTTOM},bt.createElement(_t.Bc,{source:r.view.info,type:Et.eb.HINT})):null,options:this.store.suggestions?this.store.suggestions.map(function(e){return{label:e.value,value:e,disabled:!1}}):[]})},s.__decorate([Object(vt.resolve)(i.Store)],SuggestionControl.prototype,"store",void 0),SuggestionControl=s.__decorate([gt.observer],SuggestionControl)}(bt.Component)},Zt={RadioControlModel:J.a,TextControlModel:K.a,SwitchControlModel:re.a,DateControlModel:Z.a,ExpiryDateControlModel:X.a,ListControlModel:ee.a,InfoControlModel:te.a,SuggestionControlModel:Wt.a},er=function(e){function Control(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Control,e),Control.prototype.render=function(){var e=this.props,t=e.field,r=e.error;if(!t)return null;var o=Xt[Object.keys(Zt).find(function(e){return t.control instanceof Zt[e]})];return o?bt.createElement(o,{field:t,error:r}):null},Control=s.__decorate([gt.observer],Control)}(bt.Component),tr={self:s.__assign({position:"relative"},Object(Ft.g)(15))},rr=function(e){function Field(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Field,e),Field.prototype.componentWillReact=function(){var e=this.props.element;e&&e.control&&this.store.firstVisibleError===e.name&&Object(Ut.a)(Object(qt.findDOMNode)(this))},Field.prototype.render=function(){var e=this.props,t=e.classes,r=e.element;return r&&r.control?bt.createElement("div",{className:t.self},bt.createElement(er,{field:r,error:this.store.visibleErrors.get(r.name)})):null},s.__decorate([Object(vt.resolve)(i.Store)],Field.prototype,"store",void 0),Field=s.__decorate([Object(Et.rb)(tr),gt.observer],Field)}(Et.bb),or={self:{},button:{display:"inline-block",position:"relative",margin:[25,"auto"]},error:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},icon:{width:21,height:21,marginRight:10},message:{color:Ft.r.errorColor}},nr={FieldModel:rr,RefModel:function(e){function Ref(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Ref,e),Ref.prototype.componentDidMount=function(){this.store.refMounted.set(this.props.element.id,!0)},Ref.prototype.componentWillUnmount=function(){this.store.refMounted.set(this.props.element.id,!1)},Ref.prototype.render=function(){var e=this,t=this.props,r=t.classes,o=t.element,n=this.store.refError.get(o.id),i=!this.store.isCurrentRefRequest(o.id);return bt.createElement("div",{className:r.self},this.store.isRefError(o)?bt.createElement("div",{className:r.error},bt.createElement("div",{className:r.icon},bt.createElement(_t.Gb,null)),bt.createElement("div",{className:r.message},n)):null,this.store.isRefButton(o)?bt.createElement("div",{className:r.button},bt.createElement(_t.ab,{active:i},bt.createElement(_t.Td,{onClick:function(){return e.store.checkRef(o)},disabled:i,children:o.title}))):null)},s.__decorate([Object(vt.resolve)(i.Store)],Ref.prototype,"store",void 0),Ref=s.__decorate([Object(Et.rb)(or),gt.observer],Ref)}(Et.bb)},ir={FieldModel:D.a,RefModel:L.a},ar=function(e){function Elements(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Elements,e),Elements.prototype.render=function(){var e=this.props.elements;return e?bt.createElement("div",null,e.map(function(t,e){var r=nr[Object.keys(ir).find(function(e){return t instanceof ir[e]})];return bt.createElement(r,{key:e,element:t})})):null},Elements}(bt.Component),sr=function(e){function RepeatAccount(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(RepeatAccount,e),RepeatAccount.prototype.render=function(){var e=this.store.repeatingAccountExtra;return e?bt.createElement(_t.oe,{title:e.title,value:e.value,disabled:!0}):null},s.__decorate([Object(vt.resolve)(i.Store)],RepeatAccount.prototype,"store",void 0),RepeatAccount=s.__decorate([gt.observer],RepeatAccount)}(bt.Component),cr=r(11),lr=r.n(cr),ur={self:{transition:[{property:"box-shadow",duration:300,timingFunction:"ease"},{property:"border",duration:300,timingFunction:"ease"},{property:"transform",duration:300,timingFunction:"ease"}],cursor:"pointer",display:"inline-block",width:166,height:166,margin:[0,20,25,0],border:[1,"solid",Object(Pt.rgba)(Ft.r.baseColor,.14)],borderRadius:10,overflow:"hidden",$hover:{boxShadow:[0,12,18,0,Object(Pt.rgba)(Ft.r.baseColor,.1)],border:[1,"solid",Object(Pt.rgba)(Ft.r.baseColor,.3)],transform:"translateY(-5px)"},$:{active:{transform:"translateY(0)",boxShadow:"none",border:[1,"solid",Object(Pt.rgba)(Ft.r.baseColor,.14)],cursor:"default",$$:{chosen:{opacity:1},icon:{opacity:1,transform:"scale(1)"}}}}},chosen:s.__assign({},Object(Ft.p)("opacity",300,"ease"),{position:"absolute",opacity:0,width:164,height:164,backgroundColor:Object(Pt.rgba)(Ft.r.whiteColor,.85),borderRadius:10}),icon:{position:"absolute",top:50,left:50,width:64,height:64,opacity:.5,transform:"scale(0.5)",transition:[{property:"opacity",duration:300,timingFunction:"ease"},{property:"transform",duration:300,timingFunction:"cubic-bezier(0.64, 0.57, 0.67, 1.53)"}]},image:{width:164,height:164},active:{}},mr=function(e){function GreetingCard(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(GreetingCard,e),GreetingCard.prototype.render=function(){var e,t=this,r=this.props,o=r.classes,n=r.card;return bt.createElement("div",{className:cr((e={},e[o.self]=!0,e[o.active]=this.store.chosenGreetingCard===n,e)),onClick:function(){return t.store.chooseGreetingCard(n)}},bt.createElement("div",{className:o.chosen},bt.createElement("div",{className:o.icon},bt.createElement(_t.de,null))),bt.createElement("img",{src:n.promo.href,className:o.image}))},s.__decorate([Object(vt.resolve)(i.Store)],GreetingCard.prototype,"store",void 0),GreetingCard=s.__decorate([Object(Et.rb)(ur),gt.observer],GreetingCard)}(Et.bb),dr={self:{},button:{marginBottom:50,textAlign:"center"},list:{display:"flex",flexFlow:"row wrap",marginRight:-20}},pr=function(e){function GreetingList(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(GreetingList,e),GreetingList.prototype.render=function(){var e=this,t=this.props.classes;return this.user.authorized?this.store.selectedSourceGroup!==ce.a.WALLET?null:this.store.greeting?this.store.greetingError?null:bt.createElement(_t.Hd,null,bt.createElement(_t.Qd,null,"Выберите открытку"),bt.createElement(_t.ab,{active:this.store.greetingCardsLoading},bt.createElement("div",{className:t.list},this.store.greetingCardsView.map(function(e,t){return bt.createElement(mr,{key:t,card:e})})),!this.store.shownAllGreetings&&this.store.greetingCards&&6<this.store.greetingCards.length?bt.createElement("div",{className:t.button},bt.createElement(_t.De,null,bt.createElement(_t.Td,{onClick:function(){return e.store.showAllGreetings()}},"Показать все открытки"))):null)):null:null},s.__decorate([Object(vt.resolve)(i.Store)],GreetingList.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],GreetingList.prototype,"user",void 0),GreetingList=s.__decorate([Object(Et.rb)(dr),gt.observer],GreetingList)}(Et.bb),hr=function(e){function GreetingSwitch(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(GreetingSwitch,e),GreetingSwitch.prototype.render=function(){var t=this;return bt.createElement(_t.ge,{label:"Добавить открытку (только для оплаты с Кошелька; бесплатно)",description:this.user.authorized?"Получатель увидит открытку в Истории платежей":"Авторизуйтесь для добавления открытки к платежу",checked:this.store.greeting,onChange:function(e){return t.store.checkGreeting(e)},disabled:!this.user.authorized||!this.store.rubWallet||this.store.selectedSourceGroup!==ce.a.WALLET||this.store.isExternalGreeting})},s.__decorate([Object(vt.resolve)(i.Store)],GreetingSwitch.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],GreetingSwitch.prototype,"user",void 0),GreetingSwitch=s.__decorate([gt.observer],GreetingSwitch)}(bt.Component),fr={self:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},icon:{width:20,height:20,marginRight:10},message:{color:Ft.r.errorColor}},yr=function(e){function GreetingError(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(GreetingError,e),GreetingError.prototype.render=function(){var e=this.props.classes;return this.user.authorized?this.store.selectedSourceGroup!==ce.a.WALLET?null:this.store.greetingError?bt.createElement("div",{className:e.self},bt.createElement("div",{className:e.icon},bt.createElement(_t.Gb,null)),bt.createElement("div",{className:e.message},this.store.greetingError.message)):null:null},s.__decorate([Object(vt.resolve)(i.Store)],GreetingError.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],GreetingError.prototype,"user",void 0),GreetingError=s.__decorate([Object(Et.rb)(fr),gt.observer],GreetingError)}(Et.bb),br=function(e){function Greeting(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Greeting,e),Greeting.prototype.render=function(){return bt.createElement(_t.Id,null,bt.createElement(hr,null),bt.createElement(yr,null),bt.createElement(pr,null))},Greeting=s.__decorate([gt.observer],Greeting)}(bt.Component),Sr=function(e){function Container(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Container,e),Container.prototype.render=function(){return bt.createElement(_t.w,{accented:!0,noBottom:!this.user.authorized&&!!this.store.terms||this.store.commentAvailable},bt.createElement(_t.Id,null,this.store.repeatingPayment?bt.createElement(sr,null):bt.createElement(ar,{elements:this.store.flatElements}),99!==this.store.id||this.store.repeatingPayment?null:bt.createElement(br,null)))},s.__decorate([Object(vt.resolve)(i.Store)],Container.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Container.prototype,"user",void 0),Container=s.__decorate([gt.observer],Container)}(bt.Component),gr={self:{paddingTop:15},multicurrency:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"flex-start"},sum:{width:"65%"},currency:{width:"35%",marginLeft:50}},vr=function(e){function Amount(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Amount,e),Amount.prototype.componentWillReact=function(){this.store.firstSumError&&Object(Ut.a)(Object(qt.findDOMNode)(this))},Amount.prototype.getUnderlineText=function(){return 0<this.store.maxAmount&&0<this.store.minAmount?"Минимум "+this.store.minAmount+" "+this.store.limitCurrency.symbol+", максимум "+this.store.maxAmount+" "+this.store.limitCurrency.symbol+" с учетом комиссии":0<this.store.minAmount?"Минимум "+this.store.minAmount+" "+this.store.limitCurrency.symbol+" с учетом комиссии":0<this.store.maxAmount?"Максимум "+this.store.maxAmount+" "+this.store.limitCurrency.symbol+" с учетом комиссии":null},Amount.prototype.getErrorText=function(){return 0===this.store.amount?"Укажите сумму платежа":this.getUnderlineText()},Amount.prototype.render=function(){var t=this,e=this.props.classes;if(!this.store.terms)return null;var r=1===this.store.currencyOptions.length||this.store.repeatingPayment||this.store.greeting;return bt.createElement(_t.w,{accented:!0,noBottom:this.user.authorized,noTop:!0},bt.createElement("div",{className:e.self},r?bt.createElement(_t.Dc,{title:"Сумма",type:"tel",value:this.store.amountView,disabled:this.store.sumFixed||this.store.isExternalSum,mask:Object(i.createNumberMask)({suffix:" "+this.store.limitCurrency.symbol,integerLimit:this.store.integerLimit}),error:this.store.amountBlur&&!this.store.isValidSum?this.getErrorText():null,help:this.getUnderlineText(),onChange:Object(Et.kb)(function(e){return t.store.setAmount(e)}),onFocus:function(){return t.store.onAmountFocus()}}):bt.createElement("div",{className:e.multicurrency},bt.createElement("div",{className:e.sum},bt.createElement(_t.Dc,{title:"Сумма",type:"tel",value:this.store.amountView,disabled:this.store.sumFixed||this.store.isExternalSum,mask:Object(i.createNumberMask)({integerLimit:this.store.integerLimit}),error:this.store.amountBlur&&!this.store.isValidSum?this.getErrorText():null,help:this.getUnderlineText(),onChange:Object(Et.kb)(function(e){return t.store.setAmount(e)}),onFocus:function(){return t.store.onAmountFocus()}})),bt.createElement("div",{className:e.currency},bt.createElement(_t.Nd,{title:"Валюта",options:this.store.currencyOptions,value:this.store.currencyForMulticurrencyAmount,onChange:function(e){return t.store.setCurrency(e)},disabled:this.store.repeatingPayment||this.store.isExternalSum})))))},s.__decorate([Object(vt.resolve)(i.Store)],Amount.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Amount.prototype,"user",void 0),Amount=s.__decorate([Object(Et.rb)(gr),gt.observer],Amount)}(Et.bb),_r={self:{display:"inline-block",paddingBottom:35,textAlign:"center",cursor:"pointer",color:Ft.r.mutedTextColor,$hover:{outline:"none",$$:{text:{color:"#282828"},icon:{self:{opacity:1}}}},$focus:{outline:"none",$$:{text:{color:"#282828"},icon:{self:{opacity:1}}}},$:{active:{$$:{text:{color:"#282828"}}}}},text:{color:Ft.r.mutedTextColor,padding:0,fontSize:14,fontWeight:500,lineHeight:1.29},active:{borderBottom:[5,"solid",Ft.r.primaryColor]},icon:{self:{width:48,height:48,opacity:.7},path:{}},iconActive:{self:{width:48,height:48},path:{fill:Ft.r.primaryColor}}},Er=function(e){function SourceTab(){var r=null!==e&&e.apply(this,arguments)||this;return r.onClick=function(e){var t=r.props.sourceGroup;e.preventDefault(),r.store.changeSelectedSourceGroup(t)},r.onKeyDown=function(e){var t=r.props.sourceGroup;switch(e.key){case"Enter":e.preventDefault(),r.store.changeSelectedSourceGroup(t)}},r}return s.__extends(SourceTab,e),SourceTab.prototype.render=function(){var e,t=this.props,r=t.classes,o=t.sourceGroup,n=t.Icon,i=t.IconActive,a=t.text,s=this.store.selectedSourceGroup===o;return bt.createElement("div",{className:cr((e={},e[r.self]=!0,e[r.active]=s,e)),tabIndex:0,onClick:this.onClick,onKeyDown:this.onKeyDown},bt.createElement(_t.Gd,null,s?bt.createElement(i,{classes:r.iconActive}):bt.createElement(n,{classes:r.icon}),bt.createElement("div",{className:r.text},a)))},s.__decorate([Object(vt.resolve)(i.Store)],SourceTab.prototype,"store",void 0),SourceTab=s.__decorate([Object(Et.rb)(_r),gt.observer],SourceTab)}(Et.bb),Fr={self:{},note:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginBottom:30},text:{color:"#282828",padding:0,fontSize:13,lineHeight:1.31,opacity:.7},hint:{marginLeft:7},groups:{display:"flex",flexDirection:"row",justifyContent:"space-around",margin:[0,23,0]}},Pr=function(e){function Sources(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Sources,e),Sources.prototype.render=function(){var e=this.props.classes;return this.user.authorized&&this.store.sources?this.store.repeatingPayment?null:bt.createElement(_t.w,{accented:!0,noBottom:!0,lineBottom:!0,lineTop:!0},bt.createElement(_t.Fd,null,bt.createElement(_t.Qd,null,"Способ оплаты"),bt.createElement("div",{className:e.note},bt.createElement("div",{className:e.text},"Комиссия зависит от способа оплаты"),bt.createElement("div",{className:e.hint},bt.createElement(_t.rd,{size:_t.Qb.ACCENT},bt.createElement(_t.re,null,"Про комиссии в кошельке"),bt.createElement(_t.oc,null,"Мы берем комиссию за определенный способ оплаты — этим мы покрываем расходы на оплату услуги и даем вам возможность платить любым удобным способом."),bt.createElement(_t.oc,null,"Мы честно показываем, сколько вам придется доплатить при оплате каждым из способов."),bt.createElement(_t.oc,null,"Точную сумму к оплате вы увидите на кнопке «Оплатить»"),bt.createElement(_t.oc,null,"Самые выгодные способы оплаты — с кошелька или с терминала, при этом мы не берем никаких дополнительных комиссий."),bt.createElement(_t.oc,null,"Обычно с карты вам придется доплатить 1% комиссии, а при оплате с баланса телефона от 1% в зависимости от услуги и условий оператора.")))),bt.createElement("div",{className:e.groups},0<this.store.sourcesWallet.length?bt.createElement(Er,{Icon:_t.Ie,IconActive:_t.Je,sourceGroup:ce.a.WALLET,text:bt.createElement("span",null,"Счет ",bt.createElement("br",null),"кошелька")}):null,0<this.store.sourcesCard.length?bt.createElement(Er,{Icon:_t.Q,IconActive:_t.R,sourceGroup:ce.a.CARD,text:bt.createElement("span",null,"Карта любого ",bt.createElement("br",null),"банка")}):null,this.store.sourceMobile?bt.createElement(Er,{Icon:_t.Nc,IconActive:_t.Oc,sourceGroup:ce.a.MOBILE,text:bt.createElement("span",null,"Баланс ",bt.createElement("br",null),"телефона")}):null,bt.createElement(Er,{Icon:_t.ie,IconActive:_t.je,sourceGroup:ce.a.TERMINAL,text:bt.createElement("span",null,"Наличными ",bt.createElement("br",null),"в терминале")})))):null},s.__decorate([Object(vt.resolve)(i.Store)],Sources.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Sources.prototype,"user",void 0),Sources=s.__decorate([Object(Et.rb)(Fr),gt.observer],Sources)}(Et.bb),Cr=r(32),Or=function(e){function AuthSuggestion(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(AuthSuggestion,e),AuthSuggestion.prototype.render=function(){var e=this;return this.user.authorized?null:bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(_t.Kd,null,bt.createElement(_t.oc,null,"Войдите в кошелек, чтобы совершить платеж"),bt.createElement(_t.Sb,null,bt.createElement(_t.b,{onClick:function(){return e.app.showSignIn()},children:"Войти в кошелек"}),bt.createElement(_t.f,{onClick:function(){return e.app.showSignUp()}},"Создать кошелек"))))},s.__decorate([Object(vt.resolve)(i.User)],AuthSuggestion.prototype,"user",void 0),s.__decorate([Object(vt.resolve)(Cr.a)],AuthSuggestion.prototype,"app",void 0),AuthSuggestion=s.__decorate([gt.observer],AuthSuggestion)}(bt.Component),Ir=function(e){function Offer(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Offer,e),Offer.prototype.render=function(){return this.store.sources&&this.store.offerAvailable?bt.createElement(_t.w,{centered:!0,lineTop:!0},this.user.authorized?this.store.selectedSourceGroup===ce.a.CARD?27290===this.store.id?bt.createElement(_t.oc,null,"Нажимая «Оплатить», вы пополняете Виртуальную карту и баланс кошелька с указанной банковской"," ","карты и принимаете"," ",bt.createElement(_t.hc,{href:STATIC_URL+"/ru/doc/qvc.pdf",target:"_blank"}," оферту")," ","Виртуальной карты с балансом кошелька и"," ",bt.createElement(_t.hc,{href:STATIC_URL+"/ru/doc/oferta_erk.pdf",target:"_blank"}," оферту")," ","Единой расчетной карты QIWI."):99===this.store.id?bt.createElement(_t.oc,null,"Нажимая «Оплатить», вы пополняете Виртуальную карту и баланс кошелька с указанной банковской"," ","карты для дальнейшего проведения платежа и принимаете"," ",bt.createElement(_t.hc,{href:STATIC_URL+"/ru/doc/qvc.pdf",target:"_blank"}," оферту")," ","Виртуальной карты с балансом кошелька и"," ",bt.createElement(_t.hc,{href:STATIC_URL+"/ru/doc/oferta_erk.pdf",target:"_blank"}," оферту")," ","Единой расчетной карты QIWI."):bt.createElement(_t.oc,null,"Баланс вашей учетной записи в QIWI Кошельке будет пополнен",bt.createElement("br",null),"с указанной вами банковской карты для дальнейшего проведения",bt.createElement("br",null),"платежа. Совершая платеж, вы принимаете условия"," ",bt.createElement(_t.hc,{href:STATIC_URL+"/ru/doc/oferta_erk.pdf",target:"_blank"}," оферты"),"."):this.store.selectedSourceGroup===ce.a.WALLET?bt.createElement(_t.oc,null,"Запланировав регулярный платеж, вы соглашаетесь с"," ",bt.createElement(_t.hc,{href:STATIC_URL+"/ru/doc/oferta_lk.pdf",target:"_blank"},"офертой"),"."):null:bt.createElement(_t.oc,null,"Нажимая кнопку «Оплатить», вы соглашаетесь с"," ",bt.createElement(_t.hc,{href:STATIC_URL+"/ru/doc/oferta_card_payment.pdf",target:"_blank"},"офертой"),".")):null},s.__decorate([Object(vt.resolve)(i.Store)],Offer.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Offer.prototype,"user",void 0),Offer=s.__decorate([gt.observer],Offer)}(bt.Component),jr=function(e){function Comment(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Comment,e),Comment.prototype.render=function(){var t=this;return this.store.commentAvailable?bt.createElement(_t.w,{accented:!0,noTop:!0,noBottom:!this.user.authorized},this.store.greeting?bt.createElement(_t.ne,{title:"Пожелание на открытке",value:this.store.comment.get(),help:"Поздравьте с переводом так, чтобы получатель разрыдался от счастья",onChange:Object(Et.kb)(function(e){return t.store.setComment(e)}),maxRows:6,error:this.store.greetingCommentBlur&&!this.store.isValidGreetingComment?"Максимум 140 символов":"",onFocus:function(){return t.store.onGreetingCommentBlur(!1)},onBlur:function(){return t.store.onGreetingCommentBlur(!0)},disabled:this.store.isExternalComment}):bt.createElement(_t.ne,{title:"Комментарий к переводу",value:this.store.comment.get(),help:"Необязательно",onChange:Object(Et.kb)(function(e){return t.store.setComment(e)}),maxRows:6,disabled:this.store.isExternalComment})):null},s.__decorate([Object(vt.resolve)(i.Store)],Comment.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Comment.prototype,"user",void 0),Comment=s.__decorate([gt.observer],Comment)}(bt.Component),wr={self:s.__assign({},Object(Ft.g)(8),{color:"#282828",padding:0,fontSize:13,lineHeight:1.31,opacity:.7}),include:{color:"#282828",padding:0,fontSize:14,fontWeight:500,lineHeight:1.29,opacity:1},disabled:{color:"#282828",padding:0,fontSize:14,lineHeight:1.29,opacity:.7}},Tr=function(e){function CommissionInfo(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(CommissionInfo,e),CommissionInfo.prototype.render=function(){var e,t=this.props.classes,r=this.store.commissionForInfo,o=this.store.additionalCommissionForInfo,n=this.store.printedCommission(r),i=this.store.printedCommission(o),a=this.store.isNotEnoughMoney;return bt.createElement("div",null,this.store.commissionSum.amount?bt.createElement("div",{className:cr((e={},e[t.self]=!0,e[t.include]=!0,e[t.disabled]=a,e))},"Включая комиссию ",this.store.commissionSum.toString()):n||i?null:bt.createElement("div",{className:t.self},"Без комиссии"),n?bt.createElement("div",{className:t.self},"Комиссия ",n):null,i&&this.store.selectedSourceGroup===ce.a.CARD?bt.createElement("div",{className:t.self},"Комиссия при оплате картой ",i):null,i&&this.store.selectedSourceGroup===ce.a.MOBILE?bt.createElement("div",{className:t.self},"Комиссия при оплате с баланса мобильного ",i):null,this.store.selectedSourceGroup===ce.a.CARD?bt.createElement("div",{className:t.self},"Банк, выпустивший карту, может",bt.createElement("br",null),"взимать дополнительную комиссию"):null,this.store.selectedSourceGroup===ce.a.MOBILE?bt.createElement("div",{className:t.self},"Оператор сотовой связи может",bt.createElement("br",null),"взимать дополнительную комиссию"):null,this.store.converting?bt.createElement("div",{className:t.self},"Конвертация валюты по курсу:",bt.createElement("br",null),f.b.sum(1,this.store.sourceCurrency.symbol)," = ",f.b.sum(this.store.convertedCurrencyAmount,this.store.currency.symbol,4)):null)},s.__decorate([Object(vt.resolve)(i.Store)],CommissionInfo.prototype,"store",void 0),CommissionInfo=s.__decorate([Object(Et.rb)(wr),gt.observer],CommissionInfo)}(Et.bb),Rr={self:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},button:{alignSelf:"flex-start"},commission:{marginLeft:40}},xr=function(e){function Submit(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Submit,e),Submit.prototype.render=function(){var e=this,t=this.props.classes;return this.user.authorized||null!==this.store.naMode&&this.store.naMode!==le.WALLET?this.store.selectedSourceGroup===ce.a.TERMINAL?null:this.store.terms?bt.createElement(_t.w,{accented:!0},bt.createElement(_t.yb,{show:!!this.store.error},this.store.error?bt.createElement(_t.Fb,{title:"Ошибка платежа",code:this.store.error.code,message:this.store.error.message,actions:[bt.createElement(_t.hc,{onClick:Object(Et.lb)(this.store.identificationError?function(){return e.store.submitPaymentErrorGoToIdentificationForm()}:this.store.blockedError?function(){return e.store.submitPaymentErrorGoToBlock()}:function(){return e.store.submitPaymentErrorCheck()}),children:this.store.identificationError?"Указать данные":this.store.blockedError?"Подробнее об ограничении":"Проверить данные"}),bt.createElement(_t.hc,{onClick:Object(Et.lb)(function(){return e.store.submitPaymentErrorGoToIndexPage()}),children:"Вернуться на главную"})]}):null),bt.createElement("div",{className:t.self},bt.createElement("div",{className:t.button},bt.createElement(_t.b,{disabled:this.store.isNotEnoughMoney||this.store.isPaymentLimitApplied,text:this.store.totalSumView&&this.store.totalSumView.amount?"Оплатить "+this.store.totalSumView.toString():"Оплатить",loading:this.store.submitPaymentLoading||this.store.complexCommissionLoading})),bt.createElement("div",{className:t.commission},bt.createElement(Tr,null)))):null:null},s.__decorate([Object(vt.resolve)(i.Store)],Submit.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Submit.prototype,"user",void 0),Submit=s.__decorate([Object(Et.rb)(Rr),gt.observer],Submit)}(Et.bb),Ar=function(e){function Card(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Card,e),Card.prototype.render=function(){var t=this;return this.user.authorized&&this.store.sources?this.store.selectedSourceGroup!==ce.a.CARD?null:bt.createElement(_t.w,{noBottom:!0,accented:!0},bt.createElement(_t.Jd,null,1<this.store.sourcesCard.length?bt.createElement(_t.Nd,{title:"Карта",options:this.store.sourcesCard.map(function(e){return{label:e.title,value:e,disabled:!1}}),value:this.store.selectedSource,onChange:function(e){return t.store.changeSelectedSourceCard(e)}}):null,bt.createElement(_t.Ld,null,bt.createElement(_t.Jd,null,this.store.selectedSource instanceof xe.a?bt.createElement(_t.oc,null,"Укажите код CVC/CVV, расположенный на",bt.createElement("br",null),"обратной стороне карты:"):bt.createElement(_t.oc,null,"Укажите реквизиты карты,",bt.createElement("br",null),"с которой будут списаны деньги"),bt.createElement(_t.cd,{paySystem:this.paymentCard.paySystem,pan:this.paymentCard.disabled?bt.createElement(_t.oe,{disabled:!0,value:this.paymentCard.cardPan.get()}):bt.createElement(_t.Dc,{placeholder:"Номер карты",value:this.paymentCard.cardPan.get(),error:this.paymentCard.visibleErrors.get("pan"),mask:Object(Et.qb)("dddd dddd dddd dddd ddd"),onChange:Object(Et.kb)(function(e){return t.paymentCard.setCardPan(e)}),onFocus:function(){return t.paymentCard.onFieldFocus("pan")},onBlur:function(){return t.paymentCard.onFieldBlur("pan")}}),valid:this.paymentCard.disabled?bt.createElement(_t.oe,{title:"Месяц и год",disabled:!0,value:this.paymentCard.validThru}):bt.createElement(_t.Dc,{title:"Месяц и год",placeholder:"00  /  00",value:this.paymentCard.validThru,error:this.paymentCard.visibleErrors.get("validThru"),mask:Object(Et.qb)("dd  /  dd"),pipe:b.f,onChange:Object(Et.kb)(function(e){return t.paymentCard.setValidThru(e)}),onFocus:function(){return t.paymentCard.onFieldFocus("validThru")},onBlur:function(){return t.paymentCard.onFieldBlur("validThru")}}),cvv:bt.createElement(_t.Cc,{placeholder:"CVV",value:this.paymentCard.cvv,error:this.paymentCard.visibleErrors.get("cvv"),mask:Object(Et.qb)("ddd"),hint:bt.createElement(_t.rd,{size:_t.Qb.NORMAL,imageBottom:bt.createElement("img",{src:r(1410),srcSet:r(1411)+" 2x",height:105}),children:bt.createElement(_t.oc,null,"Код CVV/CVC указан на обратной стороне карты")}),onChange:Object(Et.kb)(function(e){return t.paymentCard.setCvv(e)}),onFocus:function(){return t.paymentCard.onFieldFocus("cvv")},onBlur:function(){return t.paymentCard.onFieldBlur("cvv")}})})),this.store.selectedSource instanceof Re.a?bt.createElement(_t.ge,{label:"Привязать карту к QIWI Кошельку",checked:this.store.linkingCard,onChange:function(e){return t.store.changeCardLinking(e)}}):null))):null},s.__decorate([Object(vt.resolve)(i.Store)],Card.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Card.prototype,"user",void 0),s.__decorate([Object(vt.resolve)(j.a)],Card.prototype,"paymentCard",void 0),Card=s.__decorate([gt.observer],Card)}(bt.Component),Nr={self:{display:"flex",flexDirection:"row",justifyContent:"flex-start",marginTop:30,marginBottom:30},icon:{width:21,height:21,marginRight:10}},kr=function(e){function Wallet(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Wallet,e),Wallet.prototype.render=function(){var t=this,e=this.props.classes;return this.user.authorized&&this.store.sources?this.store.selectedSourceGroup!==ce.a.WALLET?null:bt.createElement(_t.w,{noBottom:!0,accented:!0},bt.createElement(_t.Nd,{title:"Счет кошелька",options:this.store.sourcesWallet.map(function(e){return{label:e.title,value:e,disabled:!1}}),value:this.store.selectedSource,onChange:function(e){return t.store.changeSelectedSourceWallet(e)}}),this.store.isNotEnoughMoney?bt.createElement("div",{className:e.self},bt.createElement("div",{className:e.icon},bt.createElement(_t.Gb,null)),bt.createElement("div",null,"Недостаточно средств для оплаты.",bt.createElement("br",null),bt.createElement(_t.ye,{onClick:function(){return t.store.replenishWallet()}},"Пополните кошелек")," ","или оплатите другим способом.")):null):null},s.__decorate([Object(vt.resolve)(i.Store)],Wallet.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Wallet.prototype,"user",void 0),Wallet=s.__decorate([Object(Et.rb)(Nr),gt.observer],Wallet)}(Et.bb),Dr=r(1476),Lr={self:{},text:{fontSize:16,lineHeight:1.6},phone:{display:"flex",flexDirection:"row",alignItems:"flex-start",marginBottom:20},operator:{width:16,height:16,marginTop:3},number:{marginLeft:10,fontWeight:500,fontSize:16,lineHeight:1.6}},Vr=function(e){function Mobile(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Mobile,e),Object.defineProperty(Mobile.prototype,"mobileOperator",{get:function(){switch(!0){case this.store.selectedSource instanceof Dr.b:return _t.lc;case this.store.selectedSource instanceof Dr.a:return _t.t;case this.store.selectedSource instanceof Dr.d:return _t.Fc;case this.store.selectedSource instanceof Dr.f:return _t.he;case this.store.selectedSource instanceof Dr.c:return _t.Ec;default:return null}},enumerable:!0,configurable:!0}),Mobile.prototype.render=function(){var e=this.props.classes;return this.user.authorized&&this.store.sources?this.store.selectedSourceGroup!==ce.a.MOBILE?null:bt.createElement(_t.w,{noBottom:!0,accented:!0},bt.createElement("div",{className:e.text},"Оплата услуги с баланса телефона:"),bt.createElement("div",{className:e.phone},bt.createElement("div",{className:e.operator},this.mobileOperator?bt.createElement(this.mobileOperator,null):null),bt.createElement("div",{className:e.number},"+",this.user.id)),bt.createElement(_t.Ud,null,bt.createElement(_t.Vd,null,"Убедитесь, что на балансе телефона достаточно",bt.createElement("br",null),"денег, чтобы оплатить покупку и комиссию."),bt.createElement(_t.Vd,null,"Деньги будут списаны с баланса только после",bt.createElement("br",null),"подтверждения платежа с телефона."))):null},s.__decorate([Object(vt.resolve)(i.Store)],Mobile.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Mobile.prototype,"user",void 0),s.__decorate([m.computed],Mobile.prototype,"mobileOperator",null),Mobile=s.__decorate([Object(Et.rb)(Lr),gt.observer],Mobile)}(Et.bb),Mr={self:{display:"flex",flexDirection:"row",justifyContent:"space-around"},item:{textAlign:"center"},description:{color:"#282828",padding:0,fontSize:14,lineHeight:1.29,opacity:.7}},Br=function(e){function Terminal(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Terminal,e),Terminal.prototype.render=function(){var e=this.props.classes;return this.user.authorized&&this.store.sources?this.store.selectedSourceGroup!==ce.a.TERMINAL?null:bt.createElement(_t.w,{accented:!0},bt.createElement("div",{className:e.self},bt.createElement("div",{className:e.item},bt.createElement(_t.ke,null),bt.createElement(_t.Vc,null,"1"),bt.createElement("div",{className:e.description},"Найдите ближайший",bt.createElement("br",null),"QIWI терминал")),bt.createElement("div",{className:e.item},bt.createElement(_t.le,null),bt.createElement(_t.Vc,null,"2"),bt.createElement("div",{className:e.description},"Найдите провайдера",bt.createElement("br",null),"в терминале")),bt.createElement("div",{className:e.item},bt.createElement(_t.me,null),bt.createElement(_t.Vc,null,"3"),bt.createElement("div",{className:e.description},"Введите реквизиты",bt.createElement("br",null),"и внесите деньги")))):null},s.__decorate([Object(vt.resolve)(i.Store)],Terminal.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Terminal.prototype,"user",void 0),Terminal=s.__decorate([Object(Et.rb)(Mr),gt.observer],Terminal)}(Et.bb),Gr=r(1350),qr=function(e){function Schedule(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Schedule,e),Schedule.prototype.render=function(){var t=this;return this.user.authorized&&this.store.sources&&this.store.scheduleAvailable?bt.createElement(_t.w,{accented:!0,noTop:!0,noBottom:!0},bt.createElement(Gr.i,{checked:this.store.scheduled,onChange:function(e){return t.store.setScheduled(e)}}),this.store.scheduled?bt.createElement(Gr.e,null,bt.createElement(Gr.g,null,"Укажите день платежа, и мы будем автоматически",bt.createElement("br",null),"повторять эту оплату раз в месяц."),bt.createElement(Gr.f,null,bt.createElement(_t.Nd,{title:"Дата списания",options:b.h,value:this.store.favoriteSchedule.get(),error:this.store.favoriteVisibleErrors.get("schedule"),onChange:function(e){return t.store.setFavoriteSchedule(e)},onFocus:function(){return t.store.onFavoriteFocus("schedule")},onBlur:function(){return t.store.onFavoriteBlur("schedule")}})),bt.createElement(Gr.f,null,bt.createElement(_t.oe,{title:"Название платежа",help:"Придумайте название для быстрого поиска платежа",value:this.store.favoriteTitle.get(),error:this.store.favoriteVisibleErrors.get("title"),onChange:Object(Et.kb)(function(e){return t.store.setFavoriteTitle(e)}),onFocus:function(){return t.store.onFavoriteFocus("title")},onBlur:function(){return t.store.onFavoriteBlur("title")}}))):null):null},s.__decorate([Object(vt.resolve)(i.Store)],Schedule.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Schedule.prototype,"user",void 0),Schedule=s.__decorate([gt.observer],Schedule)}(bt.Component),Ur=function(e){var t=e.classes;return bt.createElement("svg",{className:t.self,viewBox:"0 0 90 49",focusable:"false"},bt.createElement("path",{className:t.path,d:"M61.9 39c1.678 0 3.1-1.53 3.1-3.49V12.49C65 10.53 63.578 9 61.9 9H28.1c-1.678 0-3.1 1.53-3.1 3.49v23.02c0 1.96 1.422 3.49 3.1 3.49h33.8zm0 2H28.1c-2.817 0-5.1-2.458-5.1-5.49V12.49C23 9.458 25.283 7 28.1 7h33.8c2.818 0 5.1 2.458 5.1 5.49v23.02c0 3.032-2.283 5.49-5.1 5.49zM25 18h40v-2H25v2z"}))},Wr=function(e){var t=e.classes;return bt.createElement("svg",{className:t.self,viewBox:"0 0 90 49",focusable:"false"},bt.createElement("path",{className:t.path,fillRule:"evenodd",d:"M56.566 40.25a64.866 64.866 0 0 0-1.273-.33l-.164-.04c-2.567-.64-4.98-1.26-7.43-3.79a5.25 5.25 0 0 1-.103-.104 18.57 18.57 0 0 1-2.023-2.587 24.254 24.254 0 0 1-.55-.87c-.52-.864-.478 1.273-.28 3.846-.152.13-.316.137-.48.137-3.45 0-6.334-1.227-8.818-3.75-2.484-2.523-3.69-5.523-3.69-9.17 0-3.657 1.172-6.67 3.59-9.21 2.402-2.53 5.32-3.758 8.917-3.758 3.513 0 6.435 1.227 8.936 3.75 2.496 2.525 3.71 5.563 3.71 9.29 0 .478-.02.944-.06 1.4-2.26-.146-4.12-.116-4.25.013-.31.313.548.268.933.374.628.172 1.21.38 1.753.623.423.19.82.402 1.193.634l.112.07c2.27 1.464 3.56 3.732 3.976 6.718.016.12.088.283.215.068 1.19-2.03 1.83-3.61 2.174-4.728a5.76 5.76 0 0 0 .176-.625c.066-.266.114-.494.148-.68.255-1.295.385-2.626.385-3.987 0-3.53-.868-6.847-2.584-9.858a18.78 18.78 0 0 0-7.107-7.12C50.983 4.865 47.668 4 44.123 4c-3.396 0-6.613.874-9.56 2.6-2.95 1.727-5.307 4.138-7.007 7.167C25.86 16.79 25 20.113 25 23.64c0 3.53.86 6.837 2.56 9.83 1.7 3 4.086 5.39 7.086 7.1 2.988 1.703 6.263 2.567 9.733 2.567.737 0 1.463-.042 2.18-.12a145.764 145.764 0 0 0 1.776-.15c2.033-.18 3.98-.372 5.937-.29 3.687.158 7.417 1.288 11.85 5.278.445.4 1.04-.1.65-.594-3.855-4.85-7.157-6.183-10.207-7.01zm-2.458-5.418c-.387 0-.708.137-.906.385-.508.636-.28 1.755.498 2.445.34.3.827.48 1.307.48.49 0 .897-.186 1.148-.523.452-.617.19-1.49-.664-2.224-.42-.363-.913-.564-1.382-.564m4.26-3.194c-.377-.112-.66-.03-.8.23-.21.392-.055 1.167.37 1.842.433.684.8 1.032 1.09 1.032.102 0 .19-.044.26-.125.163-.19.216-.584.15-1.086-.07-.51-.38-1.564-1.07-1.892"}))},zr={self:{display:"inline-block",width:"48%",height:140,marginRight:"4%",padding:[18,0,27],background:Ft.r.whiteColor,border:[1,"solid","#d7d7d7"],borderRadius:10,textAlign:"center",verticalAlign:"top",outline:"none",$hover:{boxShadow:[0,12,15,0,Object(Pt.rgba)(Ft.r.baseColor,.05)],cursor:"pointer"},$focus:{boxShadow:[0,12,15,0,Object(Pt.rgba)(Ft.r.baseColor,.05)],cursor:"pointer"},$lastChild:{marginRight:0}},icon:{self:{marginBottom:5,width:90,height:49},path:{fill:Ft.r.iconBaseColor}},sum:{marginBottom:9,lineHeight:1.19,fontSize:32},name:{marginBottom:5,fontSize:16,fontWeight:700,lineHeight:1.31},summed:{paddingTop:25},active:{color:Ft.r.whiteColor,background:Ft.r.primaryColor,boxShadow:[0,12,18,0,Object(Pt.rgba)(Ft.r.primaryColor,.4)],border:"none",$hover:{boxShadow:[0,12,18,0,Object(Pt.rgba)(Ft.r.primaryColor,.4)]},$focus:{boxShadow:[0,12,18,0,Object(Pt.rgba)(Ft.r.primaryColor,.4)]},$$:{icon:{path:{fill:Ft.r.whiteColor}}}},commission:{}},Qr=function(t){function NASource(e){return t.call(this,e)||this}return s.__extends(NASource,t),NASource.prototype.render=function(){var e,t=this.props,r=t.classes,o=t.noauth,n=t.sum,i=t.name,a=t.commission,s=t.active,c=t.onClick,l=t.tabIndex,u=t.onKeyDown,m=!!n&&n.amount;return bt.createElement("div",{className:cr((e={},e[r.self]=!0,e[r.active]=s,e[r.summed]=0!==m,e)),onClick:c,onKeyDown:u,tabIndex:l},m?bt.createElement("div",{className:r.sum},n.toString()):o?bt.createElement(Ur,{classes:r.icon}):bt.createElement(Wr,{classes:r.icon}),bt.createElement("div",{className:r.name},i),bt.createElement("div",{className:r.commission},null!==a?"Комиссия "+a:"Без комиссии"))},NASource=s.__decorate([Object(Et.rb)(zr),gt.observer],NASource)}(Et.bb),Hr=function(e){function NASources(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(NASources,e),NASources.prototype.render=function(){var e=this;return bt.createElement(_t.w,{accented:!0,noTop:!0},bt.createElement("div",null,bt.createElement(_t.Qd,null,"Способ оплаты"),bt.createElement(Qr,{noauth:!0,sum:this.store.totalSumView,name:"Картой без регистрации",commission:this.store.printedCommission(this.store.commissionForInfo,!0),active:this.store.naMode===le.CARD,onClick:Object(Et.lb)(function(){return e.store.changeNAMode(le.CARD)}),tabIndex:0,onKeyDown:Object(Et.mb)(13,function(){return e.store.changeNAMode(le.CARD)})}),bt.createElement(Qr,{noauth:!1,sum:this.store.unauthWalletTotalSum,name:"Кошельком",commission:this.store.printedCommission(this.store.unauthWalletCommission,!0),active:this.store.naMode===le.WALLET,onClick:Object(Et.lb)(function(){return e.store.changeNAMode(le.WALLET)}),tabIndex:0,onKeyDown:Object(Et.mb)(13,function(){return e.store.changeNAMode(le.CARD)})})))},s.__decorate([Object(vt.resolve)(i.Store)],NASources.prototype,"store",void 0),NASources=s.__decorate([gt.observer],NASources)}(bt.Component),$r=function(e){function NACardForm(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(NACardForm,e),NACardForm.prototype.render=function(){var t=this;return this.user.authorized?null:this.store.naMode!==le.CARD?null:bt.createElement(_t.w,{noTop:!0,accented:!0},bt.createElement(_t.Id,null,bt.createElement(_t.oc,null,"Укажите реквизиты карты,",bt.createElement("br",null),"с которой будут списаны деньги"),bt.createElement(_t.cd,{paySystem:this.paymentCardStore.paySystem,pan:bt.createElement(_t.Dc,{placeholder:"Номер карты",value:this.paymentCardStore.cardPan.get(),error:this.paymentCardStore.visibleErrors.get("pan"),mask:Object(Et.qb)("dddd dddd dddd dddd ddd"),onChange:Object(Et.kb)(function(e){return t.paymentCardStore.setCardPan(e)}),onFocus:function(){return t.paymentCardStore.onFieldFocus("pan")},onBlur:function(){return t.paymentCardStore.onFieldBlur("pan")}}),valid:bt.createElement(_t.Dc,{title:"Месяц и год",placeholder:"00  /  00",value:this.paymentCardStore.validThru,error:this.paymentCardStore.visibleErrors.get("validThru"),mask:Object(Et.qb)("dd  /  dd"),pipe:b.f,onChange:Object(Et.kb)(function(e){return t.paymentCardStore.setValidThru(e)}),onFocus:function(){return t.paymentCardStore.onFieldFocus("validThru")},onBlur:function(){return t.paymentCardStore.onFieldBlur("validThru")}}),cvv:bt.createElement(_t.Cc,{placeholder:"CVV",value:this.paymentCardStore.cvv,error:this.paymentCardStore.visibleErrors.get("cvv"),mask:Object(Et.qb)("ddd"),hint:bt.createElement(_t.rd,{size:_t.Qb.NORMAL,imageBottom:bt.createElement("img",{src:r(1410),srcSet:r(1411)+" 2x",height:105}),children:bt.createElement(_t.oc,null,"Код CVV/CVC указан на обратной стороне карты")}),onChange:Object(Et.kb)(function(e){return t.paymentCardStore.setCvv(e)}),onFocus:function(){return t.paymentCardStore.onFieldFocus("cvv")},onBlur:function(){return t.paymentCardStore.onFieldBlur("cvv")}})})))},s.__decorate([Object(vt.resolve)(i.Store)],NACardForm.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],NACardForm.prototype,"user",void 0),s.__decorate([Object(vt.resolve)(j.a)],NACardForm.prototype,"paymentCardStore",void 0),NACardForm=s.__decorate([gt.observer],NACardForm)}(bt.Component),Yr=function(e){function EmailInput(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(EmailInput,e),EmailInput.prototype.render=function(){var t=this;return this.user.authorized?null:this.store.naMode!==le.CARD?null:bt.createElement(_t.w,{noTop:!0,noBottom:!0,accented:!0},bt.createElement(_t.oe,{title:"Адрес электронной почты",help:"На этот адрес мы вышлем квитанцию",value:this.store.emailValue,error:this.store.emailError?"Укажите правильно адрес своей электронной почты":null,onChange:Object(Et.kb)(function(e){return t.store.setEmailValue(e)}),onBlur:function(){return t.store.onBlurEmail()},onFocus:function(){return t.store.onFocusEmail()}}))},s.__decorate([Object(vt.resolve)(i.Store)],EmailInput.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],EmailInput.prototype,"user",void 0),EmailInput=s.__decorate([gt.observer],EmailInput)}(bt.Component),Jr={self:(Ye={display:"flex",padding:[44,44,48],borderBottom:[1,"solid",Ft.r.separationColor],lineHeight:"1.5",fontSize:14},Ye[Ft.r.media.large]={padding:[44,68,48],fontSize:16},Ye),icon:{flexShrink:0,display:"block",width:24,height:24,marginRight:12},content:{display:"block"}},Kr=function(e){function Warning(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Warning,e),Warning.prototype.render=function(){var e=this.props.classes,t=this.store.getStatus();if(void 0===t)return null;var r=t.foreignWarning&&t.foreignProviders&&t.foreignProviders.includes(this.store.id),o=t.transferWarning&&t.transferProviders&&t.transferProviders.includes(this.store.id);return r||o?St.a.createElement("div",{className:e.self},St.a.createElement("div",{className:e.icon},St.a.createElement(_t.Le,null)),St.a.createElement("div",{className:e.content},r?t.foreignWarning:o?t.transferWarning:null," ",St.a.createElement(_t.hc,{href:"/settings/identification"},"Увеличить лимит"))):null},s.__decorate([Object(vt.resolve)(i.Store)],Warning.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Warning.prototype,"user",void 0),Warning=s.__decorate([Object(Et.rb)(Jr),gt.observer],Warning)}(Et.bb),Xr={self:{width:580},close:s.__assign({},Object(Ft.p)("opacity"),{position:"absolute",top:15,right:15,width:24,height:24,cursor:"pointer",opacity:.3,zIndex:999,$hover:{opacity:.6}}),closeIcon:{self:{width:"100%",height:"100%"},path:{fill:Ft.r.baseColor}}},Zr=function(e){function LimitsDetails(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(LimitsDetails,e),LimitsDetails.prototype.render=function(){var e=this,t=this.props.classes;return St.a.createElement(_t.yb,{show:this.store.limitsDetailsVisible},St.a.createElement("div",{className:t.self},St.a.createElement("div",{className:t.close,onClick:function(){return e.store.closeLimitsDetails()}},St.a.createElement(_t.fb,{classes:t.closeIcon})),St.a.createElement(_t.w,{accented:!0},St.a.createElement(_t.Md,null,St.a.createElement(_t.Gd,null,St.a.createElement(_t.se,{size:Et.ib.TITLE_XL},this.store.limitAppliedDescription.title),Object(Et.nb)(this.store.limitAppliedDescription.content,{p:_t.ad,a:_t.ye})),St.a.createElement(_t.De,null,St.a.createElement(_t.C,{children:"Мой статус и лимиты",onClick:function(){return e.router.open("/settings/identification")}}))))))},s.__decorate([Object(vt.resolve)(i.Store)],LimitsDetails.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.Router)],LimitsDetails.prototype,"router",void 0),LimitsDetails=s.__decorate([Object(Et.rb)(Xr),gt.observer],LimitsDetails)}(Et.bb),eo={icon:{width:21,height:21},wrapTop:{marginTop:24},wrapBottom:{marginBottom:32}},to=function(e){function Limits(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Limits,e),Limits.prototype.render=function(){var e,t=this,r=this.props.classes;return this.user.authorized?this.store.complexCommissionLoading?null:this.store.isPaymentLimitApplied?St.a.createElement(_t.w,{noTop:!0,noBottom:!0,accented:!0},St.a.createElement("div",{className:lr()((e={},e[r.wrapTop]=!0,e[r.wrapBottom]=this.store.scheduleAvailable,e))},St.a.createElement(_t.Vb,{icon:St.a.createElement("div",{className:r.icon},St.a.createElement(_t.Gb,null)),children:St.a.createElement(_t.Fd,null,St.a.createElement("div",null,this.store.limitAppliedMessage),this.store.isLimitAppliedDescription?St.a.createElement(St.a.Fragment,null,St.a.createElement(_t.ye,{children:"Подробнее",onClick:function(){return t.store.showLimitsDetails()}}),St.a.createElement(Zr,null)):null)}))):null:null},s.__decorate([Object(vt.resolve)(i.Store)],Limits.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Limits.prototype,"user",void 0),Limits=s.__decorate([Object(Et.rb)(eo),gt.observer],Limits)}(Et.bb),ro=function(e){function Form(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Form,e),Form.prototype.render=function(){var e=this;return this.store.loading.get()||this.store.submitConfirmationLoading?bt.createElement(_t.Yd,null):bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"},bt.createElement(_t.n,null)),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(Kr,null),bt.createElement(_t.s,{onSubmit:function(){return e.store.submitPayment()}},bt.createElement(jt,null),bt.createElement(Sr,null),bt.createElement(jr,null),this.user.authorized?null:bt.createElement(vr,null),this.store.terms&&this.store.sources?this.user.authorized?bt.createElement(_t.ab,{active:this.store.loadingSource},bt.createElement(Pr,null),bt.createElement(kr,null),bt.createElement(Ar,null),bt.createElement(Vr,null),bt.createElement(Br,null),this.user.authorized&&this.store.selectedSourceGroup!==ce.a.TERMINAL?bt.createElement(vr,null):null,bt.createElement(to,null),bt.createElement(qr,null),bt.createElement(xr,null),bt.createElement(Ir,null)):this.store.walletTerms&&this.store.sources&&0!==this.store.sources.items.length?bt.createElement(_t.ab,{active:this.store.loadingSource},bt.createElement(Hr,null),bt.createElement($r,null),bt.createElement(Yr,null),bt.createElement(xr,null),bt.createElement(Ir,null)):bt.createElement(Or,null):this.store.walletTerms?bt.createElement(_t.ab,{active:this.store.loadingSource},bt.createElement(Or,null)):bt.createElement(Or,null)))),bt.createElement(_t.pb,{width:"4"},bt.createElement(Ot,null),bt.createElement(_t.u,null,bt.createElement(_t.w,null,bt.createElement(_t.hc,{href:"https://ru.surveymonkey.com/r/22KJN2W",target:"_blank"},"Оцените работу")," ","наших новых платежных форм — это займет всего минуту. Мы хотим сделать кошелек удобнее для вас."))))},s.__decorate([Object(vt.resolve)(i.Store)],Form.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Form.prototype,"user",void 0),Form=s.__decorate([gt.observer],Form)}(bt.Component),oo={self:{textAlign:"center"},steps:{display:"flex",justifyContent:"space-between",marginTop:44},item:{textAlign:"center",width:144},image:{width:144},step:{margin:[16,0,12]},link:{textAlign:"center",fontWeight:500,marginTop:44}},no=r(1603),io=r(1604),ao=r(1605),so=function(e){function Foreign(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Foreign,e),Foreign.prototype.render=function(){var e=this.props.classes,t=this.store.provider;return St.a.createElement("div",{className:e.self},St.a.createElement(_t.se,{bold:!0},"Как платить QIWI Кошельком на других сайтах?"),St.a.createElement("div",{className:e.steps},St.a.createElement("div",{className:e.item},St.a.createElement("img",{className:e.image,src:no}),St.a.createElement("div",{className:e.step},"1"),St.a.createElement(_t.ad,{size:Et.ib.TEXT_SMALL},"Выберите услугу или товары, которые вы хотели бы получить.")),St.a.createElement("div",{className:e.item},St.a.createElement("img",{className:e.image,src:io}),St.a.createElement("div",{className:e.step},"2"),St.a.createElement(_t.ad,{size:Et.ib.TEXT_SMALL},"В списке способов оплаты выберите QIWI"," ","Кошелек.")),St.a.createElement("div",{className:e.item},St.a.createElement("img",{className:e.image,src:ao}),St.a.createElement("div",{className:e.step},"3"),St.a.createElement(_t.ad,{size:Et.ib.TEXT_SMALL},"Введите номер телефона и оплатите покупку с баланса кошелька."))),t.siteUrl?St.a.createElement("div",{className:e.link},St.a.createElement(_t.hc,{href:t.siteUrl},"Перейти на ",t.shortName)):null)},s.__decorate([Object(vt.resolve)(i.Store)],Foreign.prototype,"store",void 0),Foreign=s.__decorate([Object(Et.rb)(oo)],Foreign)}(Et.bb),co={self:s.__assign({},Object(Ft.l)(),Object(Ft.p)("all"),{display:"block",textDecoration:"none",color:Ft.r.linkColor,cursor:"pointer",lineHeight:1.31,width:"100%",textAlign:"center",padding:[24,44],fontWeight:500,$hover:{color:Ft.r.linkColorHover,boxShadow:[0,2,15,0,Object(Ft.k)(Ft.r.baseColor,.1)],outline:"none"},$focus:{color:Ft.r.linkColorHover,boxShadow:[0,2,15,0,Object(Ft.k)(Ft.r.baseColor,.1)],outline:"none"},$active:{color:Ft.r.linkColorHover},backgroundColor:Ft.r.whiteColor,borderRadius:10})},lo=function(e){function BlockLink(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(BlockLink,e),BlockLink=s.__decorate([Object(Et.rb)(co)],BlockLink)}(_t.yd),uo=function(e){function Info(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Info,e),Info.prototype.render=function(){var e=this.store.provider;return St.a.createElement(_t.nb,null,St.a.createElement(_t.pb,{width:"1"},St.a.createElement(_t.n,null)),St.a.createElement(_t.pb,{width:"7"},St.a.createElement(_t.u,null,St.a.createElement(jt,null),St.a.createElement(_t.w,{lineTop:!0},St.a.createElement(so,null)))),e.siteUrl?St.a.createElement(_t.pb,{width:"4"},St.a.createElement(lo,{href:e.siteUrl},"Перейти на ",e.shortName)):null)},s.__decorate([Object(vt.resolve)(i.Store)],Info.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],Info.prototype,"user",void 0),Info=s.__decorate([gt.observer],Info)}(St.a.Component),mo={self:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},image:{width:96,height:96,marginRight:25,borderRadius:10,border:[1,"solid",Object(Pt.rgba)(Ft.r.baseColor,.14)]},text:s.__assign({width:"80%"},Ft.o)},po=function(e){function ConfirmationGreeting(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ConfirmationGreeting,e),ConfirmationGreeting.prototype.render=function(){var e=this.props.classes;return this.store.greeting?bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement("div",{className:e.self},bt.createElement("img",{src:this.store.chosenGreetingCard.promo.href,className:e.image}),bt.createElement("div",{className:e.text},bt.createElement(_t.Qd,null,"Открытка"),this.store.comment.get()?bt.createElement(_t.oc,null,this.store.comment.get()):null))):null},s.__decorate([Object(vt.resolve)(i.Store)],ConfirmationGreeting.prototype,"store",void 0),ConfirmationGreeting=s.__decorate([Object(Et.rb)(mo),gt.observer],ConfirmationGreeting)}(Et.bb),ho={self:{},input:{width:200},actions:{display:"flex",flexDirection:"row",alignItems:"center",height:65},item:{marginRight:20},text:s.__assign({display:"block",marginTop:5},Object(Ft.g)(10)),link:s.__assign({color:"#282828",padding:0,fontSize:14,lineHeight:1.29,opacity:.7},Object(Ft.g)(25))},fo=function(e){function ConfirmationActions(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ConfirmationActions,e),ConfirmationActions.prototype.render=function(){var t=this,e=this.props.classes;return bt.createElement(_t.Id,null,bt.createElement("div",{className:e.input},bt.createElement(_t.Dc,{autoFocus:!0,placeholder:"Код подтверждения",value:this.store.sms,mask:Object(Et.qb)("dddddd"),error:this.store.smsErrors.get("sms"),onChange:Object(Et.kb)(function(e){return t.store.changeSmsValue(e)})})),bt.createElement("div",{className:e.actions},bt.createElement("div",{className:e.item},bt.createElement(_t.b,{loading:this.store.submitConfirmationLoading,text:"Продолжить"})),bt.createElement("div",null,this.store.smsRemain<=0?bt.createElement("div",null,bt.createElement("div",{className:e.text},bt.createElement(_t.Vc,null,"Не пришел код?")),bt.createElement("span",{className:e.link},bt.createElement(_t.hc,{onClick:Object(Et.lb)(function(){return t.store.resendSms()})},"Прислать повторно"))):this.store.smsRemain<=this.store.timerStartsAt?bt.createElement("div",null,bt.createElement("div",{className:e.text},bt.createElement(_t.Vc,null,"Не пришел код?")),bt.createElement("span",{className:e.link},"Отправить еще раз можно через ",this.store.smsRemain," сек...")):bt.createElement("div",null,bt.createElement("span",{className:e.link},"Код отправлен на номер ",this.user.maskedId)))))},s.__decorate([Object(vt.resolve)(i.Store)],ConfirmationActions.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],ConfirmationActions.prototype,"user",void 0),ConfirmationActions=s.__decorate([Object(Et.rb)(ho),gt.observer],ConfirmationActions)}(Et.bb),yo={self:{},info:{display:"flex"},hint:{marginLeft:6}},bo=r(1606),So=r(1607),go=r(1608),vo=function(e){function SmsBlock(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(SmsBlock,e),SmsBlock.prototype.render=function(){var e=this.props.classes;return bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(_t.Id,null,bt.createElement("div",{className:e.info},bt.createElement(_t.oc,null,"На ваш телефон отправлено сообщение ",bt.createElement("br",null),"с кодом подтверждения"),bt.createElement("div",{className:e.hint},this.store.pushConfirmation?bt.createElement(_t.rd,{imageLeft:bt.createElement("img",{src:bo,srcSet:So+" 2x, "+go+" 3x"}),position:_t.Pb.RIGHT_BOTTOM},bt.createElement(_t.re,null,"Код отправлен уведомлением на смартфон"),bt.createElement(_t.oc,null,"Теперь коды подтверждения будут приходить ",bt.createElement("br",null),"на экран вашего смартфона или планшета. ",bt.createElement("br",null),"Это быстрее, чем по SMS."),bt.createElement(_t.oc,null,"Если не приходит, нажмите «Прислать повторно» ",bt.createElement("br",null),"и получите код в SMS. Проверьте, что ",bt.createElement("br",null),"push-уведомления включены в настройках ",bt.createElement("br",null),"устройства и приложения.")):null)),bt.createElement(fo,null)))},s.__decorate([Object(vt.resolve)(i.Store)],SmsBlock.prototype,"store",void 0),SmsBlock=s.__decorate([Object(Et.rb)(yo),gt.observer],SmsBlock)}(Et.bb),_o=function(e){function ConfirmationSmsCheck(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ConfirmationSmsCheck,e),ConfirmationSmsCheck.prototype.render=function(){var e=this;return bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(_t.yb,{show:!!this.store.error},this.store.error?bt.createElement(_t.Fb,{title:"Ошибка платежа",code:this.store.error.code,message:this.store.error.message,actions:[bt.createElement(_t.hc,{onClick:Object(Et.lb)(this.store.identificationError?function(){return e.store.submitPaymentErrorGoToIdentificationForm()}:this.store.blockedError?function(){return e.store.submitPaymentErrorGoToBlock()}:function(){return e.store.submitPaymentErrorCheck()}),children:this.store.identificationError?"Указать данные":this.store.blockedError?"Подробнее об ограничении":"Проверить данные"}),bt.createElement(_t.hc,{onClick:Object(Et.lb)(function(){return e.store.submitPaymentErrorGoToIndexPage()}),children:"Вернуться на главную"})]}):null),bt.createElement(_t.Sb,null,bt.createElement(_t.b,{loading:this.store.submitPaymentLoading,text:"Подтвердить",onClick:function(){return e.store.confirmPayment()}}),bt.createElement(_t.f,{text:"Изменить данные",onClick:function(){return e.store.editPayment()},disabled:this.store.submitPaymentLoading})))},s.__decorate([Object(vt.resolve)(i.Store)],ConfirmationSmsCheck.prototype,"store",void 0),ConfirmationSmsCheck=s.__decorate([gt.observer],ConfirmationSmsCheck)}(bt.Component),Eo=function(e){function ScheduledInfo(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ScheduledInfo,e),ScheduledInfo.prototype.render=function(){return this.store.scheduled&&(this.store.scheduledSuccess||this.store.step!==se.a.RESULT_SUCCESS)?bt.createElement(Gr.h,{interval:this.store.favoriteSchedule.get(),sum:this.store.amountSum}):null},s.__decorate([Object(vt.resolve)(i.Store)],ScheduledInfo.prototype,"store",void 0),ScheduledInfo=s.__decorate([gt.observer],ScheduledInfo)}(bt.Component),Fo=function(e){function ScheduledAuto(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ScheduledAuto,e),ScheduledAuto.prototype.render=function(){return this.store.scheduled&&(this.store.scheduledSuccess||this.store.step!==se.a.RESULT_SUCCESS)?bt.createElement(Gr.d,null):null},s.__decorate([Object(vt.resolve)(i.Store)],ScheduledAuto.prototype,"store",void 0),ScheduledAuto=s.__decorate([gt.observer],ScheduledAuto)}(bt.Component),Po={self:{},row:{marginBottom:15},item:s.__assign({display:"inline-block",width:"50%",verticalAlign:"top"},Ft.o,{$firstChild:{paddingRight:20}})},Co=function(e){function ConfirmationPaymentInfo(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ConfirmationPaymentInfo,e),ConfirmationPaymentInfo.prototype.render=function(){var r=this.props.classes;return bt.createElement(_t.w,{accented:!0},bt.createElement(_t.Id,null,bt.createElement(_t.h,null,"Проверьте и подтвердите платеж"),bt.createElement(_t.Gd,null,this.store.userFilledFields.map(function(e,t){return bt.createElement("div",{className:r.row,key:t},bt.createElement("div",{className:r.item},e.title),bt.createElement("div",{className:r.item},e.value))}),this.store.comment.get()&&!this.store.greeting?bt.createElement("div",{className:r.row},bt.createElement("div",{className:r.item},"Комментарий"),bt.createElement("div",{className:r.item},this.store.comment.get())):null,bt.createElement("div",null,bt.createElement("div",{className:r.item},"Сумма"),bt.createElement("div",{className:r.item},this.store.amountSum.toString())),bt.createElement("div",null,bt.createElement("div",{className:r.item},"Комиссия"),bt.createElement("div",{className:r.item},this.store.commissionSum.toString())))),bt.createElement(Eo,null),bt.createElement(Fo,null))},s.__decorate([Object(vt.resolve)(i.Store)],ConfirmationPaymentInfo.prototype,"store",void 0),ConfirmationPaymentInfo=s.__decorate([Object(Et.rb)(Po),gt.observer],ConfirmationPaymentInfo)}(Et.bb),Oo=function(e){function ConfirmationSms(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ConfirmationSms,e),ConfirmationSms.prototype.render=function(){var e=this;return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"}," "),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(_t.s,{onSubmit:function(){return e.store.submitSms()}},bt.createElement(jt,null),bt.createElement(Co,null),bt.createElement(po,null),this.store.isConfirmation?bt.createElement(vo,null):bt.createElement(_o,null)))),bt.createElement(_t.pb,{width:"4"}," "))},s.__decorate([Object(vt.resolve)(i.Store)],ConfirmationSms.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],ConfirmationSms.prototype,"user",void 0),ConfirmationSms=s.__decorate([gt.observer],ConfirmationSms)}(bt.Component),Io=function(e){function ConfirmationAcquiring(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ConfirmationAcquiring,e),ConfirmationAcquiring.prototype.render=function(){return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"}," "),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0},bt.createElement(_t.Fd,null,bt.createElement(_t.Ub,null,bt.createElement(_t.h,null,"Код подтверждения"),bt.createElement(_t.Yd,null)),bt.createElement(_t.Vc,null,"Сейчас откроется страница банка, где нужно",bt.createElement("br",null),"будет ввести код подтверждения из SMS."))))),bt.createElement(_t.pb,{width:"4"}," "))},ConfirmationAcquiring}(bt.Component),jo=function(e){function Loading(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Loading,e),Loading.prototype.render=function(){return bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(_t.h,null,"Регулярный платеж создается…"),bt.createElement(Eo,null),bt.createElement(Fo,null))},s.__decorate([Object(vt.resolve)(i.Store)],Loading.prototype,"store",void 0),Loading=s.__decorate([gt.observer],Loading)}(bt.Component),wo={self:{},input:{width:220},actions:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",height:65},item:{width:220,marginRight:20,$lastChild:{marginRight:0}},text:s.__assign({display:"block",marginTop:5},Object(Ft.g)(10)),link:s.__assign({color:"#282828",padding:0,fontSize:14,lineHeight:1.29,opacity:.7},Object(Ft.g)(25))},To=function(e){function SmsBlock(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(SmsBlock,e),SmsBlock.prototype.render=function(){var t=this,e=this.props.classes;return bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(_t.s,{onSubmit:function(){return t.store.submitFavoriteSms()}},bt.createElement(_t.Id,null,bt.createElement(_t.h,null,"Подтверждение создания регулярного платежа"),bt.createElement(Eo,null),bt.createElement(Gr.d,null),bt.createElement(_t.oc,null,"На ваш телефон отправлено сообщение ",bt.createElement("br",null),"с кодом подтверждения"),bt.createElement("div",{className:e.input},bt.createElement(_t.Dc,{autoFocus:!0,placeholder:"Код подтверждения",value:this.store.sms,mask:Object(Et.qb)("dddddd"),error:this.store.smsErrors.get("sms"),onChange:Object(Et.kb)(function(e){return t.store.changeSmsValue(e)})})),bt.createElement("div",{className:e.actions},bt.createElement("div",{className:e.item},bt.createElement(_t.a,{loading:this.store.submitConfirmationLoading,text:"Подтвердить"})),bt.createElement("div",{className:e.item},this.store.smsRemain<=0?bt.createElement("div",null,bt.createElement("div",{className:e.text},bt.createElement(_t.Vc,null,"Не пришел код?")),bt.createElement("span",{className:e.link},bt.createElement(_t.hc,{onClick:Object(Et.lb)(function(){return t.store.resendFavoriteSms()})},"Прислать повторно"))):this.store.smsRemain<=113?bt.createElement("div",null,bt.createElement("div",{className:e.text},bt.createElement(_t.Vc,null,"Не пришел код?")),bt.createElement("span",{className:e.link},"Отправить еще раз можно через ",this.store.smsRemain," сек...")):bt.createElement("div",null,bt.createElement("span",{className:e.link},"Код отправлен на номер ",this.user.maskedId)))))))},s.__decorate([Object(vt.resolve)(i.Store)],SmsBlock.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],SmsBlock.prototype,"user",void 0),SmsBlock=s.__decorate([Object(Et.rb)(wo),gt.observer],SmsBlock)}(Et.bb),Ro=function(e){function ResultError(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultError,e),ResultError.prototype.render=function(){var e=this;return bt.createElement(_t.w,{accented:!0,lineTop:!0,icon:bt.createElement(_t.Gb,null)},bt.createElement(_t.h,null,"Регулярный платеж не запланирован"),bt.createElement(_t.oc,null,this.store.scheduledError.message),this.store.favoriteAvailable&&this.store.resultFavoriteAvailable?bt.createElement(_t.oc,null,bt.createElement(_t.De,null,bt.createElement(_t.Td,{onClick:function(){return e.store.retrySchedule()}},"Запланировать заново"))):null)},s.__decorate([Object(vt.resolve)(i.Store)],ResultError.prototype,"store",void 0),ResultError=s.__decorate([gt.observer],ResultError)}(bt.Component),xo=function(e){function ResultSuccess(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultSuccess,e),ResultSuccess.prototype.render=function(){return bt.createElement(_t.w,{accented:!0,lineTop:!0,icon:bt.createElement(_t.de,null)},bt.createElement(_t.h,null,"Регулярный платеж запланирован"),bt.createElement(Eo,null),bt.createElement(Fo,null))},s.__decorate([Object(vt.resolve)(i.Store)],ResultSuccess.prototype,"store",void 0),ResultSuccess=s.__decorate([gt.observer],ResultSuccess)}(bt.Component),Ao=function(e){function FavoriteIndex(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(FavoriteIndex,e),FavoriteIndex.prototype.render=function(){return this.store.scheduledSuccess&&this.store.step===se.a.RESULT_SUCCESS?null:this.store.createFavoriteLoading?bt.createElement(jo,null):this.store.scheduledAwaitingTransactionPayed?bt.createElement(jo,null):this.store.scheduledAwaitingSmsConfirmation?bt.createElement(To,null):this.store.scheduledError?bt.createElement(Ro,null):this.store.scheduledActive?bt.createElement(xo,null):null},s.__decorate([Object(vt.resolve)(i.Store)],FavoriteIndex.prototype,"store",void 0),FavoriteIndex=s.__decorate([gt.observer],FavoriteIndex)}(bt.Component),No={self:{},info:{},infoItem:s.__assign({},Ft.o,{marginTop:14})},ko=function(e){function WaitingInitial(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(WaitingInitial,e),WaitingInitial.prototype.render=function(){var e=this.props.classes;return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"}," "),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0,icon:bt.createElement(_t.Fe,null)},bt.createElement(_t.h,null,"Платеж проводится…"),bt.createElement("div",{className:e.info},bt.createElement("div",{className:e.infoItem},bt.createElement(_t.oc,null,"Платёж на ",this.store.amountSum.toString(),0!==this.store.commissionSum.amount?", комиссия "+this.store.commissionSum.toString():null)),bt.createElement("div",{className:e.infoItem},bt.createElement(_t.oc,null,"Вы получите квитанцию после успешного платежа.")))),bt.createElement(Ao,null))),bt.createElement(_t.pb,{width:"4"}," "))},s.__decorate([Object(vt.resolve)(i.Store)],WaitingInitial.prototype,"store",void 0),WaitingInitial=s.__decorate([Object(Et.rb)(No),gt.observer],WaitingInitial)}(Et.bb),Do={self:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},button:{display:"inline-block",marginRight:30},email:s.__assign({fontWeight:500},Ft.o),icon:{self:{width:18,height:18,marginRight:10},path:{fill:Ft.r.iconBaseColor}}},Lo=function(e){function ActionsVoucher(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ActionsVoucher,e),ActionsVoucher.prototype.render=function(){var e=this,t=this.props.classes,r=this.store.checkTransactionResult.getPaymentExtra("to_account");return bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(_t.Id,null,r?bt.createElement("div",null,bt.createElement("div",{className:t.email},bt.createElement(_t.oc,null,"Ваучер отправлен на почту: ",r.value)),bt.createElement("div",null,bt.createElement(_t.oc,null,"Чтобы посмотреть список ваших ваучеров, перейдите",bt.createElement("br",null),"в раздел «Перевести», выберите «QIWI Ваучеры»",bt.createElement("br",null),"и кликните на кнопку «Управлять»"))):bt.createElement("div",null,bt.createElement(_t.Qd,null,"Чтобы воспользоваться ваучером:"),bt.createElement(_t.Xc,null,bt.createElement(_t.Yc,null,"Перейдите в раздел «Перевести»"),bt.createElement(_t.Yc,null,"Выберите «QIWI Ваучеры»"),bt.createElement(_t.Yc,null,"Кликните на кнопку «Управлять»"),bt.createElement(_t.Yc,null,"Скопируйте код ваучера"),bt.createElement(_t.Yc,null,"Передайте его получателю."))),bt.createElement(_t.De,null,bt.createElement(_t.Td,{onClick:function(){return e.store.gotoManageVouchers()}},"Перейти к управлению ваучерами"))))},s.__decorate([Object(vt.resolve)(i.Store)],ActionsVoucher.prototype,"store",void 0),ActionsVoucher=s.__decorate([Object(Et.rb)(Do),gt.observer],ActionsVoucher)}(Et.bb),Vo=function(e){function Banner(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Banner,e),Banner.prototype.render=function(){return bt.createElement(_t.mb,{container:this.store.postPaidBanners})},s.__decorate([Object(vt.resolve)(i.Store)],Banner.prototype,"store",void 0),Banner=s.__decorate([gt.observer],Banner)}(bt.Component),Mo={warning:{marginBottom:25,position:"relative"},warningIcon:{position:"absolute",left:0,top:0,width:21},warningText:{paddingLeft:31},description:{marginBottom:24},fieldSet:{display:"flex",flexDirection:"row",flexWrap:"wrap"},fieldSetItem:{width:"50%",overflow:"visible",$firstChild:{paddingRight:20},$notFirstChild:{paddingLeft:10}},security:{position:"relative",paddingLeft:34},securityIcon:{position:"absolute",left:0,top:0},securityText:{color:"#282828",padding:0,fontSize:13,lineHeight:1.31,opacity:.7}},Bo=function(e){function IdentificationFormData(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormData,e),IdentificationFormData.prototype.render=function(){var t=this,e=this.props.classes;return bt.createElement(_t.s,{onSubmit:function(){return t.store.submitIdentification()}},bt.createElement(_t.pc,null,"Укажите свои данные для идентификации"),bt.createElement("div",{className:e.description},bt.createElement(_t.oc,null,"Укажите свои данные ― это необходимо по закону 115-ФЗ. Согласно п. 3 ч. 1 ст. 7 115-ФЗ, мы обязаны идентифицировать пользователей.")),this.store.loadingIdentification?bt.createElement(xt,null):bt.createElement(_t.Md,null,bt.createElement(_t.Gd,null,bt.createElement(_t.oe,{value:this.store.identification.lastName,title:"Фамилия",onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("lastName",e)}),onFocus:function(){return t.store.onFieldFocus("lastName")},onBlur:function(){return t.store.onFieldBlur("lastName")},error:this.store.identificationVisibleDataErrors.get("lastName")}),bt.createElement(_t.oe,{value:this.store.identification.firstName,title:"Имя",onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("firstName",e)}),onFocus:function(){return t.store.onFieldFocus("firstName")},onBlur:function(){return t.store.onFieldBlur("firstName")},error:this.store.identificationVisibleDataErrors.get("firstName")}),bt.createElement(_t.oe,{value:this.store.identification.middleName,title:"Отчество",help:"Если есть",onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("middleName",e)}),onFocus:function(){return t.store.onFieldFocus("middleName")},onBlur:function(){return t.store.onFieldBlur("middleName")},error:this.store.identificationVisibleDataErrors.get("middleName")}),bt.createElement("div",{className:e.fieldSet},bt.createElement("div",{className:e.fieldSetItem},bt.createElement(_t.vb,{value:this.store.identification.birthDate,title:"Дата рождения",onChange:function(e){return t.store.setIdentificationValue("birthDate",e)},onFocus:function(){return t.store.onFieldFocus("birthDate")},onBlur:function(){return t.store.onFieldBlur("birthDate")},error:this.store.identificationVisibleDataErrors.get("birthDate")}))),bt.createElement("div",{className:e.fieldSet},bt.createElement("div",{className:e.fieldSetItem},bt.createElement(_t.Dc,{value:this.store.identification.passport,title:"Серия и номер паспорта",mask:Object(Et.qb)("dddd dddddd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("passport",e)}),onFocus:function(){return t.store.onFieldFocus("passport")},onBlur:function(){return t.store.onFieldBlur("passport")},error:this.store.identificationVisibleDataErrors.get("passport")}))),this.store.identificationNeedCheck?bt.createElement("div",{className:e.warning},bt.createElement("div",{className:e.warningIcon},bt.createElement(_t.Le,null)),bt.createElement("div",{className:e.warningText},bt.createElement(_t.oc,null,"Ваши данные не прошли проверку. Проверьте их ещё раз.",bt.createElement("br",null),"Если все верно, нажмите «Мои данные верны. Продолжить»."))):null),bt.createElement(_t.Sb,null,bt.createElement(_t.b,null,this.store.identificationNeedCheck?"Мои данные верны. Продолжить":"Пройти идентификацию")),bt.createElement("div",{className:e.security},bt.createElement("div",{className:e.securityIcon},bt.createElement(_t.Sd,null)),bt.createElement("div",{className:e.securityText},bt.createElement(_t.Vc,null,"КИВИ Банк (АО) обеспечивает безопасность ваших данных",bt.createElement("br",null),"в соответствии со своей Политикой конфиденциальности")))))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationFormData.prototype,"store",void 0),IdentificationFormData=s.__decorate([Object(Et.rb)(Mo),gt.observer],IdentificationFormData)}(Et.bb),Go={self:{},tabContent:{display:"flex"},field:{flexGrow:1,padding:[10,15,10,0],paddingLeft:0},actions:{flexShrink:0,padding:[10,0,10,15]},security:{position:"relative",paddingLeft:34},securityIcon:{position:"absolute",left:0,top:0},securityText:{color:"#282828",padding:0,fontSize:13,lineHeight:1.31,opacity:.7}},qo=function(e){function IdentificationFormDocs(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormDocs,e),IdentificationFormDocs.prototype.render=function(){var t=this;if(this.store.loadingIdentification)return bt.createElement(xt,null);var e=this.props.classes,r=bt.createElement("div",{className:e.actions},bt.createElement(_t.Tb,null,bt.createElement(_t.Hc,{children:"Подтвердить"}),bt.createElement(_t.Lc,{children:"Назад",onClick:function(){return t.store.resetIdentificationStep()}})));return bt.createElement(_t.s,{onSubmit:function(){return t.store.confirmIdentification()}},bt.createElement(_t.pc,null,"Подтвердите данные"),bt.createElement(_t.Md,null,bt.createElement("div",null,bt.createElement(_t.oc,null,"В соответствии с законодательством РФ, введенные данные нужно подтвердить в государственной базе."),bt.createElement(_t.oc,null,"Для этого укажите номер одного из этих документов: ИНН, полис ОМС или СНИЛС.")),bt.createElement(_t.F,{selected:this.store.identificationDocsTab,onChange:function(e){return t.store.setIdentificationDocsTab(e)},items:[{title:"ИНН",content:bt.createElement("div",{className:e.tabContent},bt.createElement("div",{className:e.field},bt.createElement(_t.Dc,{value:this.store.identification.inn,title:"ИНН",mask:Object(Et.qb)("dddddddddddd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("inn",e)}),onFocus:function(){return t.store.onFieldFocus("inn")},onBlur:function(){return t.store.onFieldBlur("inn")},error:this.store.identificationVisibleDocsErrors.get("inn")})),r)},{title:"СНИЛС",content:bt.createElement("div",{className:e.tabContent},bt.createElement("div",{className:e.field},bt.createElement(_t.Dc,{value:this.store.identification.snils,title:"СНИЛС",mask:Object(Et.qb)("ddd-ddd-ddd dd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("snils",e)}),onFocus:function(){return t.store.onFieldFocus("snils")},onBlur:function(){return t.store.onFieldBlur("snils")},error:this.store.identificationVisibleDocsErrors.get("snils")})),r)},{title:"Полис ОМС",content:bt.createElement("div",{className:e.tabContent},bt.createElement("div",{className:e.field},bt.createElement(_t.Dc,{value:this.store.identification.oms,title:"Полис ОМС",mask:Object(Et.qb)("dddd dddd dddd dddd"),onChange:Object(Et.kb)(function(e){return t.store.setIdentificationValue("oms",e)}),onFocus:function(){return t.store.onFieldFocus("oms")},onBlur:function(){return t.store.onFieldBlur("oms")},error:this.store.identificationVisibleDocsErrors.get("oms")})),r)}]}),bt.createElement("div",{className:e.security},bt.createElement("div",{className:e.securityIcon},bt.createElement(_t.Sd,null)),bt.createElement("div",{className:e.securityText},bt.createElement(_t.Vc,null,"КИВИ Банк (АО) обеспечивает безопасность ваших данных",bt.createElement("br",null),"в соответствии со своей Политикой конфиденциальности")))))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationFormDocs.prototype,"store",void 0),IdentificationFormDocs=s.__decorate([Object(Et.rb)(Go),gt.observer],IdentificationFormDocs)}(Et.bb),Uo=function(e){function AIdentificationFormSuccessConfettiItem(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(AIdentificationFormSuccessConfettiItem,e),AIdentificationFormSuccessConfettiItem.prototype.render=function(){var e=this.props,t=e.Icon,r=e.classes;return bt.createElement("div",{className:r.self},bt.createElement("div",{className:r.transforms},bt.createElement(t,null)))},AIdentificationFormSuccessConfettiItem}(Et.bb),Wo={self:{position:"absolute",width:35,height:35,left:"10%",top:157,animation:{name:"confetti",duration:8e3,delay:0,timingFunction:"ease",iterationCount:"infinite"}},transforms:{width:25,height:27,transform:"rotate(40deg)"}},zo={self:{position:"absolute",width:35,height:35,left:"16%",top:47,animation:{name:"confetti",duration:8e3,delay:-2e3,timingFunction:"ease",iterationCount:"infinite"}},transforms:{width:35,height:35,transform:"rotate(45deg)"}},Qo={self:{position:"absolute",width:35,height:35,left:"29%",top:117,animation:{name:"confetti",duration:8e3,delay:-500,timingFunction:"ease",iterationCount:"infinite"}},transforms:{width:28,height:48,transform:"rotate(-8deg)"}},Ho={self:{position:"absolute",width:35,height:35,right:"40%",top:24,animation:{name:"confetti",duration:8e3,delay:-3e3,timingFunction:"ease",iterationCount:"infinite"}},transforms:{width:25,height:27,transform:"rotate(60deg)"}},$o={self:{position:"absolute",width:35,height:35,right:"30%",top:134,animation:{name:"confetti",duration:8e3,delay:-6e3,timingFunction:"ease",iterationCount:"infinite"}},transforms:{width:19,height:19}},Yo={self:{position:"absolute",width:35,height:35,right:"21%",top:40,animation:{name:"confetti",duration:8e3,delay:-2500,timingFunction:"ease",iterationCount:"infinite"}},transforms:{width:28,height:48,transform:"rotate(2deg) scale(-1, 1)"}},Jo={self:{position:"absolute",width:35,height:35,right:"10%",top:134,animation:{name:"confetti",duration:8e3,delay:-3e3,timingFunction:"ease",iterationCount:"infinite"}},transforms:{width:25,height:27,transform:"rotate(5deg)"}},Ko={self:{position:"absolute",width:"100%",top:0,left:0,height:190,zIndex:0}},Xo=Object(Et.rb)(Wo)(Uo),Zo=Object(Et.rb)(zo)(Uo),en=Object(Et.rb)(Qo)(Uo),tn=Object(Et.rb)(Ho)(Uo),rn=Object(Et.rb)($o)(Uo),on=Object(Et.rb)(Yo)(Uo),nn=Object(Et.rb)(Jo)(Uo),an=function(e){function IdentificationFormSuccessConfetti(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormSuccessConfetti,e),IdentificationFormSuccessConfetti.prototype.render=function(){var e=this.props.classes;return bt.createElement("div",{className:e.self},bt.createElement(Xo,{Icon:_t.kb}),bt.createElement(Zo,{Icon:_t.jb}),bt.createElement(en,{Icon:_t.ib}),bt.createElement(tn,{Icon:_t.kb}),bt.createElement(rn,{Icon:_t.hb}),bt.createElement(on,{Icon:_t.ib}),bt.createElement(nn,{Icon:_t.kb}))},IdentificationFormSuccessConfetti=s.__decorate([Object(Et.rb)(Ko)],IdentificationFormSuccessConfetti)}(Et.bb),sn={self:{margin:[25,0,30],textAlign:"center"},text:{position:"relative"},progress:{margin:[80,0,30],whiteSpace:"nowrap",textAlign:"center",width:"100%"},progressIcon:{verticalAlign:"middle",display:"inline-block",width:128},progressArrow:{verticalAlign:"middle",display:"inline-block",margin:[0,44],width:52}},cn=function(e){function IdentificationFormSuccess(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(IdentificationFormSuccess,e),IdentificationFormSuccess.prototype.render=function(){var e=this.props.classes;return bt.createElement("div",{className:e.self},bt.createElement(an,null),bt.createElement("div",{className:e.text},bt.createElement(_t.gb,null,"Вы получили статус",bt.createElement("br",null),this.store.identification.level===tt.a.SIMPLE?"«Основной ограниченный»":"«Основной»")),bt.createElement("div",{className:e.progress},bt.createElement("div",{className:e.progressIcon},bt.createElement(_t.Wb,{level:tt.a.ANONYMOUS})),bt.createElement("div",{className:e.progressArrow},bt.createElement(_t.k,null)),this.store.identification.level===tt.a.SIMPLE?bt.createElement("div",{className:e.progressIcon},bt.createElement(_t.Wb,{level:tt.a.SIMPLE})):bt.createElement("div",{className:e.progressIcon},bt.createElement(_t.Wb,{level:tt.a.VERIFIED}))))},s.__decorate([Object(vt.resolve)(i.Store)],IdentificationFormSuccess.prototype,"store",void 0),IdentificationFormSuccess=s.__decorate([Object(Et.rb)(sn)],IdentificationFormSuccess)}(Et.bb),ln=((Je={})[et.a.FORM]=Bo,Je[et.a.CONFIRM]=qo,Je[et.a.SUCCESS]=cn,Je),un=function(e){function ResultIdentification(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultIdentification,e),ResultIdentification.prototype.render=function(){var e=ln[this.store.identificationStep];return e&&this.store.postIdentificationRequired?bt.createElement(_t.u,null,bt.createElement(_t.w,{accented:!0},bt.createElement(e,null))):null},s.__decorate([Object(vt.resolve)(i.Store)],ResultIdentification.prototype,"store",void 0),ResultIdentification=s.__decorate([gt.observer],ResultIdentification)}(bt.Component),mn={self:{marginTop:45,textAlign:"center"}},dn=function(e){function HomeLink(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(HomeLink,e),HomeLink.prototype.render=function(){var e=this,t=this.props.classes;return bt.createElement("div",{className:t.self},bt.createElement(_t.hc,{onClick:Object(Et.lb)(function(){return e.store.goToMain()}),children:"Вернуться на главную"}))},s.__decorate([Object(vt.resolve)(i.Store)],HomeLink.prototype,"store",void 0),HomeLink=s.__decorate([Object(Et.rb)(mn)],HomeLink)}(Et.bb),pn=function(e){function ResultSuccessContentVoucher(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultSuccessContentVoucher,e),ResultSuccessContentVoucher.prototype.render=function(){var e=this.store.checkTransactionResult;return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"7",offset:"1"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0,icon:bt.createElement(_t.de,null)},bt.createElement(_t.h,null,"Вы приобрели QIWI ваучер"),bt.createElement(_t.oc,null,"Сумма ваучера: ",e.sum.amount," ",e.sum.currency.symbol),bt.createElement(Eo,null),bt.createElement(Fo,null)),bt.createElement(Ao,null),bt.createElement(Lo,null)),bt.createElement(Vo,null),bt.createElement(un,null),bt.createElement(dn,null)))},s.__decorate([Object(vt.resolve)(i.Store)],ResultSuccessContentVoucher.prototype,"store",void 0),ResultSuccessContentVoucher=s.__decorate([gt.observer],ResultSuccessContentVoucher)}(bt.Component),hn={self:{},link:{display:"inline-block"},email:s.__assign({},Ft.o,{fontWeight:500})},fn=function(e){function WaitingActions(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(WaitingActions,e),WaitingActions.prototype.render=function(){var e=this,t=this.props.classes,r=this.store.checkTransactionResult,o=this.store.maskedEmail;return o?bt.createElement("div",{className:t.self},bt.createElement(_t.Gd,null,bt.createElement(_t.oc,null,"Вы можете закрыть страницу. Когда платеж будет проведен, вы получите квитанцию на почту"," ",bt.createElement("span",{className:t.email},o)),bt.createElement("span",{className:t.link},bt.createElement(_t.e,{onClick:function(){return e.store.showCheque(r)},children:"Посмотреть информацию о платеже"})))):bt.createElement("div",{className:t.self},bt.createElement(_t.Id,null,bt.createElement(_t.Fd,null,bt.createElement(_t.oc,null,"Иногда на платеж нужно больше времени."),bt.createElement(_t.oc,null,"Укажите электронную почту - на нее придет квитанция,",bt.createElement("br",null),"когда платеж будет проведен.")),bt.createElement(_t.Ub,null,bt.createElement(_t.Td,{loading:this.store.chequeEmailSending,onClick:function(){e.store.chequeEmailSending||e.store.showSendCheque(r)},children:"Указать почту"}),bt.createElement(_t.e,{onClick:function(){return e.store.showCheque(r)},children:"Посмотреть информацию о платеже"}))))},s.__decorate([Object(vt.resolve)(i.Store)],WaitingActions.prototype,"store",void 0),WaitingActions=s.__decorate([Object(Et.rb)(hn),gt.observer],WaitingActions)}(Et.bb),yn=function(e){function WaitingQueue(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(WaitingQueue,e),WaitingQueue.prototype.render=function(){var e=this.props.classes,t=this.store.checkTransactionResult;return 22496===t.provider.id?bt.createElement(pn,null):bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"}," "),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0,noBottom:!0,icon:bt.createElement(_t.Fe,null)},bt.createElement(_t.h,null,"Платеж проводится…")),t?bt.createElement("div",null,bt.createElement(_t.w,{accented:!0,noTop:!0},bt.createElement("div",{className:e.info},bt.createElement("div",{className:e.infoItem},bt.createElement(_t.oc,null,"Платеж №",t.trmTxnId," на ",t.sum.toString(),0!==t.commission.amount?", комиссия "+t.commission.toString():null)),bt.createElement("div",{className:e.infoItem},bt.createElement(_t.oc,null,"Квитанция будет доступна после успешного проведения платежа.")))),this.user.authorized?null:bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(fn,null))):null,bt.createElement(Ao,null))),bt.createElement(_t.pb,{width:"4"}," "))},s.__decorate([Object(vt.resolve)(i.Store)],WaitingQueue.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],WaitingQueue.prototype,"user",void 0),WaitingQueue=s.__decorate([Object(Et.rb)(No),gt.observer],WaitingQueue)}(Et.bb),bn=function(e){function Actions(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(Actions,e),Actions.prototype.render=function(){var e=this,t=this.props.classes,r=this.store.checkTransactionResult;return!this.store.scheduled&&this.store.favoriteAvailable&&this.store.resultFavoriteAvailable?bt.createElement(_t.w,{accented:!0,lineTop:!0,key:1},bt.createElement(_t.Md,null,bt.createElement(_t.Ub,null,bt.createElement(_t.Td,{icon:_t.Zd,text:"Сохранить в Избранное",onClick:function(){return e.store.saveFavoritePayment()}}),r&&r.features.chequeReady?bt.createElement(_t.e,{onClick:function(){return e.store.showSendCheque(r)}},"Прислать квитанцию на почту"):null),bt.createElement(_t.oc,null,"Квитанцию о совершенном платеже и подробные реквизиты платежа вы найдете в"," ",bt.createElement(_t.ye,{href:"/history",children:"истории платежей"}),"."))):bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement("div",{className:t.self},r&&r.features.chequeReady?bt.createElement("div",{className:t.button},bt.createElement(_t.Td,{onClick:function(){return e.store.showSendCheque(r)}},"Прислать квитанцию на почту")):null,bt.createElement(_t.oc,null,"Квитанцию о совершенном платеже и подробные реквизиты платежа вы найдете в"," ",bt.createElement(_t.ye,{href:"/history",children:"истории платежей"}),".")))},s.__decorate([Object(vt.resolve)(i.Store)],Actions.prototype,"store",void 0),Actions=s.__decorate([Object(Et.rb)(Do),gt.observer],Actions)}(Et.bb),Sn={self:{position:"absolute",top:0,left:0}},gn=function(e){function SuccessGreetingBackground(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(SuccessGreetingBackground,e),SuccessGreetingBackground.prototype.render=function(){var e=this.props.classes;return bt.createElement("svg",{width:"680",height:"221",className:e.self},bt.createElement("defs",null,bt.createElement("path",{id:"asgb",d:"M0 0h680v221H0z"})),bt.createElement("g",{fill:"none",fillRule:"evenodd"},bt.createElement("mask",{id:"bsgb",fill:"#fff"},bt.createElement("use",{xlinkHref:"#asgb"})),bt.createElement("path",{fill:"#E5E5E5",fillRule:"nonzero",d:"M437.897 175.386l-8.056-5.562a5 5 0 0 0-7.841 4.114v11.124a5 5 0 0 0 7.84 4.115l8.057-5.562a5 5 0 0 0 0-8.23zm43 0l-8.056-5.562a5 5 0 0 0-7.841 4.114v11.124a5 5 0 0 0 7.84 4.115l8.057-5.562a5 5 0 0 0 0-8.23zm-21.757.526l-8.261-5.817a5 5 0 0 0-7.879 4.088v11.634a5 5 0 0 0 7.879 4.088l8.26-5.817a5 5 0 0 0 0-8.176zM577 152c18.225 0 33-14.775 33-33s-14.775-33-33-33-33 14.775-33 33a6.594 6.594 0 1 0 13.189 0c0-10.942 8.87-19.811 19.811-19.811 10.942 0 19.811 8.87 19.811 19.811 0 10.942-8.87 19.811-19.811 19.811A6.594 6.594 0 1 0 577 152zM165 31c-18.778 0-34-15.222-34-34s15.222-34 34-34 34 15.222 34 34-15.222 34-34 34zm0-14.849c10.577 0 19.151-8.574 19.151-19.151S175.577-22.151 165-22.151 145.849-13.577 145.849-3 154.423 16.151 165 16.151z",mask:"url(#bsgb)"}),bt.createElement("path",{fill:"#7ED321",d:"M25.284 64.328V82.98a4 4 0 0 0 6.448 3.164l12.046-9.321a4 4 0 0 0 .002-6.326l-12.046-9.332a4 4 0 0 0-6.45 3.162zm7.68 3.594l5.354 4.147a2 2 0 0 1-.001 3.163l-5.355 4.142a2 2 0 0 1-3.223-1.582v-8.288a2 2 0 0 1 3.224-1.582z",mask:"url(#bsgb)",transform:"rotate(-15 35.307 73.654)"}),bt.createElement("path",{fill:"#FFCD00",fillRule:"nonzero",d:"M180.5 209c-8.008 0-14.5-6.492-14.5-14.5s6.492-14.5 14.5-14.5 14.5 6.492 14.5 14.5-6.492 14.5-14.5 14.5zm0-7.123a7.377 7.377 0 1 0 0-14.754 7.377 7.377 0 0 0 0 14.754z",mask:"url(#bsgb)"}),bt.createElement("path",{fill:"#FF2E2E",d:"M344.844 127.977l-.002-.002.002-.002a8 8 0 0 1 11.314.002l-.002.002 7.87 7.872a8 8 0 0 1-.002 11.313l-7.868 7.863a8 8 0 0 1-11.312 0l-.002.002-7.866-7.865a8 8 0 0 1-.002-11.313l7.87-7.872zm-3.9 11.407a3 3 0 0 0 .003 4.243l7.433 7.423a3 3 0 0 0 4.24 0l.002.002 7.431-7.425a3 3 0 0 0 .002-4.243l-7.433-7.44c0-.002-.001-.002-.002-.003a3 3 0 0 0-4.242.002l-7.434 7.441z",mask:"url(#bsgb)"})))},SuccessGreetingBackground=s.__decorate([Object(Et.rb)(Sn)],SuccessGreetingBackground)}(Et.bb),vn={self:s.__assign({},Ft.e.self()),container:{},backdrop:s.__assign({},Ft.e.backdrop(),{backgroundColor:Object(Pt.rgba)(Ft.r.whiteColor,.96)}),content:s.__assign({},Ft.e.content())},_n=function(e){function GreetingDialog(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(GreetingDialog,e),GreetingDialog.defaultProps={transition:_t.zb},GreetingDialog=s.__decorate([Object(Et.rb)(vn)],GreetingDialog)}(Et.i),En={self:{position:"relative",textAlign:"center"},card:{width:350,height:480,margin:[0,"auto"],border:[1,"solid",Object(Pt.rgba)(Ft.r.baseColor,.07)],borderRadius:10,boxShadow:[0,25,50,-8,Object(Pt.rgba)(Ft.r.baseColor,.1)],overflow:"hidden"},close:{position:"absolute",top:25,right:-35,cursor:"pointer"},closeIcon:{self:s.__assign({width:24,height:24,fill:Ft.r.baseColor,opacity:.6},Object(Ft.p)("opacity"),{$hover:{opacity:1}}),path:{}},image:{width:350,height:480},dummy:{borderRadius:10,padding:45,backgroundColor:Ft.r.whiteColor,width:350,height:483,display:"flex",flexDirection:"column",justifyContent:"center"},dummyContent:{textAlign:"center"},dummyIcon:s.__assign({},Object(Ft.j)(117,117,59),{margin:[0,"auto",65]}),dummyTitle:s.__assign({},Object(Ft.j)(116,13),{margin:[0,"auto",24]}),dummyText1:s.__assign({},Object(Ft.j)(191),{margin:[14,"auto"]}),dummyText2:s.__assign({},Object(Ft.j)(220),{margin:[14,"auto"]}),dummyText3:s.__assign({},Object(Ft.j)(141),{margin:[14,"auto"]})},Fn=function(e){function GreetingPopup(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(GreetingPopup,e),GreetingPopup.prototype.render=function(){var e=this,t=this.props.classes;return bt.createElement(_n,{show:this.store.shownSaveGreeting},bt.createElement("div",{className:t.self},bt.createElement("div",{className:t.close,onClick:function(){return e.store.showSaveGreetingCard(!1)}},bt.createElement(_t.fb,{classes:t.closeIcon})),bt.createElement(_t.Id,null,bt.createElement(_t.ob,null,"Открытка!"),bt.createElement(_t.Hd,null,bt.createElement("div",{className:t.card},this.store.greetingCardPreviewLoading?bt.createElement("div",{className:t.dummy},bt.createElement("div",{className:t.dummyContent},bt.createElement("div",{className:t.dummyIcon}),bt.createElement("div",{className:t.dummyTitle}),bt.createElement("div",{className:t.dummyText1}),bt.createElement("div",{className:t.dummyText2}),bt.createElement("div",{className:t.dummyText3}))):bt.createElement("img",{src:this.store.greetingCardPreview,className:t.image})),bt.createElement(_t.De,null,bt.createElement(_t.Td,{children:"Скачать открытку",onClick:function(){return e.store.downloadGreetingCard()}}))))))},s.__decorate([Object(vt.resolve)(i.Store)],GreetingPopup.prototype,"store",void 0),GreetingPopup=s.__decorate([Object(Et.rb)(En),gt.observer],GreetingPopup)}(Et.bb),Pn=function(e){function SuccessGreeting(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(SuccessGreeting,e),SuccessGreeting.prototype.render=function(){var e=this;return this.store.greeting?bt.createElement(_t.w,{accented:!0,lineTop:!0},bt.createElement(gn,null),bt.createElement(_t.Id,null,bt.createElement(_t.Gd,null,bt.createElement(_t.h,null,"Получатель увидит открытку в Истории платежей"),bt.createElement(_t.oc,null,"Вы также можете скачать открытку на память")),bt.createElement(_t.De,null,bt.createElement(_t.C,{children:"Скачать открытку",onClick:function(){return e.store.showSaveGreetingCard(!0)}}))),bt.createElement(Fn,null)):null},s.__decorate([Object(vt.resolve)(i.Store)],SuccessGreeting.prototype,"store",void 0),SuccessGreeting}(bt.Component),Cn={self:s.__assign({marginTop:15,marginBottom:15},Ft.o)},On=function(e){function PaymentInfo(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(PaymentInfo,e),PaymentInfo.prototype.render=function(){var e=this.props.classes,t=this.store.checkTransactionResult;return bt.createElement(_t.Gd,null,bt.createElement(_t.h,null,"Платеж проведен",this.store.scheduledSuccess?", регулярный платеж запланирован":""),bt.createElement("div",{className:e.self},bt.createElement(_t.oc,null,"Платёж №",t.trmTxnId," на ",t.sum.toString(),0!==t.commission.amount?", комиссия "+t.commission.toString():null)))},s.__decorate([Object(vt.resolve)(i.Store)],PaymentInfo.prototype,"store",void 0),PaymentInfo=s.__decorate([Object(Et.rb)(Cn),gt.observer],PaymentInfo)}(Et.bb),In=function(e){function ResultSuccess(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultSuccess,e),ResultSuccess.prototype.render=function(){return bt.createElement(_t.Hd,null,bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0,icon:bt.createElement(_t.de,null)},bt.createElement(On,null),bt.createElement(Eo,null),bt.createElement(Fo,null)),bt.createElement(Ao,null),bt.createElement(Pn,null),bt.createElement(bn,null)),bt.createElement(Vo,null),bt.createElement(un,null),bt.createElement(dn,null))},s.__decorate([Object(vt.resolve)(i.Store)],ResultSuccess.prototype,"store",void 0),ResultSuccess=s.__decorate([gt.observer],ResultSuccess)}(bt.Component),jn=function(e){function ActionsUnauth(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ActionsUnauth,e),ActionsUnauth.prototype.render=function(){var e=this,t=this.props.classes,r=this.store.checkTransactionResult;return this.store.emailSent?bt.createElement(_t.Id,null,bt.createElement(_t.oc,null,bt.createElement(_t.db,{classes:t.icon}),"Квитанция отправлена на почту"," ",bt.createElement("span",{className:t.email},this.store.maskedEmail)),bt.createElement("div",{className:t.button},bt.createElement(_t.Td,{onClick:function(){return e.store.showCheque(r)}},"Посмотреть квитанцию"))):bt.createElement(_t.Ub,null,bt.createElement(_t.Td,{loading:this.store.chequeEmailSending,onClick:function(){e.store.chequeEmailSending||e.store.showSendCheque(r)},children:"Отправить квитанцию на почту"}),bt.createElement(_t.e,{onClick:function(){return e.store.showCheque(r)},children:"Посмотреть квитанцию"}))},s.__decorate([Object(vt.resolve)(i.Store)],ActionsUnauth.prototype,"store",void 0),ActionsUnauth=s.__decorate([Object(Et.rb)(Do),gt.observer],ActionsUnauth)}(Et.bb),wn=function(e){function ResultUnauthBlock(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultUnauthBlock,e),ResultUnauthBlock.prototype.render=function(){var e=this;return bt.createElement(_t.u,null,bt.createElement(_t.w,{accented:!0},bt.createElement(_t.Jd,null,bt.createElement(_t.gb,null,"Чтобы два раза не вставать"),bt.createElement(_t.Ld,null,bt.createElement("div",null,bt.createElement(_t.Qd,null,"Оплатите другие услуги"),bt.createElement(_t.Hd,null,bt.createElement(_t.oc,null,"Мобильная связь, игры, кредиты, ЖКХ — и всё это в два клика."),bt.createElement(_t.Ub,null,bt.createElement(_t.Td,{onClick:function(){return e.store.goBack()}},"Выбрать услугу")))),bt.createElement("div",null,bt.createElement(_t.Qd,null,"Создайте QIWI Кошелек"),bt.createElement(_t.Hd,null,bt.createElement(_t.oc,null,"Комиссия меньше, а услуг больше.",bt.createElement("br",null),"Заведите кошелек по номеру телефона за 10 секунд."),bt.createElement(_t.Ub,null,bt.createElement(_t.C,{onClick:function(){return e.app.showSignUp()}},"Создать кошелек"))))))))},s.__decorate([Object(vt.resolve)(Cr.a)],ResultUnauthBlock.prototype,"app",void 0),s.__decorate([Object(vt.resolve)(i.Store)],ResultUnauthBlock.prototype,"store",void 0),ResultUnauthBlock}(bt.Component),Tn=function(e){function ResultSuccess(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultSuccess,e),ResultSuccess.prototype.render=function(){var e=this.store.maskedEmail?_t.Hd:_t.Id;return bt.createElement(_t.Hd,null,bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0,icon:bt.createElement(_t.de,null)},bt.createElement(e,null,bt.createElement(On,null),bt.createElement(jn,null)))),bt.createElement(wn,null),bt.createElement(Vo,null),bt.createElement(dn,null))},s.__decorate([Object(vt.resolve)(i.Store)],ResultSuccess.prototype,"store",void 0),ResultSuccess=s.__decorate([gt.observer],ResultSuccess)}(bt.Component),Rn=function(e){function ResultSuccess(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultSuccess,e),ResultSuccess.prototype.render=function(){return 22496===this.store.checkTransactionResult.provider.id?bt.createElement(pn,null):bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"7",offset:"1"},this.user.authorized?bt.createElement(In,null):bt.createElement(Tn,null)))},s.__decorate([Object(vt.resolve)(i.Store)],ResultSuccess.prototype,"store",void 0),s.__decorate([Object(vt.resolve)(i.User)],ResultSuccess.prototype,"user",void 0),ResultSuccess=s.__decorate([gt.observer],ResultSuccess)}(bt.Component),xn=function(e){function ResultError(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultError,e),ResultError.prototype.render=function(){var e=this;return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"}," "),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0,icon:bt.createElement(_t.Gb,null)},bt.createElement(_t.Gd,null,bt.createElement(_t.h,null,"Ошибка платежа"),this.store.scheduled?bt.createElement(_t.oc,null,"Платеж не был проведен и не был запланирован как регулярный."):this.store.error&&this.store.error.message?bt.createElement(_t.oc,null,this.store.error.message):bt.createElement(_t.oc,null,"Что-то пошло не так. Попробуйте повторить платеж."),bt.createElement(_t.Hd,null,bt.createElement(_t.Ub,null,bt.createElement(_t.hc,{onClick:Object(Et.lb)(function(){return e.store.retry()}),children:"Попробовать ещё раз"}),bt.createElement(_t.hc,{onClick:Object(Et.lb)(function(){return e.store.goToMain()}),children:"Вернуться на главную"}))))))),bt.createElement(_t.pb,{width:"4"}," "))},s.__decorate([Object(vt.resolve)(i.Store)],ResultError.prototype,"store",void 0),ResultError=s.__decorate([gt.observer],ResultError)}(bt.Component),An={self:{display:"flex",flexDirection:"row",justifyContent:"space-around"},item:{textAlign:"center"},description:{color:"#282828",padding:0,fontSize:14,lineHeight:1.29,opacity:.7}},Nn=function(e){function ResultMobile(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(ResultMobile,e),ResultMobile.prototype.render=function(){var e=this.props.classes;return bt.createElement(_t.nb,null,bt.createElement(_t.pb,{width:"1"}," "),bt.createElement(_t.pb,{width:"7"},bt.createElement(_t.u,null,bt.createElement(jt,null),bt.createElement(_t.w,{accented:!0,noBottom:!0},bt.createElement(_t.h,null,"Подтвердите платеж в телефоне"),bt.createElement(_t.oc,null,"Платеж на ",this.store.amountSum.toString(),", комиссия ",this.store.commissionSum.toString())),bt.createElement(_t.w,null,bt.createElement("div",{className:e.self},bt.createElement("div",{className:e.item},bt.createElement(_t.Pc,null),bt.createElement(_t.Vc,null,"1"),bt.createElement("div",{className:e.description},"Дождитесь SMS",bt.createElement("br",null),"от оператора")),bt.createElement("div",{className:e.item},bt.createElement(_t.Qc,null),bt.createElement(_t.Vc,null,"2"),bt.createElement("div",{className:e.description},"Подтвердите платеж,",bt.createElement("br",null),"следуя инструкции",bt.createElement("br",null),"из SMS")),bt.createElement("div",{className:e.item},bt.createElement(_t.Rc,null),bt.createElement(_t.Vc,null,"3"),bt.createElement("div",{className:e.description},"Деньги спишутся",bt.createElement("br",null),"только после",bt.createElement("br",null),"подтверждения")))),bt.createElement(bn,null))),bt.createElement(_t.pb,{width:"4"}," "))},s.__decorate([Object(vt.resolve)(i.Store)],ResultMobile.prototype,"store",void 0),ResultMobile=s.__decorate([Object(Et.rb)(An),gt.observer],ResultMobile)}(Et.bb),kn=((Ke={})[se.a.IDENTIFICATION_LOADING]=wt,Ke[se.a.IDENTIFICATION_REQUIRED]=Tt,Ke[se.a.IDENTIFICATION_FORM]=Gt,Ke[se.a.FORM]=ro,Ke[se.a.INFO]=uo,Ke[se.a.CONFIRMATION_SMS]=Oo,Ke[se.a.CONFIRMATION_ACQUIRING]=Io,Ke[se.a.WAITING_INITIAL]=ko,Ke[se.a.WAITING_QUEUE]=yn,Ke[se.a.RESULT_SUCCESS]=Rn,Ke[se.a.RESULT_ERROR]=xn,Ke[se.a.RESULT_MOBILE]=Nn,Ke),Dn=function(e){function PaymentFormPage(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(PaymentFormPage,e),PaymentFormPage.prototype.componentWillReact=function(){this.store.providerNotFound&&Object(b.i)("prerender-status-code",404)},PaymentFormPage.prototype.render=function(){if(this.store.providerNotFound)return bt.createElement(_t.Tc,null);var e=kn[this.store.step];return bt.createElement(_t.i,null,bt.createElement(_t.Ob,null),bt.createElement(_t.qc,null,bt.createElement(e,null),bt.createElement(_t.mb,{container:this.store.sendCheque})),bt.createElement(_t.Kb,null),bt.createElement(_t.mb,{container:this.store.auth}))},PaymentFormPage.status=200,s.__decorate([Object(vt.resolve)(i.Store)],PaymentFormPage.prototype,"store",void 0),PaymentFormPage=s.__decorate([gt.observer],PaymentFormPage)}(bt.Component),Ln=r(212);t.default=function(r){return function(e){var t=e.createChild();return t.bind(i.Store).to(yt).inSingletonScope(),t.bind(i.View).toConstructor(Dn),t.bind(i.Context).toConstantValue(Object(a.deserialize)(l,r)),t.bind("SendCheque").toConstantValue(Object(Ln.z)(t)),t.bind("PostPaidBanners").toConstantValue(Object(Ln.c)(t)),t}}}}]);