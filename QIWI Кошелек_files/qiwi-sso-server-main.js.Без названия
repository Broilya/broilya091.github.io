this["qiwi-sso-server-main"]=function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var r=e.slice(1),n=t[e[0]];return function(t,e,o){n.apply(this,[t,e,o].concat(r))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,r){r(84),t.exports=r(108)},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){"use strict";e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.__esModule=!0},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e){"use strict";function r(){return function(){}}e.__esModule=!0,e["default"]=r,r.enable=function(){},t.exports=e["default"]},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},[198,18,12,13],function(t,e,r){t.exports={"default":r(124),__esModule:!0}},[205,140,147,10],6,function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},4,function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},[192,26],function(t,e,r){var n=r(10),o=r(4),i=r(14),s="prototype",a=function(t,e,r){var u,c,f,l=t&a.F,h=t&a.G,p=t&a.S,d=t&a.P,v=t&a.B,m=t&a.W,g=h?o:o[e]||(o[e]={}),y=h?n:p?n[e]:(n[e]||{})[s];h&&(r=e);for(u in r)c=!l&&y&&u in y,c&&u in g||(f=c?y[u]:r[u],g[u]=h&&"function"!=typeof y[u]?r[u]:v&&c?i(f,n):m&&y[u]==f?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(f):d&&"function"==typeof f?i(Function.call,f):f,d&&((g[s]||(g[s]={}))[u]=f))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(6),o=r(12),i=r(33),s=r(71),a=r(31),u="prototype",c=function(t,e,r){var f,l,h,p,d=t&c.F,v=t&c.G,m=t&c.S,g=t&c.P,y=t&c.B,_=v?n:m?n[e]||(n[e]={}):(n[e]||{})[u],w=v?o:o[e]||(o[e]={}),b=w[u]||(w[u]={});v&&(r=e);for(f in r)l=!d&&_&&f in _,h=(l?_:r)[f],p=y&&l?a(h,n):g&&"function"==typeof h?a(Function.call,h):h,_&&!l&&s(_,f,h),w[f]!=h&&i(w,f,p),g&&b[f]!=h&&(b[f]=h)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,t.exports=c},[197,16],function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},[202,20],function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){"use strict";var n=r(117)["default"],o=r(118)["default"];e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=n(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o?o(t,e):t.__proto__=e)},e.__esModule=!0},[190,43],function(t,e){t.exports={}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},17,13,function(t,e,r){"use strict";function n(t,e){var r=e.match(t);return r&&r.length>1&&r[1]||""}function o(t,e){return/AdobeAIR/i.test(e)&&(t=t||{},t.name="AdobeAIR Browser",t.adobeAir=!0,t.version=n(/AdobeAIR\/(\d+(\.\d+)?)/i,e)),t}var i=r(1)["default"];e.__esModule=!0;var s=r(61),a=i(s),u="undefined"!=typeof navigator?navigator.userAgent:"";e["default"]=o(a["default"],u),t.exports=e["default"]},26,[192,30],[193,13],[195,35,36,32],function(t,e,r){var n=r(16);t.exports=Array.isArray||function(t){return"Array"==n(t)}},11,function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(20),o=Math.max,i=Math.min;t.exports=function(t,e){return t=n(t),0>t?o(t+e,0):i(t,e)}},[201,19,17],[203,17],function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(47),i=n(o),s=r(46),a=n(s),u=r(60),c=n(u),f=a["default"]({settings:window.settings||{},location:window.location,referrer:document.referrer});e["default"]=c["default"](i["default"],f),t.exports=e["default"]},function(t,e,r){"use strict";var n=r(116)["default"];e["default"]=n||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e.__esModule=!0},16,2,[203,27],function(t,e,r){"use strict";var n=r(3)["default"];r(8)["default"];e.__esModule=!0;var o=function(){function t(){n(this,t)}return t.prototype.load=function(){throw new Error("implement")},t.prototype.save=function(t){throw new Error("implement")},t}();e["default"]=o,t.exports=e["default"]},function(t,e){"use strict";function r(t){var e=t.settings,r=t.location,n=t.referrer,o=e.qiwi||{};return o.sso=o.sso||{},{env:{origin:r.origin,hash:r.hash,pathname:r.pathname,search:r.search,referrer:n},config:{fetcher:{authBaseUrl:o.sso.server}}}}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},function(t,e){t.exports={config:{debug:{enabled:!1,mask:"qiwi:*"},fetcher:{authBaseUrl:"https://auth.qiwi.com/auth"}}}},function(t,e){function r(t,e,r,n){return u=u||(document.addEventListener?{add:o,rm:i}:{add:s,rm:a}),u.add(t,e,r,n)}function n(t,e,r,n){return u=u||(document.addEventListener?{add:o,rm:i}:{add:s,rm:a}),u.rm(t,e,r,n)}function o(t,e,r,n){t.addEventListener(e,r,n)}function i(t,e,r,n){t.removeEventListener(e,r,n)}function s(t,e,r,n){if(n)throw new Error("cannot useCapture in oldIE");t.attachEvent("on"+e,r)}function a(t,e,r,n){t.detachEvent("on"+e,r)}r.removeEventListener=n,r.addEventListener=r,t.exports=r;var u=null},function(t,e,r){t.exports={"default":r(50),__esModule:!0}},function(t,e,r){r(56),t.exports=r(4).Object.keys},function(t,e,r){var n=r(42),o=r(9)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=(e=Object(t))[o])?r:i?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},[193,28],[195,11,98,52],[198,15,4,28],function(t,e,r){var n=r(11).setDesc,o=r(94),i=r(9)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){var n=r(44);r(54)("keys",function(t){return function(e){return t(n(e))}})},function(t,e,r){"use strict";var n=r(143)(!0);r(96)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){r(150);var n=r(25);n.NodeList=n.HTMLCollection=n.Array},function(t,e){"use strict";function r(t,e){return t.replace(/%(.*?)%/g,function(t,r){return e[r]||""})}function n(t,e,n){function o(t){if(!(this instanceof o))return new o(t);Error.call(this,arguments),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,"string"==typeof t?t={message:t}:(t=t||{},t.message=r(n,t)),this.name=t.name=e,this.message=t.message,t.stack=this.stack,this.__options=t;for(var i in t)"undefined"==typeof this[i]&&(this[i]=t[i])}if("function"!=typeof t)throw new TypeError("BaseErrorClass is not a function");if(!e||"string"!=typeof e)throw new TypeError("name is not a string - need exception class name");return o.prototype.name=e,o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.toJS=function(){return this.__options},o.prototype.toJSON=function(){return JSON.stringify(this.toJS())},o.ok=function(t,e){if(!t)throw new o(e)},o}n.map=function(t,e){if("function"!=typeof t)throw new TypeError("BaseErrorClass is not a function");if("object"!=typeof e)throw new TypeError("map is not an object hashmap");var r={};for(var o in e)r[o]=n(t,o,e[o]);return r},t.exports=n},function(t,e,r){"use strict";function n(t,e){for(var r=i(e),o=0,s=r.length;s>o;o++){var a=r[o],u=e[a];void 0!==u&&("object"==typeof u&&null!==u?Array.isArray(u)?t[a]=[].concat(u):(t[a]||(t[a]={}),n(t[a],u)):t[a]=u)}return t}function o(){for(var t=Array.prototype.slice.call(arguments),e={},r=0,o=t.length;o>r;r++)n(e,t[r]);return e}var i=r(49)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o,t.exports=e["default"]},function(t,e,r){var n,o;/*!
	  * Bowser - a browser detector
	  * https://github.com/ded/bowser
	  * MIT License | (c) Dustin Diaz 2015
	  */
!function(i,s){"undefined"!=typeof t&&t.exports?t.exports=s():(n=s,o="function"==typeof n?n.call(e,r,e,t):n,!(void 0!==o&&(t.exports=o)))}("bowser",function(){function t(t){function r(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function n(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var o,i=r(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(t),a=!s&&/android/i.test(t),u=/CrOS/.test(t),c=r(/edge\/(\d+(\.\d+)?)/i),f=r(/version\/(\d+(\.\d+)?)/i),l=/tablet/i.test(t),h=!l&&/[^-]mobi/i.test(t);/opera|opr/i.test(t)?o={name:"Opera",opera:e,version:f||r(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?o={name:"Yandex Browser",yandexbrowser:e,version:f||r(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(t)?(o={name:"Windows Phone",windowsphone:e},c?(o.msedge=e,o.version=c):(o.msie=e,o.version=r(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?o={name:"Internet Explorer",msie:e,version:r(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?o={name:"Chrome",chromeBook:e,chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?o={name:"Microsoft Edge",msedge:e,version:c}:/chrome|crios|crmo/i.test(t)?o={name:"Chrome",chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?(o={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},f&&(o.version=f)):/sailfish/i.test(t)?o={name:"Sailfish",sailfish:e,version:r(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?o={name:"SeaMonkey",seamonkey:e,version:r(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(o={name:"Firefox",firefox:e,version:r(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(o.firefoxos=e)):/silk/i.test(t)?o={name:"Amazon Silk",silk:e,version:r(/silk\/(\d+(\.\d+)?)/i)}:a?o={name:"Android",version:f}:/phantom/i.test(t)?o={name:"PhantomJS",phantom:e,version:r(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?o={name:"BlackBerry",blackberry:e,version:f||r(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(t)?(o={name:"WebOS",webos:e,version:f||r(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(o.touchpad=e)):o=/bada/i.test(t)?{name:"Bada",bada:e,version:r(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?{name:"Tizen",tizen:e,version:r(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||f}:/safari/i.test(t)?{name:"Safari",safari:e,version:f}:{name:r(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(t)?(o.name=o.name||"Webkit",o.webkit=e,!o.version&&f&&(o.version=f)):!o.opera&&/gecko\//i.test(t)&&(o.name=o.name||"Gecko",o.gecko=e,o.version=o.version||r(/gecko\/(\d+(\.\d+)?)/i)),o.msedge||!a&&!o.silk?i&&(o[i]=e,o.ios=e):o.android=e;var p="";o.windowsphone?p=r(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(p=r(/os (\d+([_\s]\d+)*) like mac os x/i),p=p.replace(/[_\s]/g,".")):a?p=r(/android[ \/-](\d+(\.\d+)*)/i):o.webos?p=r(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?p=r(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?p=r(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(p=r(/tizen[\/\s](\d+(\.\d+)*)/i)),p&&(o.osversion=p);var d=p.split(".")[0];return l||"ipad"==i||a&&(3==d||4==d&&!h)||o.silk?o.tablet=e:(h||"iphone"==i||"ipod"==i||a||o.blackberry||o.webos||o.bada)&&(o.mobile=e),o.msedge||o.msie&&o.version>=10||o.yandexbrowser&&o.version>=15||o.chrome&&o.version>=20||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1?o.a=e:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6?o.c=e:o.x=e,o}var e=!0,r=t("undefined"!=typeof navigator?navigator.userAgent:"");return r.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"==typeof n&&n in r)return!0}return!1},r._detect=t,r})},function(t,e,r){r(75),r(76),r(81),r(80),r(78),r(79),r(77),r(82),t.exports=r(12)},[190,2],function(t,e,r){var n=r(38),o=r(21),i=r(37);t.exports=function(t){return function(e,r,s){var a,u=n(e),c=o(u.length),f=i(s,c);if(t&&r!=r){for(;c>f;)if(a=u[f++],a!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===r)return t||f;return!t&&-1}}},function(t,e,r){var n=r(31),o=r(19),i=r(39),s=r(21),a=r(66);t.exports=function(t){var e=1==t,r=2==t,u=3==t,c=4==t,f=6==t,l=5==t||f;return function(h,p,d){for(var v,m,g=i(h),y=o(g),_=n(p,d,3),w=s(y.length),b=0,x=e?a(h,w):r?a(h,0):void 0;w>b;b++)if((l||b in y)&&(v=y[b],m=_(v,b,g),t))if(e)x[b]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return b;case 2:x.push(v)}else if(c)return!1;return f?-1:u||c?c:x}}},function(t,e,r){var n=r(2),o=r(34),i=r(74)("species");t.exports=function(t,e){var r;return o(t)&&(r=t.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)||(r=void 0),n(r)&&(r=r[i],null===r&&(r=void 0))),new(void 0===r?Array:r)(e)}},[194,2,6],function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},[196,6],function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(6),o=r(33),i=r(22)("src"),s="toString",a=Function[s],u=(""+a).split(s);r(12).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,r,s){"function"==typeof r&&(r.hasOwnProperty(i)||o(r,i,t[e]?""+t[e]:u.join(String(e))),r.hasOwnProperty("name")||o(r,"name",e)),t===n?t[e]=r:(s||delete t[e],o(t,e,r))})(Function.prototype,s,function(){return"function"==typeof this&&this[i]||a.call(this)})},[200,6],function(t,e,r){var n=r(18),o=r(17),i=r(13),s="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",a="["+s+"]",u="​",c=RegExp("^"+a+a+"*"),f=RegExp(a+a+"*$"),l=function(t,e){var r={};r[t]=e(h),n(n.P+n.F*i(function(){return!!s[t]()||u[t]()!=u}),"String",r)},h=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(f,"")),t};t.exports=l},[205,72,22,6],function(t,e,r){"use strict";var n,o=r(35),i=r(18),s=r(32),a=r(36),u=r(69),c=r(67),f=r(68),l=r(16),h=r(70),p=r(13),d=r(63),v=r(30),m=r(2),g=r(39),y=r(38),_=r(20),w=r(37),b=r(21),x=r(19),E=r(22)("__proto__"),O=r(65),k=r(64)(!1),M=Object.prototype,j=Array.prototype,S=j.slice,A=j.join,T=o.setDesc,C=o.getDesc,I=o.setDescs,P={};s||(n=!p(function(){return 7!=T(c("div"),"a",{get:function(){return 7}}).a}),o.setDesc=function(t,e,r){if(n)try{return T(t,e,r)}catch(o){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(d(t)[e]=r.value),t},o.getDesc=function(t,e){if(n)try{return C(t,e)}catch(r){}return f(t,e)?a(!M.propertyIsEnumerable.call(t,e),t[e]):void 0},o.setDescs=I=function(t,e){d(t);for(var r,n=o.getKeys(e),i=n.length,s=0;i>s;)o.setDesc(t,r=n[s++],e[r]);return t}),i(i.S+i.F*!s,"Object",{getOwnPropertyDescriptor:o.getDesc,defineProperty:o.setDesc,defineProperties:I});var U="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),R=U.concat("length","prototype"),q=U.length,D=function(){var t,e=c("iframe"),r=q,n=">";for(e.style.display="none",u.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+n),t.close(),D=t.F;r--;)delete D.prototype[U[r]];return D()},L=function(t,e){return function(r){var n,o=y(r),i=0,s=[];for(n in o)n!=E&&f(o,n)&&s.push(n);for(;e>i;)f(o,n=t[i++])&&(~k(s,n)||s.push(n));return s}},B=function(){};i(i.S,"Object",{getPrototypeOf:o.getProto=o.getProto||function(t){return t=g(t),f(t,E)?t[E]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?M:null},getOwnPropertyNames:o.getNames=o.getNames||L(R,R.length,!0),create:o.create=o.create||function(t,e){var r;return null!==t?(B.prototype=d(t),r=new B,B.prototype=null,r[E]=t):r=D(),void 0===e?r:I(r,e)},keys:o.getKeys=o.getKeys||L(U,q,!1)});var F=function(t,e,r){if(!(e in P)){for(var n=[],o=0;e>o;o++)n[o]="a["+o+"]";P[e]=Function("F,a","return new F("+n.join(",")+")")}return P[e](t,r)};i(i.P,"Function",{bind:function(t){var e=v(this),r=S.call(arguments,1),n=function(){var o=r.concat(S.call(arguments));return this instanceof n?F(e,o.length,o):h(e,o,t)};return m(e.prototype)&&(n.prototype=e.prototype),n}}),i(i.P+i.F*p(function(){u&&S.call(u)}),"Array",{slice:function(t,e){var r=b(this.length),n=l(this);if(e=void 0===e?r:e,"Array"==n)return S.call(this,t,e);for(var o=w(t,r),i=w(e,r),s=b(i-o),a=Array(s),u=0;s>u;u++)a[u]="String"==n?this.charAt(o+u):this[o+u];return a}}),i(i.P+i.F*(x!=Object),"Array",{join:function(t){return A.call(x(this),void 0===t?",":t)}}),i(i.S,"Array",{isArray:r(34)});var N=function(t){return function(e,r){v(e);var n=x(this),o=b(n.length),i=t?o-1:0,s=t?-1:1;if(arguments.length<2)for(;;){if(i in n){r=n[i],i+=s;break}if(i+=s,t?0>i:i>=o)throw TypeError("Reduce of empty array with no initial value")}for(;t?i>=0:o>i;i+=s)i in n&&(r=e(r,n[i],i,this));return r}},z=function(t){return function(e){return t(this,e,arguments[1])}};i(i.P,"Array",{forEach:o.each=o.each||z(O(0)),map:z(O(1)),filter:z(O(2)),some:z(O(3)),every:z(O(4)),reduce:N(!1),reduceRight:N(!0),indexOf:z(k),lastIndexOf:function(t,e){var r=y(this),n=b(r.length),o=n-1;for(arguments.length>1&&(o=Math.min(o,_(e))),0>o&&(o=b(n+o));o>=0;o--)if(o in r&&r[o]===t)return o;return-1}}),i(i.S,"Date",{now:function(){return+new Date}});var H=function(t){return t>9?t:"0"+t};i(i.P+i.F*(p(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!p(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=0>e?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+H(t.getUTCMonth()+1)+"-"+H(t.getUTCDate())+"T"+H(t.getUTCHours())+":"+H(t.getUTCMinutes())+":"+H(t.getUTCSeconds())+"."+(r>99?r:"0"+H(r))+"Z"}})},function(t,e,r){var n=r(2);r(7)("freeze",function(t){return function(e){return t&&n(e)?t(e):e}})},function(t,e,r){var n=r(2);r(7)("isExtensible",function(t){return function(e){return n(e)?t?t(e):!0:!1}})},function(t,e,r){var n=r(2);r(7)("isFrozen",function(t){return function(e){return n(e)?t?t(e):!1:!0}})},function(t,e,r){var n=r(2);r(7)("isSealed",function(t){return function(e){return n(e)?t?t(e):!1:!0}})},function(t,e,r){var n=r(2);r(7)("preventExtensions",function(t){return function(e){return t&&n(e)?t(e):e}})},function(t,e,r){var n=r(2);r(7)("seal",function(t){return function(e){return t&&n(e)?t(e):e}})},function(t,e,r){"use strict";r(73)("trim",function(t){return function(){return t(this,3)}})},function(t,e,r){"use strict";function n(){}e.__esModule=!0,e["default"]=n;t.exports=e["default"]},function(t,e,r){"use strict";r(62),r(85)},function(t,e){"use strict";window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))},function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(59),i=n(o),s=i["default"](Error,"PromiseRPCException","Unknown PromiseRPCException");e["default"]=i["default"].map(s,{TimeoutError:"Timeout error",ResponseError:"%message%",DestroyedError:"Destroyed error"}),t.exports=e["default"]},function(t,e,r){"use strict";function n(t){return t&&u["default"]&&u["default"].enable&&(u["default"].enable(t),u["default"].formatters&&(u["default"].formatters.o=function(t){return JSON.stringify(t,0,"  ")},u["default"].formatters.s=function(t){return t},u["default"].formatters.b=function(t){return t?"YES":"NO"}),s["default"].c||(u["default"].useColors=function(){return!1})),u["default"]}var o=r(1)["default"];e.__esModule=!0,e["default"]=n;var i=r(29),s=o(i),a=r(5),u=o(a);t.exports=e["default"]},function(t,e,r){"use strict";function n(t){return u["default"](s["default"].parse(t))}var o=r(1)["default"];e.__esModule=!0,e["default"]=n;var i=r(162),s=o(i),a=r(177),u=o(a);t.exports=e["default"]},function(t,e,r){"use strict";function n(t,e){var r=void 0;e&&(s["default"].adobeAir&&u["default"](),f["default"](e));try{r=t()}catch(n){throw d("error on %s, msg %s",window.location.href,n.message),n}return r}var o=r(1)["default"];e.__esModule=!0,e["default"]=n;var i=r(29),s=o(i),a=r(83),u=o(a),c=r(87),f=o(c),l=r(5),h=o(l),p=window.settings||{};p.resourceBaseUrl&&(r.p=p.resourceBaseUrl);var d=h["default"]("qiwi:platform:utils:loggedLoader:error");t.exports=e["default"]},function(t,e){"use strict";function r(t,e){return function(r){var n="string"==typeof t?r.name===t:r instanceof t;if(n)return e(r);throw r}}function n(t,e,n){return r(t,function(t){var r=e[n?n(t):t.toJS().code];throw r&&(t=new r(t.toJS())),t})}function o(t){return null}e.__esModule=!0,e.IfError=r,e.MapError=n,e.ignore=o},function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(59),i=n(o),s=r(86);e["default"]=i["default"].map(s.ResponseError,{ServerEmptyTokenError:"Server response empty token",CaptchaRequiredError:"%message%",OAuthServerError:"Oauth Server Error with code %statusCode%",PopupDisabledError:"Popup disabled",PopupClosedError:"Popup closed",OAuthBindError:"OAuth token not binded to qiwi user"}),t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0;var r="oauth-protocol-1.0.0";e.PROTOCOL_ID=r},function(t,e,r){"use strict";var n=r(114)["default"],o=r(115)["default"];e["default"]=function(){function t(t,e){var r=[],o=!0,i=!1,s=void 0;try{for(var a,u=n(t);!(o=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(c){i=!0,s=c}finally{try{!o&&u["return"]&&u["return"]()}finally{if(i)throw s}}return r}return function(e,r){if(Array.isArray(e))return e;if(o(Object(e)))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.__esModule=!0},68,[197,42],function(t,e,r){"use strict";var n=r(97),o=r(15),i=r(99),s=r(53),a=r(94),u=r(25),c=r(132),f=r(55),l=r(11).getProto,h=r(9)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",m="values",g=function(){return this};t.exports=function(t,e,r,y,_,w,b){c(r,e,y);var x,E,O=function(t){if(!p&&t in S)return S[t];switch(t){case v:return function(){return new r(this,t)};case m:return function(){return new r(this,t)}}return function(){return new r(this,t)}},k=e+" Iterator",M=_==m,j=!1,S=t.prototype,A=S[h]||S[d]||_&&S[_],T=A||O(_);if(A){var C=l(T.call(new t));f(C,k,!0),!n&&a(S,d)&&s(C,h,g),M&&A.name!==m&&(j=!0,T=function(){return A.call(this)})}if(n&&!b||!p&&!j&&S[h]||s(S,h,T),u[e]=T,u[k]=g,_)if(x={values:M?T:O(m),keys:w?T:O(v),entries:M?O("entries"):T},b)for(E in x)E in S||i(S,E,x[E]);else o(o.P+o.F*(p||j),e,x);return x}},function(t,e){t.exports=!0},36,function(t,e,r){t.exports=r(53)},function(t,e,r){var n=r(11).getDesc,o=r(43),i=r(24),s=function(t,e){if(i(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=r(14)(Function.call,n(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return s(t,r),e?t.__proto__=r:o(t,r),t}}({},!1):void 0),check:s}},20,function(t,e,r){var n=r(51),o=r(9)("iterator"),i=r(25);t.exports=r(4).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[n(t)]:void 0}},function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(59),i=n(o),s=i["default"](Error,"ServerApiError","%message%");e.ServerApiError=s;var a=i["default"](s,"UserError","%message%");e.UserError=a;var u=i["default"](s,"Unauthorized","%message%");e.Unauthorized=u;var c=i["default"](s,"Redirection","%message%");e.Redirection=c},function(t,e){function r(t){var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=r;var n=Object.prototype.toString},function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(176),i=n(o);e["default"]=i["default"],t.exports=e["default"]},function(t,e,r){"use strict";function n(t){var e=t.fetcher,r=t.rpcUpdater,n=t.isModern,o=t.service,i=t.orderId,s=t.login,a=t.operationId;return function(){var t=void 0;return t=r?a&&n?new h["default"]({login:s,orderId:i,operationId:a,fetcher:e}):new d["default"]({rpc:r({login:s,orderId:i,operationId:a,service:o})}):a?new h["default"]({login:s,orderId:i,operationId:a,fetcher:e}):new f["default"]({fetcher:e,service:o})}()}var o=r(3)["default"],i=r(41)["default"],s=r(8)["default"],a=r(1)["default"];e.__esModule=!0;var u=r(45),c=(a(u),r(186)),f=a(c),l=r(187),h=a(l),p=r(188),d=a(p),v=function(){function t(e){var r=e.fetcher,n=e.operationId,i=e.orderId,s=e.login,a=e.service,u=e.rpcUpdater,c=e.isModern;return function(){o(this,t),this._rpcUpdater=u,this._fetcher=r,this._isModern=c,this._params={},this.updateParams({orderId:i,login:s,service:a,operationId:n})}.apply(this,arguments)}return t.prototype.updateParams=function(t){this._params=i({},this._params,t),this._tgtManager=n(i({},this._params,{fetcher:this._fetcher,rpcUpdater:this._rpcUpdater,isModern:this._isModern}))},t.prototype._createCredentials=function(t){return{ticket:t,service:this._params.service}},t.prototype.getCredentials=function(){var t=this;return this._credentials||(this._credentials=this.load().then(function(e){return t._createCredentials(e)})),this._credentials},t.prototype.load=function(){return this._tgtManager.load()},t.prototype.save=function(t){if(!t)throw new Error("ticket is empty");return this._credentials=s.resolve(this._createCredentials(t)),this._tgtManager.save(t)},t}();e["default"]=v,t.exports=e["default"]},,function(t,e,r){"use strict";t.exports=r(113)},,,function(t,e,r){"use strict";var n=r(23)["default"],o=r(3)["default"],i=r(1)["default"];e.__esModule=!0;var s=r(178),a=i(s),u=function(t){function e(){o(this,e),t.apply(this,arguments)}return n(e,t),e}(a["default"]);e["default"]=u,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(105),i=n(o),s=r(88),a=n(s),u=r(111),c=n(u),f=r(40),l=r(5),h=n(l),p=h["default"]("qiwi:sso-server:apiWrap:debug"),d=a["default"](f.env.referrer),v=f.env.origin+f.config.fetcher.authBaseUrl;p("origin: %s, authBaseUrl: %s",d,v);var m=new i["default"]({source:window,target:window.parent,origin:d,methods:new c["default"]({authBaseUrl:v})});e["default"]=m,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(89),i=n(o),s=r(40);e["default"]=i["default"](function(){return r(112)},s.config.debug.enabled?s.config.debug.mask:!1),t.exports=e["default"]},function(t,e,r){t.exports={"default":r(119),__esModule:!0}},function(t,e,r){t.exports={"default":r(120),__esModule:!0}},function(t,e,r){t.exports={"default":r(121),__esModule:!0}},function(t,e,r){t.exports={"default":r(122),__esModule:!0}},function(t,e,r){t.exports={"default":r(123),__esModule:!0}},function(t,e,r){r(58),r(57),t.exports=r(148)},function(t,e,r){r(58),r(57),t.exports=r(149)},function(t,e,r){r(151),t.exports=r(4).Object.assign},function(t,e,r){var n=r(11);t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){r(152),t.exports=r(4).Object.setPrototypeOf},function(t,e,r){r(153),r(57),r(58),r(154),t.exports=r(4).Promise},function(t,e){t.exports=function(){}},[194,43,10],function(t,e,r){var n=r(14),o=r(131),i=r(130),s=r(24),a=r(146),u=r(102);t.exports=function(t,e,r,c){var f,l,h,p=u(t),d=n(r,c,e?2:1),v=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(i(p))for(f=a(t.length);f>v;v++)e?d(s(l=t[v])[0],l[1]):d(t[v]);else for(h=p.call(t);!(l=h.next()).done;)o(h,d,l.value,e)}},[196,10],70,function(t,e,r){var n=r(25),o=r(9)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||i[o]===t)}},function(t,e,r){var n=r(24);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(i){var s=t["return"];throw void 0!==s&&n(s.call(t)),i}}},function(t,e,r){"use strict";var n=r(11),o=r(98),i=r(55),s={};r(53)(s,r(9)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n.create(s,{next:o(1,r)}),i(t,e+" Iterator")}},function(t,e,r){var n=r(9)("iterator"),o=!1;try{var i=[7][n]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i=[7],s=i[n]();s.next=function(){r=!0},i[n]=function(){return s},t(i)}catch(a){}return r}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n,o,i,s=r(10),a=r(144).set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,f=s.Promise,l="process"==r(42)(c),h=function(){var t,e,r;for(l&&(t=c.domain)&&(c.domain=null,t.exit());n;)e=n.domain,r=n.fn,e&&e.enter(),r(),e&&e.exit(),n=n.next;o=void 0,t&&t.enter()};if(l)i=function(){c.nextTick(h)};else if(u){var p=1,d=document.createTextNode("");new u(h).observe(d,{characterData:!0}),i=function(){d.data=p=-p}}else i=f&&f.resolve?function(){f.resolve().then(h)}:function(){a.call(s,h)};t.exports=function(t){var e={fn:t,next:void 0,domain:l&&c.domain};o&&(o.next=e),n||(n=e,i()),o=e}},function(t,e,r){var n=r(11),o=r(44),i=r(95);t.exports=r(28)(function(){var t=Object.assign,e={},r={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(t){r[t]=t}),7!=t({},e)[n]||Object.keys(t({},r)).join("")!=o})?function(t,e){for(var r=o(t),s=arguments,a=s.length,u=1,c=n.getKeys,f=n.getSymbols,l=n.isEnum;a>u;)for(var h,p=i(s[u++]),d=f?c(p).concat(f(p)):c(p),v=d.length,m=0;v>m;)l.call(p,h=d[m++])&&(r[h]=p[h]);return r}:Object.assign},function(t,e,r){var n=r(99);t.exports=function(t,e){for(var r in e)n(t,r,e[r]);return t}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,r){"use strict";var n=r(4),o=r(11),i=r(52),s=r(9)("species");t.exports=function(t){var e=n[t];i&&e&&!e[s]&&o.setDesc(e,s,{configurable:!0,get:function(){return this}})}},[200,10],function(t,e,r){var n=r(24),o=r(26),i=r(9)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||void 0==(r=n(s)[i])?e:o(r)}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError(r+": use the 'new' operator!");return t}},function(t,e,r){var n=r(101),o=r(27);t.exports=function(t){return function(e,r){var i,s,a=String(o(e)),u=n(r),c=a.length;return 0>u||u>=c?t?"":void 0:(i=a.charCodeAt(u),55296>i||i>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):i:t?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},function(t,e,r){var n,o,i,s=r(14),a=r(129),u=r(128),c=r(126),f=r(10),l=f.process,h=f.setImmediate,p=f.clearImmediate,d=f.MessageChannel,v=0,m={},g="onreadystatechange",y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){y.call(t.data)};h&&p||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return m[++v]=function(){a("function"==typeof t?t:Function(t),e)},n(v),v},p=function(t){delete m[t]},"process"==r(42)(l)?n=function(t){l.nextTick(s(y,t,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=_,n=s(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):n=g in c("script")?function(t){u.appendChild(c("script"))[g]=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:h,clear:p}},[201,95,27],[202,101],22,function(t,e,r){var n=r(24),o=r(102);t.exports=r(4).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){var n=r(51),o=r(9)("iterator"),i=r(25);t.exports=r(4).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(n(e))}},function(t,e,r){"use strict";var n=r(125),o=r(134),i=r(25),s=r(145);t.exports=r(96)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,r):"values"==e?o(0,t[r]):o(0,[r,t[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n=r(15);n(n.S+n.F,"Object",{assign:r(136)})},function(t,e,r){var n=r(15);n(n.S,"Object",{setPrototypeOf:r(100).set})},function(t,e){},function(t,e,r){"use strict";var n,o=r(11),i=r(97),s=r(10),a=r(14),u=r(51),c=r(15),f=r(43),l=r(24),h=r(26),p=r(142),d=r(127),v=r(100).set,m=r(138),g=r(9)("species"),y=r(141),_=r(135),w="Promise",b=s.process,x="process"==u(b),E=s[w],O=function(t){var e=new E(function(){});return t&&(e.constructor=Object),E.resolve(e)===e},k=function(){function t(e){var r=new E(e);return v(r,t.prototype),r}var e=!1;try{if(e=E&&E.resolve&&O(),v(t,E),t.prototype=o.create(E.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&r(52)){var n=!1;E.resolve(o.setDesc({},"then",{get:function(){n=!0}})),e=n}}catch(i){e=!1}return e}(),M=function(t,e){return i&&t===E&&e===n?!0:m(t,e)},j=function(t){var e=l(t)[g];return void 0!=e?e:t},S=function(t){var e;return f(t)&&"function"==typeof(e=t.then)?e:!1},A=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=h(e),this.reject=h(r)},T=function(t){try{t()}catch(e){return{error:e}}},C=function(t,e){if(!t.n){t.n=!0;var r=t.c;_(function(){for(var n=t.v,o=1==t.s,i=0,a=function(e){var r,i,s=o?e.ok:e.fail,a=e.resolve,u=e.reject;try{s?(o||(t.h=!0),r=s===!0?n:s(n),r===e.promise?u(TypeError("Promise-chain cycle")):(i=S(r))?i.call(r,a,u):a(r)):u(n)}catch(c){u(c)}};r.length>i;)a(r[i++]);r.length=0,t.n=!1,e&&setTimeout(function(){var e,r,o=t.p;I(o)&&(x?b.emit("unhandledRejection",n,o):(e=s.onunhandledrejection)?e({promise:o,reason:n}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",n)),t.a=void 0},1)})}},I=function(t){var e,r=t._d,n=r.a||r.c,o=0;if(r.h)return!1;for(;n.length>o;)if(e=n[o++],e.fail||!I(e.promise))return!1;return!0},P=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),C(e,!0))},U=function(t){var e,r=this;if(!r.d){r.d=!0,r=r.r||r;try{if(r.p===t)throw TypeError("Promise can't be resolved itself");(e=S(t))?_(function(){var n={r:r,d:!1};try{e.call(t,a(U,n,1),a(P,n,1))}catch(o){P.call(n,o)}}):(r.v=t,r.s=1,C(r,!1))}catch(n){P.call({r:r,d:!1},n)}}};k||(E=function(t){h(t);var e=this._d={p:p(this,E,w),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(a(U,e,1),a(P,e,1))}catch(r){P.call(e,r)}},r(137)(E.prototype,{then:function(t,e){var r=new A(y(this,E)),n=r.promise,o=this._d;return r.ok="function"==typeof t?t:!0,r.fail="function"==typeof e&&e,o.c.push(r),o.a&&o.a.push(r),o.s&&C(o,!1),n},"catch":function(t){return this.then(void 0,t)}})),c(c.G+c.W+c.F*!k,{Promise:E}),r(55)(E,w),r(139)(w),n=r(4)[w],c(c.S+c.F*!k,w,{reject:function(t){var e=new A(this),r=e.reject;return r(t),e.promise}}),c(c.S+c.F*(!k||O(!0)),w,{resolve:function(t){if(t instanceof E&&M(t.constructor,this))return t;var e=new A(this),r=e.resolve;return r(t),e.promise}}),c(c.S+c.F*!(k&&r(133)(function(t){E.all(t)["catch"](function(){})})),w,{all:function(t){var e=j(this),r=new A(e),n=r.resolve,i=r.reject,s=[],a=T(function(){d(t,!1,s.push,s);var r=s.length,a=Array(r);r?o.each.call(s,function(t,o){var s=!1;e.resolve(t).then(function(t){s||(s=!0,a[o]=t,--r||n(a))},i)}):n(a)});return a&&i(a.error),r.promise},race:function(t){var e=j(this),r=new A(e),n=r.reject,o=T(function(){d(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o&&n(o.error),r.promise}})},function(t,e,r){var n;(function(t,o){!function(i){function s(t){throw RangeError(I[t])}function a(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function u(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(C,".");var o=t.split("."),i=a(o,e).join(".");return n+i}function c(t){for(var e,r,n=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function f(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=R(t>>>10&1023|55296),t=56320|1023&t),e+=R(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:b}function h(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,r){var n=0;for(t=r?U(t/k):t>>1,t+=U(t/e);t>P*E>>1;n+=b)t=U(t/P);return U(n+(P+1)*t/(t+O))}function d(t){var e,r,n,o,i,a,u,c,h,d,v=[],m=t.length,g=0,y=j,_=M;for(r=t.lastIndexOf(S),0>r&&(r=0),n=0;r>n;++n)t.charCodeAt(n)>=128&&s("not-basic"),v.push(t.charCodeAt(n));for(o=r>0?r+1:0;m>o;){for(i=g,a=1,u=b;o>=m&&s("invalid-input"),c=l(t.charCodeAt(o++)),(c>=b||c>U((w-g)/a))&&s("overflow"),g+=c*a,h=_>=u?x:u>=_+E?E:u-_,!(h>c);u+=b)d=b-h,a>U(w/d)&&s("overflow"),a*=d;e=v.length+1,_=p(g-i,e,0==i),U(g/e)>w-y&&s("overflow"),y+=U(g/e),g%=e,v.splice(g++,0,y)}return f(v)}function v(t){var e,r,n,o,i,a,u,f,l,d,v,m,g,y,_,O=[];for(t=c(t),m=t.length,e=j,r=0,i=M,a=0;m>a;++a)v=t[a],128>v&&O.push(R(v));for(n=o=O.length,o&&O.push(S);m>n;){for(u=w,a=0;m>a;++a)v=t[a],v>=e&&u>v&&(u=v);for(g=n+1,u-e>U((w-r)/g)&&s("overflow"),r+=(u-e)*g,e=u,a=0;m>a;++a)if(v=t[a],e>v&&++r>w&&s("overflow"),v==e){for(f=r,l=b;d=i>=l?x:l>=i+E?E:l-i,!(d>f);l+=b)_=f-d,y=b-d,O.push(R(h(d+_%y,0))),f=U(_/y);O.push(R(h(f,0))),i=p(r,g,n==o),r=0,++n}++r,++e}return O.join("")}function m(t){return u(t,function(t){return A.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return u(t,function(t){return T.test(t)?"xn--"+v(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);(y.global===y||y.window===y||y.self===y)&&(i=y);var _,w=2147483647,b=36,x=1,E=26,O=38,k=700,M=72,j=128,S="-",A=/^xn--/,T=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=b-x,U=Math.floor,R=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:c,encode:f},decode:d,encode:v,toASCII:g,toUnicode:m},n=function(){return _}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(189)(t),function(){return this}())},function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,o,i){e=e||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var f=0;c>f;++f){var l,h,p,d,v=t[f].replace(a,"%20"),m=v.indexOf(o);m>=0?(l=v.substr(0,m),h=v.substr(m+1)):(l=v,h=""),p=decodeURIComponent(l),d=decodeURIComponent(h),r(s,p)?n(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e){"use strict";function r(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,s,a){return e=e||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t?r(i(t),function(i){var a=encodeURIComponent(n(i))+s;return o(t[i])?r(t[i],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[i]))}).join(e):a?encodeURIComponent(n(a))+s+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},[206,156,157],function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=t.length;
a>0&&u>a&&(u=a);for(var c=0;u>c;++c){var f,l,h,p,d=t[c].replace(s,"%20"),v=d.indexOf(n);v>=0?(f=d.substr(0,v),l=d.substr(v+1)):(f=d,l=""),h=decodeURIComponent(f),p=decodeURIComponent(l),r(i,h)?Array.isArray(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i}},function(t,e){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,o){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(r(o))+n;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(r(t))}).join(e):i+encodeURIComponent(r(t[o]))}).join(e):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(t)):""}},[206,159,160],function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&c(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function i(t){return u(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function f(t){return null===t}function l(t){return null==t}var h=r(155);e.parse=o,e.resolve=s,e.resolveObject=a,e.format=i,e.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(v),g=["'"].concat(m),y=["%","/","?",";","#"].concat(g),_=["/","?","#"],w=255,b=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},M=r(161);n.prototype.parse=function(t,e,r){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var o=p.exec(n);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||o&&O[o]||(n=n.substr(2),this.slashes=!0)}if(!O[o]&&(s||o&&!k[o])){for(var a=-1,c=0;c<_.length;c++){var f=n.indexOf(_[c]);-1!==f&&(-1===a||a>f)&&(a=f)}var l,d;d=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==d&&(l=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(l)),a=-1;for(var c=0;c<y.length;c++){var f=n.indexOf(y[c]);-1!==f&&(-1===a||a>f)&&(a=f)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var m=this.hostname.split(/\./),c=0,j=m.length;j>c;c++){var S=m[c];if(S&&!S.match(b)){for(var A="",T=0,C=S.length;C>T;T++)A+=S.charCodeAt(T)>127?"x":S[T];if(!A.match(b)){var I=m.slice(0,c),P=m.slice(c+1),U=S.match(x);U&&(I.push(U[1]),P.unshift(U[2])),P.length&&(n="/"+P.join(".")+n),this.hostname=I.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var R=this.hostname.split("."),q=[],c=0;c<R.length;++c){var D=R[c];q.push(D.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(D):D)}this.hostname=q.join(".")}var L=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+L,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[i])for(var c=0,j=g.length;j>c;c++){var F=g[c],N=encodeURIComponent(F);N===F&&(N=escape(F)),n=n.split(F).join(N)}var z=n.indexOf("#");-1!==z&&(this.hash=n.substr(z),n=n.slice(0,z));var H=n.indexOf("?");if(-1!==H?(this.search=n.substr(H),this.query=n.substr(H+1),e&&(this.query=M.parse(this.query)),n=n.slice(0,H)):e&&(this.search="",this.query={}),n&&(this.pathname=n),k[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",D=this.search||"";this.path=L+D}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=M.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||k[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+r+s+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!k[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||O[t.protocol])r.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var i=r.pathname||"",s=r.search||"";r.path=i+s}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=c||a||r.host&&t.pathname,p=h,d=r.pathname&&r.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],v=r.protocol&&!k[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),h=h&&(""===o[0]||""===d[0])),c)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),r.search=t.search,r.query=t.query;else if(!l(t.search)){if(v){r.hostname=r.host=d.shift();var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return r.search=t.search,r.query=t.query,f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var g=d.slice(-1)[0],y=(r.host||t.host)&&("."===g||".."===g)||""===g,_=0,w=d.length;w>=0;w--)g=d[w],"."==g?d.splice(w,1):".."===g?(d.splice(w,1),_++):_&&(d.splice(w,1),_--);if(!h&&!p)for(;_--;_)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var b=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(v){r.hostname=r.host=b?"":d.length?d.shift():"";var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return h=h||r.host&&d.length,h&&!b&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){"use strict";function n(t,e){if(l[e])return l[e];var r={};try{r=t.contentDocument||t.contentWindow.document}catch(n){r={}}return l[e]=new i(function(e,r){function n(){a.removeEventListener(t,"load",n),clearTimeout(o),f("iframe initialized: %o",t.src),e(t)}var o=setTimeout(function(){f("Can't get iframe status: "+t.src),e(t)},7e3);a.addEventListener(t,"load",n)}),l[e]}function o(t){var e=t.container,r=t.id,o=t.src,i=t.sandbox,s=t.reuse;if(s){var a=r?document.getElementById(r):null;if(!a&&o&&(a=document.querySelector('iframe[src="'+o+'"]')),a)return n(a,r)}var u=document.createElement("iframe");return u.src=o,u.id=r,u.setAttribute("name",r+"__name"),u.style.width="0",u.style.height="0",u.style.border="0",void 0===i?u.sandbox=["allow-scripts","allow-popups","allow-same-origin"].join(" "):i&&(u.sandbox=i.join(" ")),(e||document.body).appendChild(u),n(u,r)}var i=r(8)["default"],s=r(1)["default"];e.__esModule=!0,e["default"]=o;var a=r(48),u=r(5),c=s(u),f=c["default"]("qiwi:platform:browser:create-iframe"),l={};t.exports=e["default"]},function(t,e,r){"use strict";function n(t){var e=t.parentWin||window,r=[];for(var n in t){var o=t[n];-1!==s.indexOf(n)?r.push(n+"="+(o?"1":"0")):-1!==a.indexOf(n)&&r.push(n+"="+o)}return e.open(t.href,t.target,r.join(","))}function o(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t=i({width:600,height:800,screenWidth:window.screen.width,screenHeight:window.screen.height,toolbar:!1,scrollbars:!1,location:!1,statusbar:!1,menubar:!1,resizable:!1},t),t.top=Math.ceil((t.screenWidth-t.width)/2),t.left=Math.ceil((t.screenHeight-t.height)/2),n(t)}var i=r(41)["default"];e.__esModule=!0,e["default"]=o;var s=["toolbar","scrollbars","location","menubar","resizable"],a=["width","height"];t.exports=e["default"]},function(t,e,r){"use strict";function n(t,e){return e=e||{},e.url=t,e.withCredentials=e.useXDR="include"===e.credentials,y("xhr: url: %s, %o",t,e),new a(function(t,r){f["default"](e,function(e,n){return e?r(e):t(n)})})}var o=r(3)["default"],i=r(41)["default"],s=r(93)["default"],a=r(8)["default"],u=r(1)["default"];e.__esModule=!0;var c=r(169),f=u(c),l=r(158),h=u(l),p=r(103),d=(r(90),r(166)),v=u(d),m=r(5),g=u(m),y=g["default"]("qiwi:platform:fetcher"),_=function(){function t(e){var r=e.apiBaseUrl,n=e.getTicket,i=e.errorParser,s=e.version,a=e.ticketLiveTime,u=e.locale;return function(){o(this,t),this._apiBaseUrl=r||"",this._ticket=null,this._getTicket=n||this._getEmptyTicket,this._errorParser=i||v["default"],this._version=s,this._ticketLiveTime=a||0,this._locale=u}.apply(this,arguments)}return t.prototype._getEmptyTicket=function(){return a.resolve(null)},t.prototype._getUrl=function(t,e){var r=this._apiBaseUrl,n=h["default"].stringify(e),o=n?"?"+n:"";return r+t+o},t.prototype._getCachedTicket=function(){return this._ticketLiveTime||(this._ticket=null),this._ticket||(this._ticket=this._getTicket()),this._ticket},t.prototype._getDefaultHeaders=function(t){var e=t.version,r=t.locale,n=t.noAuth;return function(){var t={Accept:e?"application/vnd.qiwi.sso-v"+e+"+json":"application/json"};return r&&(t["Accept-Language"]=r+";q=0.8,en-US;q=0.6,en;q=0.4"),(n?a.resolve():this._getCachedTicket()).then(function(e){return e&&(t.Authorization="Token "+e),t})}.apply(this,arguments)},t.prototype.fetch=function(t,e){var r=this,o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];e=e||{};var u=e.errorParser||this._errorParser,c=this._getUrl(t,e.query||{}),f=void 0===e.version?this._version:e.version,l=e.locale||this._locale;return void 0===e.json&&(e.json=!0),e.json&&(e.headers=e.headers||{},e.headers=i({},e.headers,{"Content-Type":"application/json"})),this._getDefaultHeaders({locale:l,version:f,noAuth:e.noAuth}).then(function(t){return a.all([t,n(c,i({},e,{headers:i({},t,e.headers)}))])}).then(function(n){var i=s(n,2),a=i[0],c=i[1],f=c.statusCode,l=c.body;if(f>=300&&400>f)throw new p.Redirection({location:c.headers.location});if(400===f)throw new p.UserError(u(c));if(401===f){if(a.Authorization&&!o)return r._ticket=null,r.fetch(t,e,!0);throw new p.Unauthorized(u(c))}if(f>401)throw new p.ServerApiError(u(c));return e.raw?c:l})["catch"](function(t){throw y("error %o",{err:t,url:c,options:e}),t})},t}();e["default"]=_,t.exports=e["default"]},function(t,e,r){"use strict";function n(t){var e=t.body,r=t.statusCode;("string"==typeof e||null===e)&&(e={message:e||r,code:r});var n=e.entity||{},o=n.error||{};return{message:e.message||o.message,code:e.code||o.code,statusCode:r,links:e.links?s["default"](e.links):{}}}var o=r(1)["default"];e.__esModule=!0,e["default"]=n;var i=r(168),s=o(i);t.exports=e["default"]},function(t,e,r){"use strict";var n=r(1)["default"];e.__esModule=!0;var o=r(165),i=n(o);e["default"]=i["default"],t.exports=e["default"]},function(t,e){"use strict";function r(){for(var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],e={},r=0;r<t.length;r++){var n=t[r],o=n.rel,i=n.href;e[o]=i}return e}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<t.length;r++)e(t[r])}function o(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e,r){var n=t;return l(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=p(e,{uri:t}),n.callback=r,n}function s(t,e,r){return e=i(t,e,r),a(e)}function a(t){function e(){4===c.readyState&&i()}function r(){var t=void 0;if(c.response?t=c.response:"text"!==c.responseType&&c.responseType||(t=c.responseText||c.responseXML),w)try{t=JSON.parse(t)}catch(e){}return t}function n(t){clearTimeout(d),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,a(t,u)}function i(){if(!p){var e;clearTimeout(d),e=t.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var n=u,o=null;0!==e?(n={body:r(),statusCode:e,method:m,headers:{},url:v,rawRequest:c},c.getAllResponseHeaders&&(n.headers=h(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),a(o,n,n.body)}}var a=t.callback;if("undefined"==typeof a)throw new Error("callback argument missing");a=f(a);var u={body:void 0,headers:{},statusCode:0,method:m,url:v,rawRequest:c},c=t.xhr||null;c||(c=t.cors||t.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var l,p,d,v=c.url=t.uri||t.url,m=c.method=t.method||"GET",g=t.body||t.data||null,y=c.headers=t.headers||{},_=!!t.sync,w=!1;if("json"in t&&(w=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),g=JSON.stringify(t.json))),c.onreadystatechange=e,c.onload=i,c.onerror=n,c.onprogress=function(){},c.ontimeout=n,c.open(m,v,!_,t.username,t.password),_||(c.withCredentials=!!t.withCredentials),!_&&t.timeout>0&&(d=setTimeout(function(){p=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n(t)},t.timeout)),c.setRequestHeader)for(l in y)y.hasOwnProperty(l)&&c.setRequestHeader(l,y[l]);else if(t.headers&&!o(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(c.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(c),c.send(g),c}function u(){}var c=r(170),f=r(171),l=r(104),h=r(174),p=r(175);t.exports=s,s.XMLHttpRequest=c.XMLHttpRequest||u,s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:c.XDomainRequest,n(["get","put","post","patch","head","delete"],function(t){s["delete"===t?"del":t]=function(e,r,n){return r=i(e,r,n),r.method=t.toUpperCase(),a(r)}})},function(t,e){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(e,function(){return this}())},function(t,e){function r(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}t.exports=r,r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0})})},function(t,e,r){function n(t,e,r){if(!a(e))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===u.call(t)?o(t,e,r):"string"==typeof t?i(t,e,r):s(t,e,r)}function o(t,e,r){for(var n=0,o=t.length;o>n;n++)c.call(t,n)&&e.call(r,t[n],n,t)}function i(t,e,r){for(var n=0,o=t.length;o>n;n++)e.call(r,t.charAt(n),n,t)}function s(t,e,r){for(var n in t)c.call(t,n)&&e.call(r,t[n],n,t)}var a=r(104);t.exports=n;var u=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(t,e){function r(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=r,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,r){var n=r(173),o=r(172),i=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};var e={};return o(n(t).split("\n"),function(t){var r=t.indexOf(":"),o=n(t.slice(0,r)).toLowerCase(),s=n(t.slice(r+1));"undefined"==typeof e[o]?e[o]=s:i(e[o])?e[o].push(s):e[o]=[e[o],s]}),e}},function(t,e){function r(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}t.exports=r;var n=Object.prototype.hasOwnProperty},function(t,e,r){"use strict";var n=r(3)["default"],o=r(41)["default"],i=r(93)["default"],s=r(8)["default"],a=r(1)["default"];e.__esModule=!0;var u=r(48),c=r(86),f=r(5),l=a(f),h=l["default"]("qiwi:platform:promise-rpc"),p="promise-rpc-1.0.0",d=function(){function t(e){var r=e.source,o=e.target,i=e.fallbackTimeout,s=e.origin,a=e.methods;n(this,t),this._fallbackTimeout=i||1e5,this._target=o,this._source=r,this._origin=s,this._destroyed=!1,this._onMessage=this._onMessage.bind(this),this._msgId=0,this._callbacks={},this._methods=a||{},this._syncedTarget=null,this._isSynced=!1,u.addEventListener(r,"message",this._onMessage)}return t.prototype.destroy=function(){this._destroyed||u.removeEventListener(this._source,"message",this._onMessage),this._destroyed=!0},t.prototype._createSyncTarget=function(){var t=this;return h("try to sync"),this.call("PromiseRPC::sync",{},!0).then(function(e){return h("synced %o",e),t._isSynced=!0,!0})["catch"](function(e){return console.log(e),new s(function(e){return setTimeout(function(){return e(t._createSyncTarget())},300)})})},t.prototype.__postMessage=function(t){this._target.postMessage(JSON.stringify(o({},t,{protocol:p})),this._origin)},t.prototype._postMessage=function(t){var e=this;this._syncedTarget||(this._syncedTarget=this._createSyncTarget());var r=this._syncedTarget.then(function(){return e.__postMessage(t)});this._isSynced||(this._syncedTarget=r)},t.prototype._onMessage=function(t){if(!(this._destroyed||"*"!==this._origin&&t.origin!==this._origin)&&t.data&&"string"==typeof t.data){var e={};try{e=JSON.parse(t.data)}catch(r){e={}}e.protocol===p&&(e.response?this._handleResponse(e,t.origin):this._handleRequest(e,t.origin))}},t.prototype.call=function(t,e,r){var n=this;return new s(function(o,i){if(n._destroyed)return i(new c.DestroyedError);var s=n._msgId;n._msgId++;var a=setTimeout(function(){h("timeout %s(%o)",t,e),n._handleResponse({msgId:s,error:(new c.TimeoutError).toJS()})},r?500:n._fallbackTimeout);n._callbacks[s]=[o,i,t,a],h("ping %s %s(%o)",t,r?"SYNCED":"DELAYED",e),r?n.__postMessage({msgId:s,method:t,payload:e}):n._postMessage({msgId:s,method:t,payload:e})})},t.prototype._send=function(t){try{this._postMessage(t)}catch(e){throw h("error: "+e.message),e}},t.prototype._handleResponse=function(t){var e=t.msgId,r=t.payload,n=t.error,o=this._callbacks[e];if(delete this._callbacks[e],o){var s=i(o,4),a=s[0],u=s[1],f=s[2],l=s[3];clearTimeout(l),h("pong %s %s(%o)",f,n?"ERROR":"SUCCESS",r||n),n?(n.code=n.name,delete n.name,u(new c.ResponseError(n))):a(r)}},t.prototype._handleRequest=function(t,e){var r=this,n=t.msgId,o=t.payload,i=t.method,a="PromiseRPC::sync"===i;if(this._methods[i]||a){var u=function(t){return this.__postMessage({msgId:n,response:!0,error:t.toJS?t.toJS():{stack:t.stack,name:t.name,message:t.message}})}.bind(this);try{h("REQ BEGIN location: %s, %o",window.location.href,{msgId:n,payload:o,method:i});var c=a?{synced:!0}:this._methods[i].call(this._methods,o,e);s.resolve(c).then(function(t){return h("REQ SUCCESS msgId: %s location: %s, %o",n,window.location.href,t),t}).then(function(t){return r.__postMessage({msgId:n,response:!0,payload:t})})["catch"](function(t){throw h("REQ ERROR location: %s, err: %s",window.location.href,t.message),t})["catch"](u)}catch(f){u(f)}}},t}();e["default"]=d,t.exports=e["default"]},function(t,e){"use strict";function r(t){var e=t.protocol,r=t.slashes,n=t.host;return e+(r?"//":"")+n}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},function(t,e,r){t.exports=r(185)},,function(t,e,r){"use strict";var n=r(3)["default"],o=r(1)["default"];e.__esModule=!0;var i=r(86),s=r(91),a=o(s),u=r(105),c=o(u),f=r(90),l=r(88),h=o(l),p=r(163),d=o(p),v=f.MapError(i.ResponseError,a["default"]),m=function(){function t(e){var r=e.proxyUrl,o=e.authBaseUrl,i=e.source,s=e.container;n(this,t),this._rpc=d["default"]({container:s,id:"qiwi-sso-client-rpc-iframe",src:o+r,reuse:!0,sandbox:!1}).then(function(t){return new c["default"]({source:i||window,target:t.contentWindow,origin:h["default"](o)})})}return t.prototype.call=function(t,e){return this._rpc.then(function(r){return r.call(t,e)})["catch"](v)},t}();e["default"]=m,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(3)["default"],o=r(1)["default"];e.__esModule=!0;var i=r(48),s=r(164),a=o(s),u=r(88),c=o(u),f=r(91),l=r(92),h=r(5),p=o(h),d=p["default"]("qiwi:sso-client:OAuthLoginPopup"),v=function(){function t(e){var r=e.authBaseUrl,o=e.provider,i=e.resolve,s=e.reject;n(this,t),this._authOrigin=c["default"](r),this._providerUrl=r+"/signin/oauth2/"+o.replace(/[^\w\d]*/g,""),this._resolve=i,this._reject=s,this.destroy=this.destroy.bind(this),this._onMessage=this._onMessage.bind(this),this._intervalId=null}return t.prototype.createWindow=function(){var t=this,e=this._providerUrl?a["default"]({href:this._providerUrl,target:"OAuthLoginPopup"}):null;return e?(this._win=e,d("createWindow, %s",this._providerUrl),i.addEventListener(window,"message",this._onMessage),this._intervalId=setInterval(function(){e.closed&&(t.destroy(),t._reject(new f.PopupClosedError))},1e3),window.postMessageIeFix=function(t,e,r){setTimeout(function(){return window.postMessage(t,e,r)},0)},e):this._reject(new f.PopupDisabledError)},t.prototype._onMessage=function(t){if(d("_onMessage: %o, origin: %s",t.data,t.origin),t.origin===this._authOrigin){var e=void 0;try{e=JSON.parse(t.data)}catch(r){e={}}e.protocol===l.PROTOCOL_ID&&this._handleOauthSigin(e.payload)}else d("origin not match real: %s !== required: %s",t.origin,this._authOrigin)},t.prototype.destroy=function(){this._intervalId&&clearInterval(this._intervalId),i.removeEventListener(window,"message",this._onMessage)},t.prototype._handleOauthSigin=function(t){var e=t.code,r=t.data;switch(this.destroy(),d("_handleOauthSigin: code: %s, data: %o",e,r),e){case 200:case 201:var n=r.ticket;this._resolve(n);break;case 401:var o=r.access_token,i=r.provider_user,s=r.provider_type;this._reject(new f.OAuthBindError({credentials:{accessToken:o,providerUser:i,providerType:s}}));break;default:this._reject(new f.OAuthServerError({statusCode:e}))}},t}();e["default"]=v,t.exports=e["default"]},function(t,e,r){"use strict";function n(t){var e=t.authBaseUrl,r=t.provider;return new o(function(t,n){var o=new a["default"]({authBaseUrl:e,provider:r,resolve:t,reject:n});f("oAuthLogin: ticket: url: %s",e);var i=o.createWindow();i.focus()})}var o=r(8)["default"],i=r(1)["default"];e.__esModule=!0,e["default"]=n;var s=r(181),a=i(s),u=r(5),c=i(u),f=c["default"]("qiwi-sso-client:createOAuthPopup");t.exports=e["default"]},function(t,e,r){"use strict";var n=r(3)["default"],o=(r(8)["default"],r(1)["default"]);e.__esModule=!0;var i=r(5),s=o(i),a=(s["default"]("qiwi-sso-client:BaseAuthStrategy"),function(){function t(e){var r=e.authBaseUrl;n(this,t),this.getTicket=this.getTicket.bind(this),this.oAuthLogin=this.oAuthLogin.bind(this),this._authBaseUrl=r}return t.prototype.getTicket=function(){throw new Error("Not implemented")},t.prototype.login=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){throw new Error("Not implemented")}),t.prototype.loginByOtp=function(t){throw new Error("Not implemented")},t.prototype.otpSendSms=function(t){throw new Error("Not implemented")},t.prototype.isAuthorized=function(){throw new Error("Not implemented")},t.prototype.logout=function(){throw new Error("Not implemented")},t.prototype.getOAuthProviders=function(){throw new Error("Not implemented")},t.prototype.oAuthLogin=function(t){t.provider;return function(){throw new Error("Not implemented")}()},t}());e["default"]=a,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(23)["default"],o=r(3)["default"],i=(r(8)["default"],r(1)["default"]);e.__esModule=!0;var s=r(167),a=i(s),u=r(103),c=r(90),f=r(91),l=r(182),h=i(l),p=r(183),d=i(p),v=r(106),m=(i(v),r(5)),g=i(m),y=(g["default"]("qiwi-sso-client:SameDomainAuthStrategy"),c.MapError(u.ServerApiError,{1:f.CaptchaRequiredError})),_=function(t){function e(r){var n=r.locale,i=r.authBaseUrl,s=r.cors;return function(){o(this,e),t.call(this,{authBaseUrl:i}),this._fetcher=new a["default"]({locale:n,apiBaseUrl:i,version:1}),this._corsCredentials=s?"include":void 0}.apply(this,arguments)}return n(e,t),e.prototype._getTicketWithService=function(){var t=this;return this._tgtManager.getCredentials().then(function(e){return t._fetcher.fetch("/cas/sts",{method:"POST",credentials:t._corsCredentials,json:e}).then(function(t){var r=t.entity.ticket;if(!r)throw new Error("Not authorized");return{ticket:r,service:e.service}})})},e.prototype.getTicket=function(){return this._getTicketWithService().then(function(t){var e=t.ticket;return e})},e.prototype.otpSendSms=function(t){var e=t.orderId,r=t.shopId,n=t.login;return function(){return this._fetcher.fetch("/providers/"+r,{method:"POST",json:{entity:e,user:n},noAuth:!0}).then(function(t){var e=t.entity;return e.operationIdentifier})}.apply(this,arguments)},e.prototype.loginByOtp=function(t){var e=t.operationId,r=t.orderId,n=t.login,o=t.smsCode;return function(){var t=this;return this._fetcher.fetch("/cas/operations/"+e+"/entities/"+r+"/users/"+n,{method:"PUT",json:{code:o,agreement:!0},noAuth:!0}).then(function(r){var n=r.entity;return t._tgtManager.updateParams({operationId:e}),t._tgtManager.save(n.ticket)})}.apply(this,arguments)},e.prototype.login=function(t){var e=this,r=t.login,n=t.password,o=t.captcha,i=t.accessToken,s=t.providerUser,a=t.providerType;return this._fetcher.fetch("/cas/tgts",{method:"POST",credentials:this._corsCredentials,json:{login:r,password:n,captcha:o,accessToken:i,providerUser:s,providerType:a}}).then(function(t){if(!t||!t.entity||!t.entity.ticket)throw new f.ServerEmptyTokenError;return e._tgtManager.save(t.entity.ticket)})["catch"](y)},e.prototype.isAuthorized=function(){return this._tgtManager.load().then(function(){return!0})["catch"](function(){return!1})},e.prototype.logout=function(){var t=this;return this._getTicketWithService().then(function(e){var r=e.ticket,n=e.service;return t._fetcher.fetch("/cas/tgts",{method:"DELETE",credentials:t._corsCredentials,noAuth:!0,json:{ticket:r,service:n}})})},e.prototype.getOAuthProviders=function(){return this._fetcher.fetch("/signin/oauth2").then(function(t){return t.map(function(t){return t.identifier})})},e.prototype.oAuthLogin=function(t){var e=t.provider;return function(){var t=this;return h["default"]({authBaseUrl:this._authBaseUrl,provider:e}).then(function(e){return t._tgtManager.save(e)})}.apply(this,arguments)},e}(d["default"]);e["default"]=_,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(23)["default"],o=r(3)["default"],i=(r(8)["default"],r(1)["default"]);e.__esModule=!0;var s=r(5),a=i(s),u=r(106),c=i(u),f=r(180),l=(i(f),r(184)),h=i(l),p=a["default"]("qiwi:sso-client:ServerIframeAuthStrategy"),d=function(t){function e(r){var n=r.locale,i=r.authBaseUrl;return function(){o(this,e),t.call(this,{authBaseUrl:i,locale:n,cors:!1}),this._tgtManager=new c["default"]({fetcher:this._fetcher})}.apply(this,arguments)}return n(e,t),e.prototype.tgtManagerUpdateParams=function(t){return this._tgtManager.updateParams(t)},e.prototype.tgtManagerLoad=function(){return this._tgtManager.load()},e.prototype.tgtManagerSave=function(t){var e=t.ticket;return function(){return this._tgtManager.save(e)}.apply(this,arguments)},e.prototype.setCredentials=function(t){var e=t.service,r=t.ticket;return function(){this._tgtManager.updateParams({service:e}),this._tgtManager.save(r),p("@deprecated setCredentials: %o",{service:e,ticket:r})}.apply(this,arguments)},e}(h["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(23)["default"],o=r(3)["default"],i=(r(8)["default"],r(1)["default"]);e.__esModule=!0;var s=r(45),a=i(s),u=function(t){function e(r){var n=r.fetcher,i=r.service;return function(){o(this,e),t.call(this),this._fetcher=n,this._service=i}.apply(this,arguments)}return n(e,t),e.prototype.load=function(){return this._fetcher.fetch("/cas/tgts",{method:"GET",noAuth:!0}).then(function(t){var e=t.entity;return e.ticket})},e.prototype.save=function(t){return this._fetcher.fetch("/cas/sts",{method:"POST",json:{ticket:t,service:this._service}}).then(function(){return!0})},e}(a["default"]);e["default"]=u,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(23)["default"],o=r(3)["default"],i=r(8)["default"],s=r(1)["default"];e.__esModule=!0;var a=r(45),u=s(a),c=function(t){function e(r){var n=r.fetcher,i=r.operationId,s=r.orderId,a=r.login;return function(){if(o(this,e),t.call(this),!s)throw new Error("orderId is empty");if(!a)throw new Error("login is empty");if(!n)throw new Error("fetcher is empty");this._orderId=s,this._operationId=i||0,this._login=a,this._fetcher=n}.apply(this,arguments)}return n(e,t),e.prototype.load=function(){return this._fetcher.fetch("/cas/operations/"+this._operationId+"/entities/"+this._orderId+"/users/"+this._login,{method:"GET",noAuth:!0}).then(function(t){var e=t.entity;return e.ticket})},e.prototype.save=function(t){return i.resolve(!0)},e}(u["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,r){"use strict";var n=r(23)["default"],o=r(3)["default"],i=r(1)["default"];e.__esModule=!0;var s=r(45),a=i(s),u=function(t){function e(r){var n=r.rpc;return function(){o(this,e),t.call(this),this._rpc=n}.apply(this,arguments)}return n(e,t),e.prototype.load=function(){return this._rpc.then(function(t){return t("tgtManagerLoad")})},e.prototype.save=function(t){return this._rpc.then(function(e){return e("tgtManagerSave",{ticket:t})})},e}(a["default"]);e["default"]=u,t.exports=e["default"]},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r,n){var o=r(n);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},,function(t,e,r,n){var o=r(n);t.exports=function(t,e,r){if(o(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,r,n){t.exports=!r(n)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r,n,o){var i=r(n),s=r(o).document,a=i(s)&&i(s.createElement);t.exports=function(t){return a?s.createElement(t):{}}},function(t,e,r,n,o,i){var s=r(n),a=r(o);t.exports=r(i)?function(t,e,r){return s.setDesc(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r,n){t.exports=r(n).document&&document.documentElement},function(t,e,r,n){var o=r(n);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e,r,n,o,i){var s=r(n),a=r(o),u=r(i);t.exports=function(t,e){var r=(a.Object||{})[t]||Object[t],n={};n[t]=e(r),s(s.S+s.F*u(function(){
r(1)}),"Object",n)}},,function(t,e,r,n){var o=r(n),i="__core-js_shared__",s=o[i]||(o[i]={});t.exports=function(t){return s[t]||(s[t]={})}},function(t,e,r,n,o){var i=r(n),s=r(o);t.exports=function(t){return i(s(t))}},function(t,e,r,n){var o=r(n),i=Math.min;t.exports=function(t){return t>0?i(o(t),9007199254740991):0}},function(t,e,r,n){var o=r(n);t.exports=function(t){return Object(o(t))}},,function(t,e,r,n,o,i){var s=r(n)("wks"),a=r(o),u=r(i).Symbol;t.exports=function(t){return s[t]||(s[t]=u&&u[t]||(u||a)("Symbol."+t))}},function(t,e,r,n,o){"use strict";e.decode=e.parse=r(n),e.encode=e.stringify=r(o)}]));