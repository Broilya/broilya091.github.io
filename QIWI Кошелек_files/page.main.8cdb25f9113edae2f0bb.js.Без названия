(window.p=window.p||[]).push([[5],{1704:function(e,o,n){"use strict";n.r(o);var t=n(7),r=n(1),a=n(27),i=n(5),s=n(15),c=Symbol("invoices"),l=Symbol("banners-promo"),d=Symbol("banners-onboarding"),p=Symbol("favorites"),u=Symbol("payments"),m=Symbol("transfers"),b=Symbol("history"),y=[new s.Banner(19,[new s.BannerActionTarget(new s.BannerTargetUri("/cards?ref=new_main"))],new s.BannerImageData(new t.Images([new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/2/2B.png",280,400,"1x"),new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/2/2B@2x.png",280,400,"2x"),new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/2/2B@3x.png",280,400,"3x")]))),new s.Banner(20,[new s.BannerActionTarget(new s.BannerTargetUri("/cards/qvp/promo.action?ref=new_main"))],new s.BannerImageData(new t.Images([new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/11/11S.png",280,126,"1x"),new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/11/11S@2x.png",280,126,"2x"),new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/11/11S@3x.png",280,126,"3x")]))),new s.Banner(21,[new s.BannerActionTarget(new s.BannerTargetUri("https://bonus.qiwi.com/?ref=new_main"))],new s.BannerImageData(new t.Images([new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/12/12S.png",280,126,"1x"),new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/12/12S@2x.png",280,126,"2x"),new t.Image(STATIC_URL+"/img/qiwi_com/promo/main/banner/new/12/12S@3x.png",280,126,"3x")])))],_=function(){function MainStore(){}return MainStore.prototype.init=function(){var e=this.router.search.partnerLink;if(e&&fetch(e,{method:"POST",mode:"no-cors"}),!this.user.authorized)return this.router.loading=!0,void this.router.replace("maindev.qiwi.com"===location.host?"/landing":"/");this.loadPromoBanners(),this.loadOnboardingBanners(),this.loadInvoices(),this.loadFavorites(),this.loadPayments(),this.loadHistory()},MainStore.prototype.loadPromoBanners=function(){var o=this;this.asyncPromoBanners().then(function(e){return o.loadPromoBannersSuccess(e)}).catch(function(e){return o.loadPromoBannersError(e)})},MainStore.prototype.loadPromoBannersSuccess=function(e){this.promoBanners=e,this.promoBanners.bind("Affix").toConstantValue(!0),this.promoBanners.bind(t.Config).toConstantValue({source:s.BannerSource.DEFAULT,place:s.BannerPlace.PROMO,request:new s.BannerRequest("banner_request_site",[new s.BannerRequestPlace(s.BannerPlace.PROMO,3)]),filter:Object(s.filterImageBanners)(s.BannerPlace.PROMO,280,400),fallback:y}),this.promoBannersError=void 0},MainStore.prototype.loadPromoBannersError=function(e){this.promoBannersError||(this.promoBanners=void 0,this.promoBannersError=e,this.loadPromoBanners())},MainStore.prototype.loadOnboardingBanners=function(){var o=this;this.asyncOnboardingBanners().then(function(e){return o.loadOnboardingBannersSuccess(e)}).catch(function(e){return o.loadOnboardingBannersError(e)})},MainStore.prototype.loadOnboardingBannersSuccess=function(e){this.onboardingBanners=e,this.onboardingBanners.bind("Affix").toConstantValue(!1),this.onboardingBanners.bind(t.Config).toConstantValue({source:s.BannerSource.DEFAULT,place:s.BannerPlace.ONBOARDING,request:new s.BannerRequest("banner_request_site",[new s.BannerRequestPlace(s.BannerPlace.ONBOARDING,1)]),filter:Object(s.filterPlaceBanners)(s.BannerPlace.ONBOARDING),fallback:[]}),this.onboardingBannersError=void 0},MainStore.prototype.loadOnboardingBannersError=function(e){this.onboardingBannersError||(this.onboardingBanners=void 0,this.onboardingBannersError=e,this.loadOnboardingBanners())},MainStore.prototype.loadInvoices=function(){var o=this;this.asyncInvoices().then(function(e){return o.loadInvoicesSuccess(e)}).catch(function(e){return o.loadInvoicesError(e)})},MainStore.prototype.loadInvoicesSuccess=function(e){this.invoices=e,this.invoicesError=void 0},MainStore.prototype.loadInvoicesError=function(e){this.invoicesError||(this.invoices=void 0,this.invoicesError=e,this.loadInvoices())},MainStore.prototype.loadFavorites=function(){var o=this;this.asyncFavorites().then(function(e){return o.loadFavoritesSuccess(e)}).catch(function(e){return o.loadFavoritesError(e)})},MainStore.prototype.loadFavoritesSuccess=function(e){this.favorites=e,this.favorites.bind("FavoritesCount").toConstantValue(6),this.favorites.bind("FavoritesToggle").toConstantValue(!1),this.favoritesError=void 0},MainStore.prototype.loadFavoritesError=function(e){this.favoritesError||(this.favorites=void 0,this.favoritesError=e,this.loadFavorites())},MainStore.prototype.loadPayments=function(){var o=this;this.asyncPayments().then(function(e){return o.loadPaymentsSuccess(e)})},MainStore.prototype.loadPaymentsSuccess=function(e){this.payments=e},MainStore.prototype.loadHistory=function(){var o=this;this.asyncHistory().then(function(e){return o.loadHistorySuccess(e)}).catch(function(e){return o.loadHistoryError(e)})},MainStore.prototype.loadHistorySuccess=function(e){this.history=e,this.historyError=void 0},MainStore.prototype.loadHistoryError=function(e){this.historyError||(this.history=void 0,this.historyError=e,this.loadHistory())},r.__decorate([Object(a.inject)(t.Router)],MainStore.prototype,"router",void 0),r.__decorate([Object(a.inject)(t.User)],MainStore.prototype,"user",void 0),r.__decorate([Object(a.inject)(l)],MainStore.prototype,"asyncPromoBanners",void 0),r.__decorate([Object(a.inject)(d)],MainStore.prototype,"asyncOnboardingBanners",void 0),r.__decorate([Object(a.inject)(c)],MainStore.prototype,"asyncInvoices",void 0),r.__decorate([Object(a.inject)(p)],MainStore.prototype,"asyncFavorites",void 0),r.__decorate([Object(a.inject)(u)],MainStore.prototype,"asyncPayments",void 0),r.__decorate([Object(a.inject)(b)],MainStore.prototype,"asyncHistory",void 0),r.__decorate([i.observable],MainStore.prototype,"promoBanners",void 0),r.__decorate([i.observable],MainStore.prototype,"onboardingBanners",void 0),r.__decorate([i.observable],MainStore.prototype,"invoices",void 0),r.__decorate([i.observable],MainStore.prototype,"favorites",void 0),r.__decorate([i.observable],MainStore.prototype,"payments",void 0),r.__decorate([i.observable],MainStore.prototype,"history",void 0),r.__decorate([i.observable],MainStore.prototype,"promoBannersError",void 0),r.__decorate([i.observable],MainStore.prototype,"onboardingBannersError",void 0),r.__decorate([i.observable],MainStore.prototype,"invoicesError",void 0),r.__decorate([i.observable],MainStore.prototype,"favoritesError",void 0),r.__decorate([i.observable],MainStore.prototype,"historyError",void 0),r.__decorate([i.action,Object(a.postConstruct)()],MainStore.prototype,"init",null),r.__decorate([i.action],MainStore.prototype,"loadPromoBanners",null),r.__decorate([i.action],MainStore.prototype,"loadPromoBannersSuccess",null),r.__decorate([i.action],MainStore.prototype,"loadPromoBannersError",null),r.__decorate([i.action],MainStore.prototype,"loadOnboardingBanners",null),r.__decorate([i.action],MainStore.prototype,"loadOnboardingBannersSuccess",null),r.__decorate([i.action],MainStore.prototype,"loadOnboardingBannersError",null),r.__decorate([i.action],MainStore.prototype,"loadInvoices",null),r.__decorate([i.action],MainStore.prototype,"loadInvoicesSuccess",null),r.__decorate([i.action],MainStore.prototype,"loadInvoicesError",null),r.__decorate([i.action],MainStore.prototype,"loadFavorites",null),r.__decorate([i.action],MainStore.prototype,"loadFavoritesSuccess",null),r.__decorate([i.action],MainStore.prototype,"loadFavoritesError",null),r.__decorate([i.action],MainStore.prototype,"loadPayments",null),r.__decorate([i.action],MainStore.prototype,"loadPaymentsSuccess",null),r.__decorate([i.action],MainStore.prototype,"loadHistory",null),r.__decorate([i.action],MainStore.prototype,"loadHistorySuccess",null),r.__decorate([i.action],MainStore.prototype,"loadHistoryError",null),MainStore=r.__decorate([Object(a.injectable)()],MainStore)}(),S=n(0),v=n(18),h=n(20),g=n(12),B=function(e){function MainPage(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(MainPage,e),MainPage.prototype.render=function(){return this.user.authorized?S.createElement(g.i,null,S.createElement(g.Ob,null),S.createElement(g.mb,{container:this.store.invoices}),S.createElement(g.qc,null,S.createElement(g.nb,null,S.createElement(g.pb,{width:"9"},S.createElement(g.mb,{container:this.store.onboardingBanners}),S.createElement(g.mb,{container:this.store.favorites}),S.createElement(g.mb,{container:this.store.history})),S.createElement(g.pb,{width:"3"},S.createElement(g.mb,{container:this.store.promoBanners}))),S.createElement(g.mb,{container:this.store.payments})),S.createElement(g.Kb,null)):S.createElement(g.i,null,S.createElement(g.Ob,null),S.createElement(g.qc,null,S.createElement(g.Yd,null)),S.createElement(g.Kb,null))},r.__decorate([Object(h.resolve)(t.Store)],MainPage.prototype,"store",void 0),r.__decorate([Object(h.resolve)(t.User)],MainPage.prototype,"user",void 0),MainPage=r.__decorate([v.observer],MainPage)}(S.Component),M=n(212);o.default=function(e){var o=e.createChild();return o.bind(t.View).toConstructor(B),o.bind(t.Store).to(_).inSingletonScope(),o.bind(l).toConstantValue(Object(M.c)(o)),o.bind(d).toConstantValue(Object(M.c)(o)),o.bind(c).toConstantValue(Object(M.m)(o)),o.bind(p).toConstantValue(Object(M.h)(o)),o.bind(u).toConstantValue(Object(M.q)(o)),o.bind(m).toConstantValue(Object(M.C)(o)),o.bind(b).toConstantValue(Object(M.n)(o)),o}}}]);