(window.p=window.p||[]).push([[45],{1319:function(e,t,a){"use strict";a.r(t);var o,r=a(7),s=a(212),i=a(1),n=a(27),l=a(5),f=a(1347),c=a(1454),v=a(1396);(o||(o={})).TEXT="text";var m,d,u=o,p=a(1521),h=a(74),g=a(296),y=a(1353),b=a(1528),S=a(1455),E=function(){function HistoryItemStore(){this.loading=!1,this.active=!1,this.lastMessagesLoading=!1}return HistoryItemStore.prototype.init=function(){},HistoryItemStore.prototype.loadGreetingCard=function(){var t=this;this.greetingCardLoading=!0,this.greetingCardError=!1,this.greetingCardService.getCardImage(this.item.txnId).then(function(e){return t.loadGreetingCardSuccess(e)}).catch(function(e){return t.loadGreetingCardError(e)})},HistoryItemStore.prototype.loadGreetingCardSuccess=function(e){this.greetingCardLoading=!1,this.greetingCardError=!1,this.greetingCard=URL.createObjectURL(e)},HistoryItemStore.prototype.loadGreetingCardError=function(e){this.greetingCardLoading=!1,this.greetingCardError=!0,this.greetingCard=void 0},HistoryItemStore.prototype.load=function(){var t=this;return this.loading=!0,this.item.features.greetingCardAttached&&this.loadGreetingCard(),this.historyService.getItem(this.item.txnId,f.h[this.item.type]).then(function(e){return t.loadSuccess(e)}).catch(function(e){return t.loadError(e)})},HistoryItemStore.prototype.loadSuccess=function(e){this.loading=!1,this.full=e},HistoryItemStore.prototype.loadError=function(e){this.loading=!1},HistoryItemStore.prototype.getChatStatus=function(){var t=this;this.paymentChatService.getStatus(this.item.txnId).then(function(e){return t.getChatStatusSuccess(e)}).catch(function(e){return t.getChatStatusError(e)})},HistoryItemStore.prototype.getChatStatusSuccess=function(e){this.chatStatus=e,this.chatStatusError=void 0,this.chatStatus.canWrite&&this.getLastMessagesForChat()},HistoryItemStore.prototype.getChatStatusError=function(e){this.chatStatus=void 0,this.chatStatusError=e},HistoryItemStore.prototype.getLastMessagesForChat=function(){var t=this;this.lastMessagesLoading=!0,this.paymentChatService.getMessagesForChat(this.item.txnId,new p.a(2)).then(function(e){return t.getLastMessagesForChatSuccess(e)}).catch(function(e){return t.getLastMessagesForChatError(e)})},HistoryItemStore.prototype.getLastMessagesForChatSuccess=function(e){this.lastMessages=[].concat(e,this.commentMessage?this.commentMessage:[]).slice(0,2),this.lastMessagesError=void 0,this.lastMessagesLoading=!1,this.lastMessage=0<this.lastMessages.length?this.lastMessages[0]:void 0},HistoryItemStore.prototype.getLastMessagesForChatError=function(e){this.lastMessages=void 0,this.lastMessagesError=e,this.lastMessagesLoading=!1},Object.defineProperty(HistoryItemStore.prototype,"commentMessage",{get:function(){if(this.item.features.chatAvailable&&this.item.comment)return new c.a(this.item.txnId,this.item.date,this.item.type===f.h.IN?v.a.IN:v.a.OUT,this.item.txnId.toString(),this.item.comment,u.TEXT,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(HistoryItemStore.prototype,"messagesCount",{get:function(){var e=0;return this.chatStatus&&(e+=this.chatStatus.messagesCount),this.commentMessage&&(e+=1),e},enumerable:!0,configurable:!0}),HistoryItemStore.prototype.toggle=function(){this.loading||this.full||this.load(),this.active=!this.active,this.active&&this.item.features.chatAvailable&&this.getChatStatus()},HistoryItemStore.prototype.showCheque=function(){this.routerStore.open("/payment/cheque/"+this.item.txnId+"/"+f.h[this.item.type],"_blank")},HistoryItemStore.prototype.printCheque=function(){this.routerStore.open("/payment/cheque/"+this.item.txnId+"/"+f.h[this.item.type]+"#print","_blank")},HistoryItemStore.prototype.downloadOrder=function(){this.routerStore.open("/report/bankDocument.action?transaction="+this.item.txnId,"_blank")},HistoryItemStore.prototype.showSendCheque=function(){this.loadSendCheque()},HistoryItemStore.prototype.showChatPopup=function(){this.loadChatPopup()},HistoryItemStore.prototype.repeatPayment=function(){this.routerStore.open("/payment/form/"+this.item.provider.id+"?transaction="+this.item.txnId)},HistoryItemStore.prototype.replyGreetingCard=function(){this.routerStore.post("/payment/form/99",{"extra['account']":this.item.account,"extra['greeting']":!0})},HistoryItemStore.prototype.addToFavorite=function(){this.routerStore.push("/payment/favorite/create/"+this.item.txnId)},HistoryItemStore.prototype.addToSchedule=function(){this.routerStore.push("/payment/favorite/create/"+this.item.txnId+"?schedule=true")},Object.defineProperty(HistoryItemStore.prototype,"first",{get:function(){return this.item.txnId===this.userStore.firstTxnId},enumerable:!0,configurable:!0}),HistoryItemStore.prototype.loadSendCheque=function(){var t=this;this.asyncSendCheque().then(function(e){return t.loadSendChequeSuccess(e)}).catch(function(e){return t.loadSendChequeError(e)})},HistoryItemStore.prototype.loadSendChequeSuccess=function(e){this.sendCheque=e,this.sendCheque.get(r.Store).setItem(this.item),this.sendChequeError=void 0},HistoryItemStore.prototype.loadSendChequeError=function(e){this.sendChequeError||(this.sendCheque=void 0,this.sendChequeError=e,this.loadSendCheque())},HistoryItemStore.prototype.loadChatPopup=function(){var t=this;this.asyncChatPopup().then(function(e){return t.loadChatPopupSuccess(e)}).catch(function(e){return t.loadChatPopupError(e)})},HistoryItemStore.prototype.loadChatPopupSuccess=function(e){this.chatPopup=e,this.chatPopupStore.show(this.item,this.commentMessage),this.chatPopupError=void 0,this.listenChatPopupVisible()},HistoryItemStore.prototype.loadChatPopupError=function(e){this.loadChatPopupError||(this.chatPopup=void 0,this.chatPopupError=e,this.loadChatPopup())},Object.defineProperty(HistoryItemStore.prototype,"chatPopupStore",{get:function(){return this.chatPopup&&this.chatPopup.isBound(r.Store)?this.chatPopup.get(r.Store):void 0},enumerable:!0,configurable:!0}),HistoryItemStore.prototype.listenChatPopupVisible=function(){var e=this;this.chatPopupVisibleDisposer&&this.chatPopupVisibleDisposer(),this.chatPopupVisibleDisposer=Object(l.reaction)(function(){return e.chatPopupStore.visible},function(){return e.handleChatPopupVisible()})},HistoryItemStore.prototype.handleChatPopupVisible=function(){this.chatPopupStore.visible||this.getChatStatus()},i.__decorate([Object(n.inject)(y.a)],HistoryItemStore.prototype,"historyService",void 0),i.__decorate([Object(n.inject)(b.a)],HistoryItemStore.prototype,"greetingCardService",void 0),i.__decorate([Object(n.inject)(S.a)],HistoryItemStore.prototype,"paymentChatService",void 0),i.__decorate([Object(n.inject)(h.a)],HistoryItemStore.prototype,"errorStore",void 0),i.__decorate([Object(n.inject)(r.User)],HistoryItemStore.prototype,"userStore",void 0),i.__decorate([Object(n.inject)(r.Router)],HistoryItemStore.prototype,"routerStore",void 0),i.__decorate([Object(n.inject)(g.a)],HistoryItemStore.prototype,"cookieStore",void 0),i.__decorate([Object(n.inject)("SendCheque")],HistoryItemStore.prototype,"asyncSendCheque",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"sendCheque",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"sendChequeError",void 0),i.__decorate([Object(n.inject)("ChatPopup")],HistoryItemStore.prototype,"asyncChatPopup",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"chatPopup",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"chatPopupError",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"item",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"loading",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"active",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"greetingCard",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"greetingCardLoading",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"greetingCardError",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"full",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"lastMessage",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"chatStatus",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"chatStatusError",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"lastMessages",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"lastMessagesLoading",void 0),i.__decorate([l.observable],HistoryItemStore.prototype,"lastMessagesError",void 0),i.__decorate([l.action,Object(n.postConstruct)()],HistoryItemStore.prototype,"init",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadGreetingCard",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadGreetingCardSuccess",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadGreetingCardError",null),i.__decorate([l.action],HistoryItemStore.prototype,"load",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadSuccess",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadError",null),i.__decorate([l.action],HistoryItemStore.prototype,"getChatStatus",null),i.__decorate([l.action],HistoryItemStore.prototype,"getChatStatusSuccess",null),i.__decorate([l.action],HistoryItemStore.prototype,"getChatStatusError",null),i.__decorate([l.action],HistoryItemStore.prototype,"getLastMessagesForChat",null),i.__decorate([l.action],HistoryItemStore.prototype,"getLastMessagesForChatSuccess",null),i.__decorate([l.action],HistoryItemStore.prototype,"getLastMessagesForChatError",null),i.__decorate([l.computed],HistoryItemStore.prototype,"commentMessage",null),i.__decorate([l.computed],HistoryItemStore.prototype,"messagesCount",null),i.__decorate([l.action],HistoryItemStore.prototype,"toggle",null),i.__decorate([l.action],HistoryItemStore.prototype,"showCheque",null),i.__decorate([l.action],HistoryItemStore.prototype,"printCheque",null),i.__decorate([l.action],HistoryItemStore.prototype,"downloadOrder",null),i.__decorate([l.action],HistoryItemStore.prototype,"showSendCheque",null),i.__decorate([l.action],HistoryItemStore.prototype,"showChatPopup",null),i.__decorate([l.action],HistoryItemStore.prototype,"repeatPayment",null),i.__decorate([l.action],HistoryItemStore.prototype,"replyGreetingCard",null),i.__decorate([l.action],HistoryItemStore.prototype,"addToFavorite",null),i.__decorate([l.action],HistoryItemStore.prototype,"addToSchedule",null),i.__decorate([l.computed],HistoryItemStore.prototype,"first",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadSendCheque",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadSendChequeSuccess",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadSendChequeError",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadChatPopup",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadChatPopupSuccess",null),i.__decorate([l.action],HistoryItemStore.prototype,"loadChatPopupError",null),i.__decorate([l.computed],HistoryItemStore.prototype,"chatPopupStore",null),HistoryItemStore=i.__decorate([Object(n.injectable)()],HistoryItemStore)}(),C=a(0),I=a.n(C),_=a(11),H=a.n(_),N=a(18),w=a(20),x=a(4),T=a(12),j=a(1393),O=a.n(j),k=a(9),A=a(96),M=a.n(A),$=a(2),P={self:{display:"block",border:[1,"solid",Object($.k)($.r.baseColor,.07)],borderRadius:10,width:350,height:480,backgroundColor:$.r.whiteColor,overflow:"hidden"},image:{width:350,height:480},dummy:{padding:45,display:"flex",flexDirection:"column",justifyContent:"center"},dummyContent:{textAlign:"center"},dummyIcon:i.__assign({},Object($.j)(117,117,59),{margin:[0,"auto",65]}),dummyTitle:i.__assign({},Object($.j)(116,13),{margin:[0,"auto",24]}),dummyText1:i.__assign({},Object($.j)(191),{margin:[14,"auto"]}),dummyText2:i.__assign({},Object($.j)(220),{margin:[14,"auto"]}),dummyText3:i.__assign({},Object($.j)(141),{margin:[14,"auto"]}),warningIcon:{width:42,display:"inline-block"}},R=function(e){function HistoryItemGreetingCard(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItemGreetingCard,e),HistoryItemGreetingCard.prototype.render=function(){var e,t,a=this,o=this.props.classes;return this.store.item.features.greetingCardAttached?this.store.greetingCardError?I.a.createElement("div",{className:H()((e={},e[o.self]=!0,e[o.dummy]=!0,e))},I.a.createElement("div",{className:o.dummyContent},I.a.createElement(T.Id,null,I.a.createElement("div",{className:o.warningIcon},I.a.createElement(T.Ke,null)),I.a.createElement(I.a.Fragment,null,I.a.createElement(T.h,null,"Не удалось загрузить открытку"),I.a.createElement(T.ad,null,"Попробуйте обновить страницу")),I.a.createElement(T.Ub,null,I.a.createElement(T.Td,{onClick:function(){return a.store.loadGreetingCard()}},"Обновить"))))):this.store.greetingCardLoading?I.a.createElement("div",{className:H()((t={},t[o.self]=!0,t[o.dummy]=!0,t))},I.a.createElement("div",{className:o.dummyContent},I.a.createElement("div",{className:o.dummyIcon}),I.a.createElement("div",{className:o.dummyTitle}),I.a.createElement("div",{className:o.dummyText1}),I.a.createElement("div",{className:o.dummyText2}),I.a.createElement("div",{className:o.dummyText3}))):I.a.createElement("div",{className:o.self},I.a.createElement("img",{src:this.store.greetingCard,className:o.image})):null},i.__decorate([Object(w.resolve)(r.Store)],HistoryItemGreetingCard.prototype,"store",void 0),HistoryItemGreetingCard=i.__decorate([Object(x.rb)(P),N.observer],HistoryItemGreetingCard)}(x.bb),q=i.__assign({},$.o,{position:"relative",display:"inline-block",padding:[0,10,10,0],width:180,verticalAlign:"top",textAlign:"left",lineHeight:1.31}),L={self:{padding:[0,115,46],width:"100%",height:"auto",transition:{timingFunction:"ease-in-out"}},status:{display:"block",maxWidth:330},error:{display:"block",maxWidth:330,color:$.r.errorColor},support:{maxWidth:330},details:{},title:{marginBottom:15,textTransform:"uppercase",letterSpacing:1.5,fontWeight:600,fontSize:13},table:{width:"100%",tableLayout:"fixed"},tableRow:{$lastChild:{$$:{tableTitle:{paddingBottom:0},tableValue:{paddingBottom:0}}}},tableTitle:i.__assign({},q,{color:"#666"}),tableValue:i.__assign({},q,{color:$.r.baseColor}),tableTotalTitle:i.__assign({},q,{color:$.r.baseColor,fontWeight:500,paddingBottom:0}),tableTotalValue:i.__assign({},q,{color:$.r.baseColor,fontWeight:500,paddingBottom:0}),invoices:{},invoicesAction:{display:"inline-block",cursor:"pointer",$notLastChild:{marginRight:25},$hover:{$$:{invoicesActionIcon:{path:{fill:Object($.k)($.r.baseColor,1)}},invoicesActionText:{color:$.r.linkColorHover}}}},invoicesActionIcon:{self:{width:18,height:18},path:i.__assign({},Object($.p)("fill"),{fill:Object($.k)($.r.baseColor,.7)})},invoicesActionText:i.__assign({},Object($.p)("color"),{marginLeft:8,textDecoration:"none",lineHeight:1.3,color:$.r.linkColor,$focus:{color:$.r.linkColorHover},$active:{color:$.r.linkColorHover}})},V=function(e){function HistoryItemContentStatusError(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItemContentStatusError,e),HistoryItemContentStatusError.prototype.render=function(){var t=this,a=this.props.classes,e=I.a.createElement("table",{className:a.table},I.a.createElement("tbody",null,I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},"Сумма платежа"),I.a.createElement("td",{className:a.tableValue},this.store.item.sum.toString()))));return I.a.createElement("div",{className:a.self},I.a.createElement(T.Md,null,I.a.createElement(T.Id,null,I.a.createElement(T.Fd,null,I.a.createElement("span",{className:a.error},this.store.item.error),I.a.createElement("div",{className:a.support},"Попробуйте повторить платеж или"," ",I.a.createElement(T.hc,{href:"/support.action",target:"_blank",children:"свяжитесь с технической поддержкой"}))),this.store.item.features.greetingCardAttached?I.a.createElement(R,null):e),this.store.item.features.greetingCardAttached?e:null,I.a.createElement("div",{className:a.details},I.a.createElement("h2",{className:a.title},"Подробные реквизиты"),this.store.loading?I.a.createElement(T.Yd,null):I.a.createElement("table",{className:a.table},I.a.createElement("tbody",null,I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},"Дата платежа"),I.a.createElement("td",{className:a.tableValue},Object(k.format)(this.store.item.date,"DD.MM.YYYY в HH:mm",{locale:M.a}))),I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},"Номер квитанции"),I.a.createElement("td",{className:a.tableValue},this.store.item.txnId)),this.store.full?this.store.full.paymentExtras.map(function(e){return I.a.createElement("tr",{key:"extra-"+t.store.item.txnId+"-"+e.name,className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},e.title),I.a.createElement("td",{className:a.tableValue},e.value))}):null)))))},i.__decorate([Object(w.resolve)(r.Store)],HistoryItemContentStatusError.prototype,"store",void 0),HistoryItemContentStatusError=i.__decorate([Object(x.rb)(L),N.observer],HistoryItemContentStatusError)}(x.bb),W=function(e){function HistoryItemContentWaiting(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItemContentWaiting,e),HistoryItemContentWaiting.prototype.render=function(){var e=this,t=this.props.classes,a=this.store.item,o=I.a.createElement("table",{className:t.table},I.a.createElement("tbody",null,I.a.createElement("tr",{className:t.tableRow},I.a.createElement("td",{className:t.tableTitle},"Сумма платежа"),I.a.createElement("td",{className:t.tableValue},a.sum.toString())),I.a.createElement("tr",{className:t.tableRow},I.a.createElement("td",{className:t.tableTitle},"Комиссия"),I.a.createElement("td",{className:t.tableValue},a.commission.toString())),I.a.createElement("tr",{className:t.tableRow},I.a.createElement("td",{className:t.tableTotalTitle},"Итого"),I.a.createElement("td",{className:t.tableTotalValue},a.total.toString()))));return I.a.createElement("div",{className:t.self},I.a.createElement(T.Md,null,I.a.createElement(T.Id,null,I.a.createElement("span",{className:t.status},"Платеж обрабатывается"),a.features.greetingCardAttached?I.a.createElement(R,null):o),a.features.greetingCardAttached?o:null,I.a.createElement("div",{className:t.details},I.a.createElement("h2",{className:t.title},"Подробные реквизиты"),this.store.loading?I.a.createElement(T.Yd,null):I.a.createElement("table",{className:t.table},I.a.createElement("tbody",null,I.a.createElement("tr",{className:t.tableRow},I.a.createElement("td",{className:t.tableTitle},"Дата платежа"),I.a.createElement("td",{className:t.tableValue},Object(k.format)(a.date,"DD.MM.YYYY в HH:mm",{locale:M.a}))),I.a.createElement("tr",{className:t.tableRow},I.a.createElement("td",{className:t.tableTitle},"Номер квитанции"),I.a.createElement("td",{className:t.tableValue},a.txnId)),this.store.full?this.store.full.paymentExtras.map(function(e){return I.a.createElement("tr",{key:"extra-"+a.txnId+"-"+e.name,className:t.tableRow},I.a.createElement("td",{className:t.tableTitle},e.title),I.a.createElement("td",{className:t.tableValue},e.value))}):null))),a.features.chequeReady?I.a.createElement("div",{className:t.invoices},I.a.createElement("h2",{className:t.title},"Квитанция об операции"),I.a.createElement("div",{className:t.invoicesAction,onClick:Object(x.lb)(function(){return e.store.showCheque()})},I.a.createElement(T.Ib,{classes:t.invoicesActionIcon}),I.a.createElement("span",{className:t.invoicesActionText},"Посмотреть")),I.a.createElement("div",{className:t.invoicesAction,onClick:Object(x.lb)(function(){return e.store.printCheque()})},I.a.createElement(T.od,{classes:t.invoicesActionIcon})),I.a.createElement("div",{className:t.invoicesAction,onClick:Object(x.lb)(function(){return e.store.showSendCheque()})},I.a.createElement(T.Od,{classes:t.invoicesActionIcon}))):null,a.features.orderAvailable?I.a.createElement("div",{className:t.invoices},I.a.createElement("h2",{className:t.title},"Платежное поручение"),I.a.createElement("div",{className:t.invoicesAction,onClick:Object(x.lb)(function(){return e.store.downloadOrder()})},I.a.createElement(T.Ib,{classes:t.invoicesActionIcon}),I.a.createElement("span",{className:t.invoicesActionText},"Посмотреть"))):null),I.a.createElement(T.mb,{container:this.store.sendCheque}))},i.__decorate([Object(w.resolve)(r.Store)],HistoryItemContentWaiting.prototype,"store",void 0),HistoryItemContentWaiting=i.__decorate([Object(x.rb)(L),N.observer],HistoryItemContentWaiting)}(x.bb),F={self:(m={width:"60%"},m[$.r.media.large]={width:392},m),header:{display:"flex",alignItems:"center",justifyContent:"space-between"},headerTitle:{color:$.r.baseColor,fontSize:16,fontWeight:500,lineHeight:1.5},headerTotal:{color:Object($.k)($.r.baseColor,.6),fontSize:14,fontWeight:300,lineHeight:1.5},write:{display:"flex",justifyContent:"flex-end",marginTop:1,padding:[12,24],background:$.r.bgColor,borderBottomLeftRadius:10,borderBottomRightRadius:10},messages:{padding:24,background:$.r.bgColor,borderTopRightRadius:10,borderTopLeftRadius:10},message:i.__assign({minHeight:36,marginTop:12},Object($.c)()),messageContent:{display:"inline-block",position:"relative",maxWidth:320,minWidth:36,minHeight:36,borderRadius:18,padding:[8,16],wordBreak:"break-word",wordWrap:"break-word"},messageIn:{background:$.r.separationColor,$$:{messageText:{color:$.r.baseColor,opacity:.6},messageTail:{self:{left:-8,bottom:0,transform:"scale(1, -1)"},path:{fill:$.r.separationColor}}}},messageOut:{float:"right",background:"#ff8200",$$:{messageText:{color:$.r.whiteColor},messageTail:{self:{right:-8,bottom:0,transform:"scale(-1, -1)"},path:{fill:"#ff8200"}}}},messageText:{fontSize:14,fontWeight:300,lineHeight:1.43},messageTail:{self:{position:"absolute",width:19,height:18},path:{}},stub:{height:30,margin:[8,"auto"]}},G=function(e){function HistoryItemMessages(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItemMessages,e),HistoryItemMessages.prototype.render=function(){var e=this,o=this.props.classes;return I.a.createElement("div",{className:o.self},I.a.createElement("div",{className:o.messages},I.a.createElement("div",{className:o.header},I.a.createElement("div",{className:o.headerTitle},"Комментарии"),2<this.store.messagesCount?I.a.createElement("div",{className:o.headerTotal},"Всего ",100<this.store.messagesCount?"100+":this.store.messagesCount):null),I.a.createElement(T.ab,{active:this.store.lastMessagesLoading},this.store.lastMessages?0!==this.store.lastMessages.length||this.store.item.comment?this.store.lastMessages.reverse().map(function(e,t){var a;return I.a.createElement("div",{className:o.message,key:t},I.a.createElement("div",{className:H()((a={},a[o.messageContent]=!0,a[o.messageIn]=e.direction===v.a.IN,a[o.messageOut]=e.direction===v.a.OUT,a))},I.a.createElement(T.K,{classes:o.messageTail}),I.a.createElement("div",{className:o.messageText},e.text)))}):I.a.createElement(T.ad,{size:x.ib.TEXT_SMALL},"Оставьте комментарий к переводу для получателя, он сможет на него ответить."):I.a.createElement("div",{className:o.stub}))),I.a.createElement("div",{className:o.write},I.a.createElement(T.Ce,null,I.a.createElement(T.Lc,{children:"Написать",onClick:function(){return e.store.showChatPopup()}}))))},i.__decorate([Object(w.resolve)(r.Store)],HistoryItemMessages.prototype,"store",void 0),HistoryItemMessages=i.__decorate([Object(x.rb)(F),N.observer],HistoryItemMessages)}(x.bb),Y=function(e){function HistoryItemContentSuccess(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItemContentSuccess,e),HistoryItemContentSuccess.prototype.render=function(){var t=this,a=this.props.classes;return I.a.createElement("div",{className:a.self},I.a.createElement(T.Md,null,this.store.chatStatus&&this.store.chatStatus.canWrite?I.a.createElement(G,null):null,this.store.item.features.greetingCardAttached?I.a.createElement(T.Id,null,I.a.createElement(R,null),this.store.item.type===f.h.IN?I.a.createElement(T.Tb,null,I.a.createElement(T.Lc,{onClick:function(){return t.store.replyGreetingCard()}},"Отправить открытку в ответ")):null):null,I.a.createElement("table",{className:a.table},I.a.createElement("tbody",null,I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},"Сумма платежа"),I.a.createElement("td",{className:a.tableValue},this.store.item.sum.toString())),I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},"Комиссия"),I.a.createElement("td",{className:a.tableValue},this.store.item.commission.toString())),I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTotalTitle},"Итого"),I.a.createElement("td",{className:a.tableTotalValue},this.store.item.total.toString())))),I.a.createElement("div",{className:a.details},I.a.createElement("h2",{className:a.title},"Подробные реквизиты"),this.store.loading?I.a.createElement(T.Yd,null):I.a.createElement("table",{className:a.table},I.a.createElement("tbody",null,I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},"Дата платежа"),I.a.createElement("td",{className:a.tableValue},Object(k.format)(this.store.item.date,"DD.MM.YYYY в HH:mm",{locale:M.a}))),I.a.createElement("tr",{className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},"Номер квитанции"),I.a.createElement("td",{className:a.tableValue},this.store.item.txnId)),this.store.full?this.store.full.paymentExtras.map(function(e){return I.a.createElement("tr",{key:"extra-"+t.store.item.txnId+"-"+e.name,className:a.tableRow},I.a.createElement("td",{className:a.tableTitle},e.title),I.a.createElement("td",{className:a.tableValue},e.value))}):null))),this.store.item.features.chequeReady?I.a.createElement("div",{className:a.invoices},I.a.createElement("h2",{className:a.title},"Квитанция об операции"),I.a.createElement("div",{className:a.invoicesAction,onClick:Object(x.lb)(function(){return t.store.showCheque()})},I.a.createElement(T.Ib,{classes:a.invoicesActionIcon}),I.a.createElement("span",{className:a.invoicesActionText},"Посмотреть")),I.a.createElement("div",{className:a.invoicesAction,onClick:Object(x.lb)(function(){return t.store.printCheque()})},I.a.createElement(T.od,{classes:a.invoicesActionIcon})),I.a.createElement("div",{className:a.invoicesAction,onClick:Object(x.lb)(function(){return t.store.showSendCheque()})},I.a.createElement(T.Od,{classes:a.invoicesActionIcon}))):null,this.store.item.features.orderAvailable?I.a.createElement("div",{className:a.invoices},I.a.createElement("h2",{className:a.title},"Платежное поручение"),I.a.createElement("div",{className:a.invoicesAction,onClick:Object(x.lb)(function(){return t.store.downloadOrder()})},I.a.createElement(T.Ib,{classes:a.invoicesActionIcon}),I.a.createElement("span",{className:a.invoicesActionText},"Посмотреть"))):null),I.a.createElement(T.mb,{container:this.store.sendCheque}),I.a.createElement(T.mb,{container:this.store.chatPopup}))},i.__decorate([Object(w.resolve)(r.Store)],HistoryItemContentSuccess.prototype,"store",void 0),HistoryItemContentSuccess=i.__decorate([Object(x.rb)(L),N.observer],HistoryItemContentSuccess)}(x.bb),D={self:{width:"100%"}},B=function(e){function HistoryItemContent(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItemContent,e),HistoryItemContent.prototype.render=function(){var e=this.props.classes;return I.a.createElement(O.a,{isOpened:this.store.active,className:e.self,springConfig:{stiffness:300,damping:25}},this.store.item.statusError?I.a.createElement(V,null):this.store.item.statusWaiting?I.a.createElement(W,null):this.store.item.statusSuccess?I.a.createElement(Y,null):null)},i.__decorate([Object(w.resolve)(r.Store)],HistoryItemContent.prototype,"store",void 0),HistoryItemContent=i.__decorate([Object(x.rb)(D),N.observer],HistoryItemContent)}(x.bb),z={self:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",borderTop:[1,"solid","#efefef"],transform:"translateZ(0)",transition:[{property:"box-shadow",duration:3},{property:"border-top-color",duration:100}],$hover:{boxShadow:[0,3,45,0,Object($.k)($.r.baseColor,.15)],borderTopColor:"transparent",borderBottomColor:"transparent",$$:{errorContent:{transform:"translate3d(0, 0, 0)",color:$.r.whiteColor,transition:[{property:"transform",duration:200,timingFunction:"ease"},{property:"color",duration:100,timingFunction:"ease-in-out"}]}}},$focus:{$$:{errorContent:{transform:"translate(0, 0, 0)",color:$.r.whiteColor,transition:[{property:"transform",duration:200},{property:"color",duration:100}]}}},$firstChild:{borderTop:"none",$$:{errorBlock:{top:0}}}},statusIcon:i.__assign({position:"absolute",top:25,left:-20,width:40,height:40},Object($.p)("all")),greetingIcon:{self:{},path:{fill:$.r.primaryColor}},errorBlock:i.__assign({position:"absolute",top:-1,right:0,bottom:0,zIndex:10,overflow:"hidden",width:365,pointerEvents:"none",fontSmoothing:"antialiased"},Object($.p)("all",50)),errorContent:i.__assign({position:"absolute",top:0,bottom:0,display:"flex",flexDirection:"column",padding:[0,40,0,25],width:"100%",backgroundColor:$.r.errorColor,color:"transparent",verticalAlign:"middle",justifyContent:"center",transform:"translate3d(120%, 0, 0)"},Object($.p)("transform",200,"ease")),errorContentTitle:{display:"block",marginBottom:5,fontSize:16,fontWeight:500,lineHeight:1.31},errorContentText:{fontSize:14,lineHeight:1.29},header:{position:"relative",display:"flex",flexDirection:"row",overflow:"visible",padding:[20,40],width:"100%",cursor:"pointer",justifyContent:"space-between",alignItems:"center",$hover:{$$:{headerActions:{opacity:1,transform:"translateY(20px)"}}}},headerLogo:{width:50,height:50},headerLogoImg:{maxWidth:"100%",maxHeight:"100%"},headerLogoSvg:{self:{width:"100%",height:"100%",fill:$.r.bgColor},path:{fill:"#ccc"}},headerInfo:{position:"relative",display:"flex",width:"50%",flexDirection:"column",marginLeft:25,justifyContent:"center",flexGrow:1,$after:{content:'""',position:"absolute",top:0,right:0,display:"block",width:55,height:"100%",backgroundImage:"linear-gradient(to right, "+Object($.k)($.r.whiteColor,0)+", "+Object($.k)($.r.whiteColor,1)+" 50%)"}},headerInfoProvider:{display:"block",overflow:"hidden",whiteSpace:"nowrap",fontSize:18,lineHeight:1.5},headerInfoComment:{display:"block",overflow:"hidden",marginTop:3,maxWidth:480,color:"#666",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:13},headerSum:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative",textAlign:"right",paddingRight:67},headerSumAmount:{display:"block",whiteSpace:"nowrap",fontSize:30},headerSumInfo:{display:"block",margin:[5,0,0,0],color:"#666",fontSize:13},headerSumText:{opacity:1,transition:[{property:"transform",duration:133},{property:"opacity",duration:133}]},headerRepeat:{position:"relative",display:"block",width:47,height:47,marginLeft:20,flexShrink:0,transition:[{property:"opacity",duration:133},{property:"transform",duration:133}]},headerActions:i.__assign({position:"absolute",width:208,top:2,right:40,zIndex:10,opacity:0},Object($.p)("transform",133)),headerActionsRepeat:{},headerActionsFavorite:i.__assign({display:"none"},Object($.g)(15)),repeatable:{$$:{errorBlock:{width:548},errorContent:{paddingRight:257},headerSum:{paddingRight:0},header:{$hover:{$$:{headerSumText:{opacity:0,transform:"translateY(10px)"},headerRepeat:{opacity:0,transform:"translateY(10px)"}}}}},$:{active:{$$:{headerSumText:{opacity:0,transform:"translateY(10px)"},headerRepeat:{opacity:0,transform:"translateY(10px)"}}}}},favoritable:{},schedulable:{},success:{$:{active:{$$:{statusIcon:{transform:"scale(1)"}}}},$$:{statusIcon:{transform:"scale(0)"}}},active:{$$:{headerActionsFavorite:{display:"block"},headerActions:{opacity:1,transform:"translateY(20px)"},headerInfoComment:{whiteSpace:"normal"}}},income:{$$:{headerSumAmount:{color:"#4bbd5c"}}},incomeIcon:{self:{},path:{fill:$.r.secondaryColor}},chatable:{$:{active:{$$:{header:{minHeight:107}}}},$$:{headerActions:{top:10}}},error:{$:{active:{$$:{errorBlock:{opacity:0}}}},$$:{headerSumAmount:{color:"#ccc"}}},message:(d={position:"relative",alignSelf:"flex-start",maxWidth:250,height:36,background:$.r.bgColor,borderRadius:16,marginTop:4,padding:[8,16]},d[$.r.media.large]={maxWidth:400},d),messageText:{display:"inline-block",width:"100%",color:Object($.k)($.r.baseColor,.6),fontSize:14,lineHeight:1.43,fontWeight:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},messageTailIn:{self:{position:"absolute",width:19,height:18,top:-5,left:-7},path:{fill:$.r.bgColor}},messageTailOut:{self:{position:"absolute",width:19,height:18,top:24,right:-7,transform:"scale(-1, -1)"},path:{fill:$.r.bgColor}}},U=function(e){function HistoryItem(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItem,e),HistoryItem.prototype.render=function(){var e,t=this,a=this.props.classes,o=this.store,r=o.item,s=o.active,i=o.lastMessage,n=o.commentMessage,l=i||n,c=r.features.greetingCardAttached,m=r.features.chatAvailable,d=r.statusSuccess,u=r.statusError,p=r.statusWaiting,h=r.type===f.h.IN,g=r.features.repeatPaymentEnabled,y=r.features.favoritePaymentEnabled,b=r.features.regularPaymentEnabled;return I.a.createElement("div",{className:H()((e={},e[a.self]=!0,e[a.active]=s,e[a.success]=d,e[a.error]=u,e[a.income]=h,e[a.chatable]=void 0!==l,e[a.repeatable]=g,e[a.favoritable]=y,e[a.schedulable]=b,e))},I.a.createElement("div",{className:a.statusIcon},d&&s?I.a.createElement(T.de,null):u?I.a.createElement(T.Gb,null):p?I.a.createElement(T.Ge,null):null),u?I.a.createElement("div",{className:a.errorBlock},I.a.createElement("div",{className:a.errorContent},I.a.createElement("span",{className:a.errorContentTitle},"Ошибка"),I.a.createElement("span",{className:a.errorContentText},r.error))):null,I.a.createElement("div",{className:a.header,onClick:Object(x.lb)(function(){return t.store.toggle()})},I.a.createElement("div",{className:a.headerLogo},c&&h?I.a.createElement(T.Mb,{classes:a.greetingIcon}):c?I.a.createElement(T.Nb,{classes:a.greetingIcon}):r.provider.logoUrl?I.a.createElement("img",{className:a.headerLogoImg,src:r.provider.logoUrl}):h?I.a.createElement(T.Xb,{classes:a.incomeIcon}):I.a.createElement(T.hd,{classes:a.headerLogoSvg})),I.a.createElement("div",{className:a.headerInfo},I.a.createElement("span",{className:a.headerInfoProvider},r.view.title," ",r.view.account),l&&!s?I.a.createElement("div",{className:a.message},l.direction===v.a.IN?I.a.createElement(T.K,{classes:a.messageTailIn}):I.a.createElement(T.K,{classes:a.messageTailOut}),I.a.createElement("div",{className:a.messageText},l.text)):!r.comment||c||m?null:I.a.createElement("span",{className:a.headerInfoComment},r.comment)),I.a.createElement("div",{className:a.headerSum},I.a.createElement("div",{className:a.headerSumText},I.a.createElement("span",{className:a.headerSumAmount},h?"+":""," ",r.sum.toString()),r.commission&&0!==r.commission.amount?I.a.createElement("span",{className:a.headerSumInfo},"Комиссия ",r.commission.toString()):null)),g?I.a.createElement("div",{className:a.headerRepeat},I.a.createElement(T.Td,{icon:T.wd,onClick:function(){return null}})):null,I.a.createElement("div",{className:a.headerActions},g?I.a.createElement("div",{className:a.headerActionsRepeat},I.a.createElement(T.Td,{icon:T.wd,onClick:function(){return t.store.repeatPayment()},children:"Повторить"})):null,y?I.a.createElement("div",{className:a.headerActionsFavorite},I.a.createElement(T.Td,{icon:T.Zd,onClick:function(){return t.store.addToFavorite()},children:"В Избранное"})):null,b?I.a.createElement("div",{className:a.headerActionsFavorite},I.a.createElement(T.Td,{icon:T.Ad,onClick:function(){return t.store.addToSchedule()},children:"Запланировать"})):null)),I.a.createElement(B,null))},i.__decorate([Object(w.resolve)(r.User)],HistoryItem.prototype,"user",void 0),i.__decorate([Object(w.resolve)(r.Store)],HistoryItem.prototype,"store",void 0),HistoryItem=i.__decorate([Object(x.rb)(z),N.observer],HistoryItem)}(x.bb),K=function(e){function HistoryItemView(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(HistoryItemView,e),HistoryItemView.prototype.render=function(){return I.a.createElement(U,null)},HistoryItemView}(I.a.Component);t.default=function(e){var t=e.createChild();return t.bind(r.Store).to(E).inSingletonScope(),t.bind(r.View).toConstructor(K),t.bind("SendCheque").toConstantValue(Object(s.z)(t)),t.bind("ChatPopup").toConstantValue(Object(s.f)(t)),t}}}]);