(window.p=window.p||[]).push([[40],{1313:function(e,t,r){"use strict";r.r(t);var o,n,a=r(7),i=r(1),s=r(27),l=r(5),c=r(3),h=r(1625),u=r(310),d={title:"SignInSchema",type:"object",properties:{username:{type:"string",pattern:"^\\+\\d{9,16}$",errorMessage:"Необходимо ввести номер телефона"},password:{type:"string",pattern:"\\S",errorMessage:"Необходимо ввести пароль"}}},p={title:"SignInSchema",type:"object",properties:{username:{type:"string",pattern:"^\\+\\d{9,16}$",errorMessage:"Необходимо ввести номер телефона"},password:{type:"string",pattern:"\\S",errorMessage:"Необходимо ввести пароль"},recaptcha:{type:"string",pattern:"\\S",errorMessage:"Подтвердите, что вы не робот"}}},S={title:"SignUpSchema",type:"object",properties:{username:{type:"string",pattern:"^\\+\\d{9,16}$",errorMessage:"Необходимо ввести номер телефона"},recaptcha:{type:"string",pattern:"\\S",errorMessage:"Подтвердите, что вы не робот"}}},m={title:"SmsSchema",type:"object",properties:{vcode:{type:"string",pattern:"^\\d{4}$",errorMessage:"Не введен код из SMS"}}},A={title:"EmailSchema",type:"object",properties:{ecode:{type:"string",pattern:"^\\d{5}$",errorMessage:"Не введен код из почты"}}},g={title:"PasswordSchema",type:"object",properties:{password:{type:"string",allOf:[{pattern:"^\\S{7,30}$"},{pattern:"(?=.*[0-9])(?=.*[a-z])"},{pattern:"(?=.*[A-Z])(?=.*[a-z])"}],errorMessage:"Введите подходящий пароль"}}},f=r(294),_=r(296),b=r(55),E=r(681),v=r(306),C=r(28),y=r(10),w=r(38),O=function(){function Captcha(){}return Object.defineProperty(Captcha.prototype,"src",{get:function(){return"data:image/png;base64,"+this.image},enumerable:!0,configurable:!0}),i.__decorate([c.serializable],Captcha.prototype,"image",void 0),i.__decorate([c.serializable],Captcha.prototype,"hash",void 0),Captcha}(),k=function(t){function CaptchaService(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="captcha",e.version="v1",e.log=C("qiwi:captcha"),e}var e;return i.__extends(CaptchaService,t),e=CaptchaService,i.__decorate([Object(y.b)(b.a)],CaptchaService.prototype,"auth",void 0),i.__decorate([Object(y.b)("EdgeUrl")],CaptchaService.prototype,"url",void 0),i.__decorate([Object(y.b)("ClientSoftware")],CaptchaService.prototype,"clientSoftware",void 0),CaptchaService=e=i.__decorate([Object(y.d)(e)],CaptchaService)}(function(e){function ACaptchaService(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(ACaptchaService,e),ACaptchaService.prototype.getCaptcha=function(){return this.fetch({path:"/captcha",method:"POST"}).then(function(e){return Object(c.deserialize)(O,e)})},ACaptchaService=i.__decorate([Object(s.injectable)()],ACaptchaService)}(w.a)),I=r(1407);(n=o||(o={}))[n.SIGNIN=0]="SIGNIN",n[n.SIGNUP=1]="SIGNUP",n[n.SMS=2]="SMS",n[n.EMAIL=3]="EMAIL",n[n.PASSWORD=4]="PASSWORD",n[n.CHANGE_PASSWORD_CHOOSE=5]="CHANGE_PASSWORD_CHOOSE",n[n.CHANGE_PASSWORD_SUCCESS=6]="CHANGE_PASSWORD_SUCCESS",n[n.CHANGE_PASSWORD_ERROR=7]="CHANGE_PASSWORD_ERROR",n[n.CHANGE_PASSWORD_ALERT=8]="CHANGE_PASSWORD_ALERT",n[n.CHANGE_PASSWORD_LOGIN_FAILED=9]="CHANGE_PASSWORD_LOGIN_FAILED",n[n.SOCIAL_BIND=10]="SOCIAL_BIND";var N,P,F,j=o,x=r(286),R=r(287),D=r(307),B=function(){function AuthStore(){var e=this;this.loading=!1,this.reCaptchaShow=!1,this.reCaptchaReset=!1,this.captchaShow=!1,this.captchaLoading=!1,this.resendSmsTime=0,this.show=!1,this.step=null,this.error=null,this.values=l.observable.map({},{deep:!1}),this.errorsVisibleFields=new Map,this.confirmation=null,this.emailConfirmation=null,this.token=null,this.passwordChanging=!1,this.code=null,this.profileId=null,this.spam=!0,this.blockAllTokens=!0,this.reminder=!1,this.socialNetworks=[],this.socialAuth=void 0,Object(l.reaction)(function(){return e.captchaShow},function(){return e.handleCaptchaShow()}),Object(l.reaction)(function(){return e.reCaptchaReset},function(){return e.handleRecaptchaReset()})}return Object.defineProperty(AuthStore.prototype,"isNewUser",{get:function(){return this.token&&(this.token.unregistered||this.token.mobileRegistered)},enumerable:!0,configurable:!0}),Object.defineProperty(AuthStore.prototype,"isOldUser",{get:function(){return this.token&&this.token.siteRegistered},enumerable:!0,configurable:!0}),Object.defineProperty(AuthStore.prototype,"allFieldsErrors",{get:function(){return new Map(Array.from(this.errors).map(function(e){var t=e[0];e[1];return[t,!0]}))},enumerable:!0,configurable:!0}),Object.defineProperty(AuthStore.prototype,"login",{get:function(){return(this.values.get("username")?this.values.get("username"):this.profileId?this.profileId.toString():"").replace(/\D/,"")},enumerable:!0,configurable:!0}),Object.defineProperty(AuthStore.prototype,"errors",{get:function(){return this.schema?this.validator.validate(this.schema,this.values.toJSON()):new Map},enumerable:!0,configurable:!0}),Object.defineProperty(AuthStore.prototype,"visibleErrors",{get:function(){return this.schema?this.validator.validateFields(this.schema,this.values.toJSON(),this.errorsVisibleFields):new Map},enumerable:!0,configurable:!0}),Object.defineProperty(AuthStore.prototype,"schema",{get:function(){switch(this.step){case j.SIGNIN:return this.reCaptchaShow?p:d;case j.SIGNUP:return S;case j.SMS:return m;case j.EMAIL:return A;case j.PASSWORD:case j.CHANGE_PASSWORD_CHOOSE:return g;default:return null}},enumerable:!0,configurable:!0}),AuthStore.prototype.handleCaptchaShow=function(){this.captchaShow&&this.show&&this.loadCaptcha()},AuthStore.prototype.handleRecaptchaReset=function(){this.captchaShow&&this.show&&this.loadCaptcha()},AuthStore.prototype.resendSmsTick=function(e){var t=this;void 0===e&&(e=120),this.resendSmsTime=e,this.resendSmsTimer=setTimeout(function(){return t.resendSmsTick(t.resendSmsTime-1)},1e3)},AuthStore.prototype.resendSmsStop=function(){clearTimeout(this.resendSmsTimer)},AuthStore.prototype.setValues=function(e,t){this.reCaptchaReset=!1,this.values.set(e,t)},AuthStore.prototype.onFieldFocus=function(e){this.errorsVisibleFields.set(e,!1)},AuthStore.prototype.onFieldBlur=function(e){this.errorsVisibleFields.set(e,!0)},AuthStore.prototype.hide=function(){if(this.user.authorized&&this.user.expired){if(this.step===j.CHANGE_PASSWORD_CHOOSE)return void(this.step=j.CHANGE_PASSWORD_ALERT);this.step===j.CHANGE_PASSWORD_SUCCESS&&this.router.reload()}this.reset(),this.show=!1,localStorage.removeItem("SOCIAL_AUTH")},AuthStore.prototype.logOut=function(){var e=this;return this.loading=!0,this.user.logOut().then(function(){return e.hide()}).catch(function(){return e.hide()})},Object.defineProperty(AuthStore.prototype,"isLoading",{get:function(){return!!this.loading&&this.step!==j.CHANGE_PASSWORD_SUCCESS},enumerable:!0,configurable:!0}),Object.defineProperty(AuthStore.prototype,"isClosing",{get:function(){if(this.user.authorized&&!this.user.expired)return!0;switch(this.step){case j.CHANGE_PASSWORD_SUCCESS:case j.CHANGE_PASSWORD_ERROR:case j.CHANGE_PASSWORD_ALERT:case j.CHANGE_PASSWORD_LOGIN_FAILED:return!1;case j.SMS:case j.EMAIL:return!this.passwordChanging;default:return!0}},enumerable:!0,configurable:!0}),AuthStore.prototype.showChangePassword=function(e){this.reset(),this.show=!0,this.step=j.CHANGE_PASSWORD_CHOOSE,this.socialAuth=e,this.passwordChanging=!0},AuthStore.prototype.reset=function(){this.loading=!1,this.reCaptchaShow=!1,this.reCaptchaReset=!1,this.captchaShow=this.reCaptchaDisabled,this.resendSmsStop(),this.resendSmsTime=0,this.error=null,this.values=l.observable.map({username:"",recaptcha:"",password:"",vcode:"",ecode:""},{deep:!1}),this.errorsVisibleFields.clear(),this.confirmation=null,this.emailConfirmation=null,this.token=null,this.passwordChanging=!1,this.profileId=null,this.spam=!0,this.reminder=!1,this.blockAllTokens=!0,this.socialAuth=void 0},AuthStore.prototype.showSignIn=function(e,t){void 0===e&&(e="7"),this.reset(),this.show=!0,this.socialAuth=t,this.step=j.SIGNIN,this.values.set("username","+"+e),0===this.socialNetworks.length&&this.loadSocialNetworks()},AuthStore.prototype.sendSignIn=function(){var t=this;if(this.reCaptchaReset=!1,0===this.errors.size)return this.loading=!0,this.authService.logInByCredentials(this.login,this.values.get("password"),this.captchaShow?Base64.encode("QIWI:"+this.captcha.hash+":"+this.values.get("recaptcha")):this.values.get("recaptcha")).then(function(e){return t.sendSignInSuccess(e)}).catch(Object(u.a)(h.CaptchaRequiredError,function(e){return t.sendSignInCaptchaRequired(e)})).catch(function(e){return t.sendSignInError(e)});this.errorsVisibleFields=this.allFieldsErrors},AuthStore.prototype.sendSignInSuccess=function(e){this.cookieStore.set("user_info","1",180),this.passwordChanging?this.loading=!1:(this.show=!1,["/","/landing"].includes(this.router.location.pathname)?this.router.replace("/main"):this.router.reload())},AuthStore.prototype.sendSignInCaptchaRequired=function(e){this.loading=!1,this.reCaptchaShow=!0,this.reCaptchaReset=!1,this.values.set("recaptcha","")},AuthStore.prototype.sendSignInError=function(e){this.loading=!1,this.reCaptchaReset=!0,this.error=e,this.values.set("recaptcha",""),this.passwordChanging&&(this.show=!0,this.step=j.CHANGE_PASSWORD_LOGIN_FAILED)},AuthStore.prototype.showSignUp=function(e,t,r){void 0===e&&(e="7"),void 0===t&&(t=!1),this.reset(),this.show=!0,this.reminder=t,this.step=j.SIGNUP,this.socialAuth=r,this.values.set("username","+"+e),0===this.socialNetworks.length&&this.loadSocialNetworks()},AuthStore.prototype.sendSignUp=function(){var t=this;if(this.reCaptchaReset=!1,0===this.errors.size)return this.loading=!0,this.oAuthService.getConfirmation(this.login,this.captchaShow?Base64.encode("QIWI:"+this.captcha.hash+":"+this.values.get("recaptcha")):this.values.get("recaptcha")).then(function(e){return t.sendSignUpSuccess(e)}).catch(function(e){return t.sendSignUpError(e)});this.errorsVisibleFields=this.allFieldsErrors},AuthStore.prototype.sendSignUpSuccess=function(e){this.loading=!1,this.error=null,this.confirmation=e,this.show=!0,this.step=j.SMS,this.resendSmsStop(),this.resendSmsTick()},AuthStore.prototype.sendSignUpError=function(e){this.loading=!1,this.reCaptchaReset=!0,this.error=e,this.values.delete("recaptcha")},AuthStore.prototype.getProfile=function(){var t=this;return this.personProfileService.getCurrent().then(function(e){t.profileId=e.auth.id}).catch(function(e){t.error=e})},AuthStore.prototype.sendChangePassword=function(){var n=this;if(0===this.errors.size)return this.loading=!0,Promise.all([this.authService.getCredentials(),this.getProfile()]).then(function(e){var t=e[0],r=t[0],o=t[1];e[1];return n.oAuthService.getConfirmationWhenExpired(n.profileId,r,o,n.blockAllTokens)}).then(function(e){return n.sendChangePasswordSuccess(e)}).catch(function(e){return n.sendChangePasswordError(e)});this.errorsVisibleFields=this.allFieldsErrors},AuthStore.prototype.sendChangePasswordSuccess=function(e){this.loading=!1,this.error=null,this.confirmation=e,this.show=!0,this.step=j.SMS,this.resendSmsStop(),this.resendSmsTick()},AuthStore.prototype.sendChangePasswordError=function(e){this.loading=!1,this.error=e},AuthStore.prototype.sendSms=function(){var t=this;if(0===this.errors.size)return this.loading=!0,this.oAuthService.getCodeBySms(this.login,this.values.get("vcode"),this.confirmation,this.blockAllTokens).then(function(e){return t.sendSmsSuccess(e)}).catch(function(e){return t.sendSmsError(e)});this.errorsVisibleFields=this.allFieldsErrors},AuthStore.prototype.sendSmsSuccess=function(e){if(this.error=null,this.resendSmsStop(),e instanceof x.a&&(this.loading=!1,this.emailConfirmation=e,this.show=!0,this.step=j.EMAIL),e instanceof R.a){if(this.token=e,this.passwordChanging)return this.sendPassword();this.loading=!1,this.show=!0,this.step=j.PASSWORD}},AuthStore.prototype.sendSmsError=function(e){"601"!==e.code&&(this.resendSmsStop(),this.passwordChanging?this.showChangePassword(this.socialAuth):this.showSignUp(this.login,this.reminder,this.socialAuth)),this.loading=!1,this.error=e},AuthStore.prototype.resendSms=function(){var t=this;return this.loading=!0,this.oAuthService.getConfirmationAgain(this.login,this.confirmation).then(function(e){return t.resendSmsSuccess(e)}).catch(function(e){return t.resendSmsError(e)})},AuthStore.prototype.resendSmsSuccess=function(e){this.loading=!1,this.error=null,this.confirmation=e,this.resendSmsStop(),this.resendSmsTick()},AuthStore.prototype.resendSmsError=function(e){"603"!==e.code&&(this.passwordChanging?this.showChangePassword(this.socialAuth):this.showSignUp(this.login,this.reminder,this.socialAuth)),this.loading=!1,this.error=e},AuthStore.prototype.sendEmail=function(){var t=this;if(0===this.errors.size)return this.loading=!0,this.oAuthService.getCodeByEmail(this.login,this.values.get("ecode"),this.emailConfirmation,this.blockAllTokens).then(function(e){return t.sendEmailSuccess(e)}).catch(function(e){return t.sendEmailError(e)});this.errorsVisibleFields=this.allFieldsErrors},AuthStore.prototype.sendEmailSuccess=function(e){if(this.loading=!1,this.error=null,this.token=e,this.passwordChanging)return this.sendPassword();this.show=!0,this.step=j.PASSWORD},AuthStore.prototype.sendEmailError=function(e){"702"!==e.code&&(this.passwordChanging?this.showChangePassword(this.socialAuth):this.showSignUp(this.login,this.reminder,this.socialAuth)),this.loading=!1,this.error=e},AuthStore.prototype.resendEmail=function(){var t=this;return this.loading=!0,this.oAuthService.getCodeByEmailAgain(this.login,this.emailConfirmation).then(function(e){return t.resendEmailSuccess(e)}).catch(function(e){return t.resendEmailError(e)})},AuthStore.prototype.resendEmailSuccess=function(e){this.loading=!1,this.error=null,this.emailConfirmation=e},AuthStore.prototype.resendEmailError=function(e){this.passwordChanging?this.showChangePassword(this.socialAuth):this.showSignUp(this.login,this.reminder,this.socialAuth),this.loading=!1,this.error=e},AuthStore.prototype.sendPassword=function(){var t=this;if(0===this.errors.size)return this.loading=!0,this.oAuthService.getCodeByPassword(this.login,this.values.get("password"),this.token,this.blockAllTokens).then(function(e){return t.sendPasswordSuccess(e)}).catch(function(e){return t.sendPasswordError(e)});this.errorsVisibleFields=this.allFieldsErrors},AuthStore.prototype.sendPasswordSuccess=function(e){return this.loading=!0,this.error=null,this.passwordChanging&&(this.loading=!1,this.show=!0,this.step=j.CHANGE_PASSWORD_SUCCESS),this.loginByCode(this.login,e.id)},AuthStore.prototype.sendPasswordError=function(e){if(this.passwordChanging)return"1400"===e.code||"1401"===e.code?(this.showChangePassword(this.socialAuth),void(this.error=e)):(this.show=!0,this.step=j.CHANGE_PASSWORD_ERROR,void(this.loading=!1));"1400"!==e.code&&"1401"!==e.code&&(this.passwordChanging?this.showChangePassword(this.socialAuth):this.showSignUp(this.login,this.reminder,this.socialAuth)),this.loading=!1,this.error=e},AuthStore.prototype.loginByCode=function(e,t){var r=this;return this.loading=!0,this.authService.logInByCode(e,t).then(function(e){return r.sendSignInSuccess(e)}).catch(function(e){return r.sendSignInError(e)})},AuthStore.prototype.socialLogIn=function(e,t){var r=this;void 0===t&&(t="7"),this.reset(),this.values.set("username","+"+t),this.loading=!0,this.authService.logInBySocial(e).then(function(e){return r.socialLogInSuccess(e)}).catch(function(e){return r.socialLogInError(e)})},AuthStore.prototype.socialLogInSuccess=function(e){switch((this.socialAuth=e).status){case D.b.SocialStatus.BOUND:this.loginByCode(this.socialAuth.personId,this.socialAuth.authorizationCode);break;case D.b.SocialStatus.NOT_BOUND:this.loading=!1,this.reCaptchaReset=!0,localStorage.setItem("SOCIAL_AUTH",JSON.stringify(Object(c.serialize)(this.socialAuth))),this.socialAuth.profile.phone&&this.values.set("username",this.socialAuth.profile.phone)}},AuthStore.prototype.socialLogInError=function(e){this.loading=!1,this.error=e},AuthStore.prototype.showSocialBind=function(e){this.reset(),this.step=j.SOCIAL_BIND,this.socialAuth=e,this.bindSocial()},AuthStore.prototype.bindSocial=function(){var t=this;this.loading=!0,this.social.bindByBindCode(this.user.id,this.socialAuth.profile.network.alias,this.socialAuth.bindCode).then(function(){return t.bindSocialSuccess()}).catch(function(e){return t.bindSocialError(e)})},AuthStore.prototype.bindSocialSuccess=function(){this.hide()},AuthStore.prototype.bindSocialError=function(e){this.show=!0,this.loading=!1,this.error=e},AuthStore.prototype.checkSpam=function(e){this.spam=e},AuthStore.prototype.checkBlockAllTokens=function(e){this.blockAllTokens=e},AuthStore.prototype.showCaptcha=function(){this.captchaShow=!0},AuthStore.prototype.loadCaptcha=function(){var t=this;this.captchaLoading=!0,this.captchaService.getCaptcha().then(function(e){return t.loadCaptchaSuccess(e)}).catch(function(e){return t.loadCaptchaError(e)})},AuthStore.prototype.loadCaptchaSuccess=function(e){this.captcha=e,this.captchaError=void 0,this.captchaLoading=!1},AuthStore.prototype.loadCaptchaError=function(e){this.captcha=void 0,this.captchaError=e,this.captchaLoading=!1},AuthStore.prototype.loadSocialNetworks=function(){var t=this;this.social.getNetworks().then(function(e){return t.loadSocialNetworksSuccess(e)}).catch(function(e){return t.loadSocialNetworksError(e)})},AuthStore.prototype.loadSocialNetworksSuccess=function(e){this.socialNetworks=e},AuthStore.prototype.loadSocialNetworksError=function(e){this.socialNetworks=[]},i.__decorate([Object(s.inject)("ReCaptchaDisabled")],AuthStore.prototype,"reCaptchaDisabled",void 0),i.__decorate([Object(s.inject)(b.a)],AuthStore.prototype,"authService",void 0),i.__decorate([Object(s.inject)(E.a)],AuthStore.prototype,"oAuthService",void 0),i.__decorate([Object(s.inject)(v.a)],AuthStore.prototype,"personProfileService",void 0),i.__decorate([Object(s.inject)(k)],AuthStore.prototype,"captchaService",void 0),i.__decorate([Object(s.inject)(I.a)],AuthStore.prototype,"social",void 0),i.__decorate([Object(s.inject)(a.Router)],AuthStore.prototype,"router",void 0),i.__decorate([Object(s.inject)(_.a)],AuthStore.prototype,"cookieStore",void 0),i.__decorate([Object(s.inject)(a.User)],AuthStore.prototype,"user",void 0),i.__decorate([Object(s.inject)(f.a)],AuthStore.prototype,"validator",void 0),i.__decorate([l.observable],AuthStore.prototype,"loading",void 0),i.__decorate([l.observable],AuthStore.prototype,"reCaptchaShow",void 0),i.__decorate([l.observable],AuthStore.prototype,"reCaptchaReset",void 0),i.__decorate([l.observable],AuthStore.prototype,"captchaShow",void 0),i.__decorate([l.observable],AuthStore.prototype,"captcha",void 0),i.__decorate([l.observable],AuthStore.prototype,"captchaLoading",void 0),i.__decorate([l.observable],AuthStore.prototype,"captchaError",void 0),i.__decorate([l.observable],AuthStore.prototype,"resendSmsTime",void 0),i.__decorate([l.observable],AuthStore.prototype,"show",void 0),i.__decorate([l.observable],AuthStore.prototype,"step",void 0),i.__decorate([l.observable],AuthStore.prototype,"error",void 0),i.__decorate([l.observable],AuthStore.prototype,"values",void 0),i.__decorate([l.observable],AuthStore.prototype,"errorsVisibleFields",void 0),i.__decorate([l.observable],AuthStore.prototype,"confirmation",void 0),i.__decorate([l.observable],AuthStore.prototype,"emailConfirmation",void 0),i.__decorate([l.observable],AuthStore.prototype,"token",void 0),i.__decorate([l.observable],AuthStore.prototype,"passwordChanging",void 0),i.__decorate([l.observable],AuthStore.prototype,"code",void 0),i.__decorate([l.observable],AuthStore.prototype,"profileId",void 0),i.__decorate([l.observable],AuthStore.prototype,"spam",void 0),i.__decorate([l.observable],AuthStore.prototype,"blockAllTokens",void 0),i.__decorate([l.observable],AuthStore.prototype,"reminder",void 0),i.__decorate([l.observable],AuthStore.prototype,"socialNetworks",void 0),i.__decorate([l.observable],AuthStore.prototype,"socialAuth",void 0),i.__decorate([l.computed],AuthStore.prototype,"isNewUser",null),i.__decorate([l.computed],AuthStore.prototype,"isOldUser",null),i.__decorate([l.computed],AuthStore.prototype,"login",null),i.__decorate([l.computed],AuthStore.prototype,"errors",null),i.__decorate([l.computed],AuthStore.prototype,"visibleErrors",null),i.__decorate([l.computed],AuthStore.prototype,"schema",null),i.__decorate([l.action],AuthStore.prototype,"setValues",null),i.__decorate([l.action],AuthStore.prototype,"onFieldFocus",null),i.__decorate([l.action],AuthStore.prototype,"onFieldBlur",null),i.__decorate([l.action],AuthStore.prototype,"hide",null),i.__decorate([l.action],AuthStore.prototype,"logOut",null),i.__decorate([l.computed],AuthStore.prototype,"isLoading",null),i.__decorate([l.computed],AuthStore.prototype,"isClosing",null),i.__decorate([l.action],AuthStore.prototype,"showChangePassword",null),i.__decorate([l.action],AuthStore.prototype,"showSignIn",null),i.__decorate([l.action],AuthStore.prototype,"sendSignIn",null),i.__decorate([l.action],AuthStore.prototype,"sendSignInSuccess",null),i.__decorate([l.action],AuthStore.prototype,"sendSignInCaptchaRequired",null),i.__decorate([l.action],AuthStore.prototype,"sendSignInError",null),i.__decorate([l.action],AuthStore.prototype,"showSignUp",null),i.__decorate([l.action],AuthStore.prototype,"sendSignUp",null),i.__decorate([l.action],AuthStore.prototype,"sendSignUpSuccess",null),i.__decorate([l.action],AuthStore.prototype,"sendSignUpError",null),i.__decorate([l.action],AuthStore.prototype,"getProfile",null),i.__decorate([l.action],AuthStore.prototype,"sendChangePassword",null),i.__decorate([l.action],AuthStore.prototype,"sendChangePasswordSuccess",null),i.__decorate([l.action],AuthStore.prototype,"sendChangePasswordError",null),i.__decorate([l.action],AuthStore.prototype,"sendSms",null),i.__decorate([l.action],AuthStore.prototype,"sendSmsSuccess",null),i.__decorate([l.action],AuthStore.prototype,"sendSmsError",null),i.__decorate([l.action],AuthStore.prototype,"resendSms",null),i.__decorate([l.action],AuthStore.prototype,"resendSmsSuccess",null),i.__decorate([l.action],AuthStore.prototype,"resendSmsError",null),i.__decorate([l.action],AuthStore.prototype,"sendEmail",null),i.__decorate([l.action],AuthStore.prototype,"sendEmailSuccess",null),i.__decorate([l.action],AuthStore.prototype,"sendEmailError",null),i.__decorate([l.action],AuthStore.prototype,"resendEmail",null),i.__decorate([l.action],AuthStore.prototype,"resendEmailSuccess",null),i.__decorate([l.action],AuthStore.prototype,"resendEmailError",null),i.__decorate([l.action],AuthStore.prototype,"sendPassword",null),i.__decorate([l.action],AuthStore.prototype,"sendPasswordSuccess",null),i.__decorate([l.action],AuthStore.prototype,"sendPasswordError",null),i.__decorate([l.action],AuthStore.prototype,"loginByCode",null),i.__decorate([l.action],AuthStore.prototype,"socialLogIn",null),i.__decorate([l.action],AuthStore.prototype,"socialLogInSuccess",null),i.__decorate([l.action],AuthStore.prototype,"socialLogInError",null),i.__decorate([l.action],AuthStore.prototype,"showSocialBind",null),i.__decorate([l.action],AuthStore.prototype,"bindSocial",null),i.__decorate([l.action],AuthStore.prototype,"bindSocialSuccess",null),i.__decorate([l.action],AuthStore.prototype,"bindSocialError",null),i.__decorate([l.action],AuthStore.prototype,"checkSpam",null),i.__decorate([l.action],AuthStore.prototype,"checkBlockAllTokens",null),i.__decorate([l.action],AuthStore.prototype,"showCaptcha",null),i.__decorate([l.action],AuthStore.prototype,"loadCaptcha",null),i.__decorate([l.action],AuthStore.prototype,"loadCaptchaSuccess",null),i.__decorate([l.action],AuthStore.prototype,"loadCaptchaError",null),i.__decorate([l.action],AuthStore.prototype,"loadSocialNetworks",null),i.__decorate([l.action],AuthStore.prototype,"loadSocialNetworksSuccess",null),i.__decorate([l.action],AuthStore.prototype,"loadSocialNetworksError",null),AuthStore=i.__decorate([Object(s.injectable)()],AuthStore)}(),L=r(0),U=r.n(L),H=r(18),T=r(20),G=r(12),V=r(4),W=r(2),M={self:(N={width:308,minHeight:465},N[W.r.media.small]={width:398},N)},z=function(e){function AuthForm(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthForm,e),AuthForm=i.__decorate([Object(V.rb)(M)],AuthForm)}(V.k),$=r(123),q={self:{position:"relative",width:"100%",height:80,textAlign:"center",fontWeight:700},title:{position:"relative",top:30},close:i.__assign({position:"absolute",top:15,right:15,width:24,height:24,cursor:"pointer",opacity:.3},Object(W.p)("all"),{$hover:{opacity:.6}}),closeIcon:{self:{width:"100%",height:"100%"},path:{fill:W.r.baseColor}}},J=function(e){function AuthSimpleHeader(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSimpleHeader,e),AuthSimpleHeader.prototype.render=function(){var e=this,t=this.props,r=t.classes,o=t.children;return U.a.createElement("div",{className:r.self},U.a.createElement("div",{className:r.title},[j.SIGNIN,j.SIGNUP].includes(this.auth.step)?U.a.createElement(G.id,null,o):U.a.createElement(G.wb,null,o)),this.auth.isClosing?U.a.createElement("div",{className:r.close,onClick:Object(V.lb)(function(){return e.auth.hide()})},U.a.createElement($.a,{classes:r.closeIcon})):null)},i.__decorate([Object(T.resolve)(a.Store)],AuthSimpleHeader.prototype,"auth",void 0),AuthSimpleHeader=i.__decorate([Object(V.rb)(q),H.observer],AuthSimpleHeader)}(V.bb),Q=r(11),Z=r.n(Q),Y={self:{position:"relative",width:"100%",padding:[32,62,0,62]},profile:{display:"flex",padding:[12,16],borderRadius:10,alignItems:"center",maxHeight:72},profileAvatar:{display:"block",flexShrink:0,width:48,height:48,borderRadius:24,backgroundColor:Object(W.k)(W.r.baseColor,.1)},profileName:{marginLeft:12,color:W.r.whiteColor,fontSize:16,fontWeight:500,lineHeight:1.5,overflow:"hidden"},vkontakte:{background:"#5181b8"},facebook:{background:"#4267b2"},google:{background:"#f5f5f5",$$:{profileName:{color:W.r.baseColor}}},title:{margin:[32,0,24],color:W.r.baseColor,textAlign:"center",fontSize:20,fontWeight:"bold",lineHeight:1.2},close:i.__assign({position:"absolute",top:15,right:15,width:24,height:24,cursor:"pointer",opacity:.3},Object(W.p)("all"),{$hover:{opacity:.6}}),closeIcon:{self:{width:"100%",height:"100%"},path:{fill:W.r.baseColor}}},K=function(e){function AuthSocialHeader(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSocialHeader,e),AuthSocialHeader.prototype.render=function(){var e,t=this,r=this.props,o=r.classes,n=r.children;return U.a.createElement("div",{className:o.self},this.auth.step===j.SOCIAL_BIND?null:this.auth.socialAuth&&this.auth.socialAuth.profile?U.a.createElement("div",{className:Z()((e={},e[o.profile]=!0,e[o.vkontakte]="vkontakte"===this.auth.socialAuth.profile.network.alias,e[o.facebook]="facebook"===this.auth.socialAuth.profile.network.alias,e[o.google]="google"===this.auth.socialAuth.profile.network.alias,e))},this.auth.socialAuth.profile.avatar?U.a.createElement("img",{className:o.profileAvatar,src:this.auth.socialAuth.profile.avatar}):U.a.createElement("div",{className:o.profileAvatar}),U.a.createElement("div",{className:o.profileName},this.auth.socialAuth.profile.name)):null,U.a.createElement("div",{className:o.title},n),this.auth.isClosing?U.a.createElement("div",{className:o.close,onClick:Object(V.lb)(function(){return t.auth.hide()})},U.a.createElement($.a,{classes:o.closeIcon})):null)},i.__decorate([Object(T.resolve)(a.Store)],AuthSocialHeader.prototype,"auth",void 0),AuthSocialHeader=i.__decorate([Object(V.rb)(Y),H.observer],AuthSocialHeader)}(V.bb),X={self:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",minHeight:97,padding:[30,45],textAlign:"center",fontSize:14,$before:{content:'""',position:"absolute",top:-1,left:0,zIndex:10,width:"100%",height:1}},border:{borderTop:[1,"solid","#ebebeb"]},confirm:{$before:{backgroundImage:"linear-gradient(to right, rgba(0, 35, 160, .4) 0%, rgba(0, 35, 160, .4) 33%, rgba(255, 255, 255, 0) 33%, rgba(255, 255, 255, 0) 0%)"}},finish:{$before:{backgroundImage:"linear-gradient(to right, rgba(0, 35, 160, .4) 0%, rgba(0, 35, 160, .4) 66%, rgba(255, 255, 255, 0) 66%, rgba(255, 255, 255, 0) 0%)"}}},ee=function(e){function AuthSingleFooter(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSingleFooter,e),AuthSingleFooter.prototype.render=function(){var e,t=this.props,r=t.classes,o=t.step,n=t.children;return U.a.createElement("div",{className:Z()((e={},e[r.self]=!0,e[r.border]=!!n||o,e[r.confirm]=1===o,e[r.finish]=2===o,e))},n)},AuthSingleFooter=i.__decorate([Object(V.rb)(X)],AuthSingleFooter)}(V.bb),te={self:{position:"relative",display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",height:97,$before:{content:'""',position:"absolute",top:-1,left:0,zIndex:10,width:"100%",height:1}},confirm:{$before:{backgroundImage:"linear-gradient(to right, rgba(0, 35, 160, .4) 0%, rgba(0, 35, 160, .4) 33%, rgba(255, 255, 255, 0) 33%, rgba(255, 255, 255, 0) 0%)"}},finish:{$before:{backgroundImage:"linear-gradient(to right, rgba(0, 35, 160, .4) 0%, rgba(0, 35, 160, .4) 66%, rgba(255, 255, 255, 0) 66%, rgba(255, 255, 255, 0) 0%)"}},social:{display:"inline-block",width:"50%",height:"100%",paddingTop:27,textAlign:"center",borderTop:[1,"solid","#ebebeb"],borderRight:[1,"solid","#ebebeb"],fontSize:12},socialTitle:{},socialNetworks:{display:"inline-flex",flexDirection:"row",marginTop:4},socialNetworksStub:i.__assign({},Object(W.j)(22,22,11),{marginRight:12}),socialNetworksItem:{height:22,width:22,marginRight:12,cursor:"pointer",$hover:{$$:{socialNetworksItemIcon:{self:{display:"none"},path:{}},socialNetworksItemIconHover:{self:{display:"block"},path:{}}}}},socialNetworksItemIcon:{self:{display:"block"},path:{fill:"#b2b2b2"}},socialNetworksItemIconHover:{self:{display:"none"},path:{}},text:{display:"flex",flexDirection:"column",justifyContent:"center",width:"50%",height:"100%",textAlign:"center",borderTop:[1,"solid","#ebebeb"]}},re=function(e){function AuthDoubleFooter(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthDoubleFooter,e),AuthDoubleFooter.prototype.render=function(){var e,r=this,t=this.props,o=t.classes,n=t.step,a=t.children;return U.a.createElement("div",{className:Z()((e={},e[o.self]=!0,e[o.confirm]=1===n,e[o.finish]=2===n,e))},U.a.createElement("div",{className:o.social},U.a.createElement("div",{className:o.socialTitle},U.a.createElement(G.Vc,null,"Вход через соцсеть")),U.a.createElement("div",{className:o.socialNetworks},0===this.auth.socialNetworks.length?U.a.createElement(U.a.Fragment,null,U.a.createElement("div",{className:o.socialNetworksStub}),U.a.createElement("div",{className:o.socialNetworksStub}),U.a.createElement("div",{className:o.socialNetworksStub})):this.auth.socialNetworks.map(function(e){var t=G.m[e.alias];return U.a.createElement("div",{className:o.socialNetworksItem,onClick:function(){return r.auth.socialLogIn(e.alias)}},U.a.createElement(t,{classes:o.socialNetworksItemIcon}),U.a.createElement(t,{classes:o.socialNetworksItemIconHover}))}))),U.a.createElement("div",{className:o.text},a))},i.__decorate([Object(T.resolve)(a.Store)],AuthDoubleFooter.prototype,"auth",void 0),AuthDoubleFooter=i.__decorate([Object(V.rb)(te),H.observer],AuthDoubleFooter)}(V.bb),oe={self:(P={padding:[0,32]},P[W.r.media.small]={padding:[0,62]},P)},ne=function(e){function AuthContent(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthContent,e),AuthContent.prototype.render=function(){var e=this.props,t=e.children,r=e.classes;return U.a.createElement("div",{className:r.self},t)},AuthContent=i.__decorate([Object(V.rb)(oe)],AuthContent)}(V.bb),ae={self:{display:"block",position:"relative",margin:[0,0,10]}},ie=function(e){function AuthField(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthField,e),AuthField.prototype.render=function(){var e=this.props,t=e.children,r=e.classes;return U.a.createElement("div",{className:r.self},t)},AuthField=i.__decorate([Object(V.rb)(ae)],AuthField)}(V.bb),se={self:{margin:[30,0],textAlign:"center"},content:{display:"inline-block"},item:{minWidth:150}},le=function(e){function AuthSubmit(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSubmit,e),AuthSubmit=i.__decorate([Object(V.rb)(se)],AuthSubmit)}(V.a),ce=r(308),he={self:{marginBottom:20,width:"100%",height:40,color:W.r.errorColor,textAlign:"center",fontWeight:400,fontSize:11,lineHeight:1.3,display:"-webkit-box",lineClamp:3,boxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"}},ue=function(e){function AuthError(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthError,e),AuthError.prototype.render=function(){var e=this.props.classes;return U.a.createElement("div",{className:e.self},this.auth.error?Object(V.nb)(this.auth.error.message,{a:ce.a}):null)},i.__decorate([Object(T.resolve)(a.Store)],AuthError.prototype,"auth",void 0),AuthError=i.__decorate([Object(V.rb)(he),H.observer],AuthError)}(V.bb),de={self:{textAlign:"center"}},pe=function(e){function AuthText(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthText,e),AuthText.prototype.render=function(){var e=this.props,t=e.classes,r=e.children;return U.a.createElement("div",{className:t.self},r)},AuthText=i.__decorate([Object(V.rb)(de)],AuthText)}(V.bb),Se={captcha:{display:"flex",alignItems:"center",height:48,background:W.r.bgColor},captchaContent:{flexGrow:1},captchaButton:{padding:[4,8,4]},captchaImage:{display:"block",maxWidth:"100%",maxHeight:"100%"},captchaError:{padding:[4,4,4,8],color:W.r.errorColor},recaptcha:{position:"relative",zIndex:0},recaptchaLoading:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"},recaptchaContent:{position:"relative",zIndex:2}},me=function(e){function AuthCaptcha(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthCaptcha,e),AuthCaptcha.prototype.render=function(){var t=this,e=this.props.classes;return this.auth.captchaShow?U.a.createElement(U.a.Fragment,null,U.a.createElement(ie,null,U.a.createElement("div",{className:e.captcha},U.a.createElement("div",{className:e.captchaContent},this.auth.captchaError?U.a.createElement("div",{className:e.captchaError},"Не удалось загрузить картинку"):this.auth.captcha?U.a.createElement("img",{className:e.captchaImage,src:this.auth.captcha.src}):null),U.a.createElement("div",{className:e.captchaButton},U.a.createElement(G.Lc,{type:V.ab.BUTTON,icon:G.wd,loading:this.auth.captchaLoading,onClick:function(){return t.auth.loadCaptcha()}})))),U.a.createElement(ie,null,U.a.createElement(G.oe,{placeholder:"Введите код с картинки",value:this.auth.values.get("recaptcha")||"",error:this.auth.visibleErrors.get("recaptcha"),onChange:Object(V.kb)(function(e){return t.auth.setValues("recaptcha",e)}),maxLength:16}))):U.a.createElement(ie,null,U.a.createElement("div",{className:e.recaptcha},U.a.createElement("div",{className:e.recaptchaLoading},U.a.createElement(G.Yd,null)),U.a.createElement("div",{className:e.recaptchaContent},U.a.createElement(G.vd,{reset:this.auth.reCaptchaReset,error:this.auth.visibleErrors.get("recaptcha"),onChange:function(e){return t.auth.setValues("recaptcha",e)},onExpired:function(){return t.auth.setValues("recaptcha","")},onError:function(){return t.auth.showCaptcha()}}))))},i.__decorate([Object(T.resolve)(a.Store)],AuthCaptcha.prototype,"auth",void 0),AuthCaptcha=i.__decorate([Object(V.rb)(Se),H.observer],AuthCaptcha)}(V.bb),Ae=function(e){function AuthSigIn(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSigIn,e),AuthSigIn.prototype.render=function(){var t=this,e=this.auth.socialAuth?K:J,r=this.auth.socialAuth?ee:re;return U.a.createElement(z,{onSubmit:function(){return t.auth.sendSignIn()}},U.a.createElement(e,null,this.auth.socialAuth&&this.auth.socialAuth.profile?"Вход через "+this.auth.socialAuth.profile.network.title:"ВХОД"),U.a.createElement(ne,null,this.auth.socialAuth?U.a.createElement(ie,null,U.a.createElement(pe,null,"Введите номер телефона и пароль, чтобы привязать кошелек к аккаунту в социальной сети")):null,U.a.createElement(ie,null,U.a.createElement(G.gd,{title:"",autoFocus:!0,value:this.auth.values.get("username"),error:this.auth.visibleErrors.get("username"),onChange:function(e){return t.auth.setValues("username",e)},onFocus:function(){return t.auth.onFieldFocus("username")},onBlur:function(){return t.auth.onFieldBlur("username")}})),U.a.createElement(ie,null,U.a.createElement(G.bd,{title:"Пароль",value:this.auth.values.get("password"),error:this.auth.visibleErrors.get("password"),addition:U.a.createElement(G.hc,{onClick:function(){return t.auth.showSignUp(t.auth.login,!0,t.auth.socialAuth)},children:"Напомнить"}),onChange:Object(V.kb)(function(e){return t.auth.setValues("password",e)}),onFocus:function(){return t.auth.onFieldFocus("password")},onBlur:function(){return t.auth.onFieldBlur("password")}})),this.auth.reCaptchaShow?U.a.createElement(me,null):null,U.a.createElement(le,null,U.a.createElement(G.C,{onClick:function(){return t.auth.sendSignIn()}},"Войти")),U.a.createElement(ue,null)),U.a.createElement(r,null,U.a.createElement(G.Vc,null,U.a.createElement(G.hc,{onClick:function(){return t.auth.showSignUp(t.auth.login,!1,t.auth.socialAuth)},children:"Создать кошелек"}))))},i.__decorate([Object(T.resolve)(a.Store)],AuthSigIn.prototype,"auth",void 0),AuthSigIn=i.__decorate([H.observer],AuthSigIn)}(U.a.Component),ge=function(e){function AuthSignUp(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSignUp,e),AuthSignUp.prototype.render=function(){var t=this,e=this.auth.socialAuth?K:J,r=this.auth.socialAuth?ee:re;return U.a.createElement(z,{onSubmit:function(){return t.auth.sendSignUp()}},U.a.createElement(e,null,this.auth.socialAuth?"Введите номер телефона":this.auth.reminder?"ВОССТАНОВЛЕНИЕ ПАРОЛЯ":"СОЗДАЙТЕ СВОЙ КОШЕЛЕК"),U.a.createElement(ne,null,U.a.createElement(ie,null,U.a.createElement(G.gd,{title:"",autoFocus:!0,value:this.auth.values.get("username"),error:this.auth.visibleErrors.get("username"),onChange:function(e){return t.auth.setValues("username",e)},onFocus:function(){return t.auth.onFieldFocus("username")},onBlur:function(){return t.auth.onFieldBlur("username")}})),U.a.createElement(me,null),U.a.createElement(le,null,U.a.createElement(G.C,{onClick:function(){return t.auth.sendSignUp()}},"Продолжить")),U.a.createElement(ue,null)),U.a.createElement(r,null,U.a.createElement(G.Vc,null,"Уже есть кошелек?",U.a.createElement("br",null),U.a.createElement(G.hc,{onClick:function(){return t.auth.showSignIn(t.auth.login,t.auth.socialAuth)},children:"Войти"}))))},i.__decorate([Object(T.resolve)(a.Store)],AuthSignUp.prototype,"auth",void 0),AuthSignUp=i.__decorate([H.observer],AuthSignUp)}(U.a.Component),fe=r(624),_e=i.__assign({},fe.a,{inputControl:{self:i.__assign({},W.h.normal(),{textAlign:"center",fontSize:24,letterSpacing:15})}}),be=function(e){function AuthCodeFormField(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthCodeFormField,e),AuthCodeFormField=i.__decorate([Object(V.rb)(_e)],AuthCodeFormField)}(V.u),Ee={self:{display:"block",position:"relative",margin:[0,0,30],padding:[0,57]}},ve=function(e){function AuthFieldSms(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthFieldSms,e),AuthFieldSms=i.__decorate([Object(V.rb)(Ee)],AuthFieldSms)}(ie),Ce={self:{marginBottom:30,textAlign:"center"}},ye=function(e){function AuthInfo(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthInfo,e),AuthInfo.prototype.render=function(){var e=this.props,t=e.children,r=e.classes;return U.a.createElement("div",{className:r.self},t)},AuthInfo=i.__decorate([Object(V.rb)(Ce)],AuthInfo)}(V.bb),we=function(e){function AuthSms(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSms,e),AuthSms.prototype.render=function(){var t=this,e=this.auth.socialAuth?K:J;return U.a.createElement(z,{onSubmit:function(){return t.auth.sendSms()}},U.a.createElement(e,null,"Введите код из SMS"),U.a.createElement(ne,null,U.a.createElement(ve,null,U.a.createElement(be,{title:null,autoFocus:!0,value:this.auth.values.get("vcode"),mask:Object(V.qb)("dddd"),error:this.auth.visibleErrors.get("vcode"),onChange:Object(V.kb)(function(e){return t.auth.setValues("vcode",e)}),onFocus:function(){return t.auth.onFieldFocus("vcode")},onBlur:function(){return t.auth.onFieldBlur("vcode")}})),U.a.createElement(le,null,U.a.createElement(G.C,{onClick:function(){return t.auth.sendSms()}},"Подтвердить")),U.a.createElement(ye,null,U.a.createElement(G.Vc,null,"SMS с кодом отправлено",U.a.createElement("br",null),"на номер +",this.auth.login)),U.a.createElement(ue,null)),U.a.createElement(ee,{step:1},0<this.auth.resendSmsTime?U.a.createElement(G.Vc,null,"Запросите код повторно через ",this.auth.resendSmsTime," ","сек."):U.a.createElement(G.hc,{children:"Отправить код повторно",onClick:function(){return t.auth.resendSms()}})))},i.__decorate([Object(T.resolve)(a.Store)],AuthSms.prototype,"auth",void 0),AuthSms=i.__decorate([H.observer],AuthSms)}(U.a.Component),Oe={self:{display:"block",position:"relative",margin:[0,0,30],padding:[0,40]}},ke=function(e){function AuthFieldEmail(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthFieldEmail,e),AuthFieldEmail=i.__decorate([Object(V.rb)(Oe)],AuthFieldEmail)}(ie),Ie=function(e){function AuthEmail(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthEmail,e),AuthEmail.prototype.render=function(){var t=this,e=this.auth.socialAuth?K:J;return U.a.createElement(z,{onSubmit:function(){return t.auth.sendEmail()}},U.a.createElement(e,null,"Введите код из почты"),U.a.createElement(ne,null,U.a.createElement(ke,null,U.a.createElement(be,{title:null,autoFocus:!0,value:this.auth.values.get("ecode"),mask:Object(V.qb)("ddddd"),onChange:Object(V.kb)(function(e){return t.auth.setValues("ecode",e)}),error:this.auth.visibleErrors.get("ecode"),onFocus:function(){return t.auth.onFieldFocus("ecode")},onBlur:function(){return t.auth.onFieldBlur("ecode")}})),U.a.createElement(le,null,U.a.createElement(G.C,{onClick:function(){return t.auth.sendEmail()}},"Подтвердить")),U.a.createElement(ye,null,U.a.createElement(G.Vc,null,"Сообщение с кодом отправлено",U.a.createElement("br",null),"на почту ",this.auth.emailConfirmation?this.auth.emailConfirmation.email:"")),U.a.createElement(ue,null)),U.a.createElement(ee,{step:1},U.a.createElement(G.hc,{children:"Отправить код повторно",onClick:Object(V.lb)(function(){return t.auth.resendEmail()})}),U.a.createElement(G.hc,{href:"/support/request.action",target:"_blank",children:"Обратиться в поддержку"})))},i.__decorate([Object(T.resolve)(a.Store)],AuthEmail.prototype,"auth",void 0),AuthEmail=i.__decorate([H.observer],AuthEmail)}(U.a.Component),Ne=r(625),Pe={self:{margin:[30,0]}},Fe=function(e){function AuthCondition(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthCondition,e),AuthCondition.prototype.render=function(){var e=this.props,t=e.children,r=e.classes;return U.a.createElement("div",{className:r.self},t)},AuthCondition=i.__decorate([Object(V.rb)(Pe)],AuthCondition)}(V.bb),je=r(316),xe=r(317),Re={self:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:6},icon:{width:12,height:12,marginRight:10},text:{}},De=function(e){function AuthConditionItem(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthConditionItem,e),AuthConditionItem.prototype.render=function(){var e=this.props,t=e.check,r=e.children,o=e.classes;return U.a.createElement("div",{className:o.self},U.a.createElement("div",{className:o.icon},t?U.a.createElement(xe.a,null):U.a.createElement(je.a,null)),U.a.createElement("div",{className:o.text},r))},AuthConditionItem=i.__decorate([Object(V.rb)(Re)],AuthConditionItem)}(V.bb),Be=function(e){function AuthPassword(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthPassword,e),Object.defineProperty(AuthPassword.prototype,"code",{get:function(){var t=this.auth.login.replace(/\D/g,""),e=Ne.a.slice(0).sort(function(e,t){return t.mask.replace(/\D/g,"").length-e.mask.replace(/\D/g,"").length}).find(function(e){return 0===t.indexOf(e.mask.replace(/\D/g,""))});return e?e.code.toUpperCase():""},enumerable:!0,configurable:!0}),AuthPassword.prototype.render=function(){var t=this,e=this.auth.socialAuth?K:J;return U.a.createElement(z,{onSubmit:function(){return t.auth.sendPassword()}},U.a.createElement(e,null,"Придумайте пароль для входа"),U.a.createElement(ne,null,U.a.createElement(ie,null,U.a.createElement(G.bd,{title:this.auth.isNewUser?"Пароль":"Новый пароль",autoFocus:!0,viewed:!0,value:this.auth.values.get("password"),error:this.auth.visibleErrors.get("password"),onChange:Object(V.kb)(function(e){return t.auth.setValues("password",e)}),onFocus:function(){return t.auth.onFieldFocus("password")},onBlur:function(){return t.auth.onFieldBlur("password")}})),U.a.createElement(Fe,null,U.a.createElement(De,{check:/^\S{7,30}$/.test(this.auth.values.get("password"))},U.a.createElement(G.Vc,null,"Не менее 7 и не более 30 символов")),U.a.createElement(De,{check:/(?=.*[0-9])(?=.*[a-z])/i.test(this.auth.values.get("password"))},U.a.createElement(G.Vc,null,"Есть цифры и латинские буквы")),U.a.createElement(De,{check:/(?=.*[A-Z])(?=.*[a-z])/.test(this.auth.values.get("password"))},U.a.createElement(G.Vc,null,"Есть заглавные и строчные буквы"))),U.a.createElement(le,null,U.a.createElement(G.C,{onClick:function(){return t.auth.sendPassword()}},this.auth.isNewUser?"Зарегистрироваться":"Восстановить")),U.a.createElement(ue,null)),U.a.createElement(ee,{step:2},this.auth.isNewUser?[U.a.createElement(G.Vc,{key:1,align:"left"},"Нажимая на кнопку «Зарегистрироваться»",U.a.createElement("br",null),"я соглашаюсь с"," ",U.a.createElement(G.hc,{href:"/register/oferta.action?country="+this.code+"&phone="+this.auth.login,target:"_blank",children:"офертой"}),".",U.a.createElement("br",null),U.a.createElement(G.hc,{href:STATIC_URL+"/business/documents/QW_summary.pdf",target:"_blank",children:"Просто и понятно об условиях"})),U.a.createElement(G.ge,{key:2,description:U.a.createElement("span",null,"Даю свое согласие на получение рекламы в соответствии с офертой.",U.a.createElement("br",null),"Отключение галочки выражает ваше несогласие на получение рекламы."),checked:this.auth.spam,onChange:function(e){return t.auth.checkSpam(e)}})]:null))},i.__decorate([Object(T.resolve)(a.Store)],AuthPassword.prototype,"auth",void 0),AuthPassword=i.__decorate([H.observer],AuthPassword)}(U.a.Component),Le=function(e){function AuthChangePasswordChoose(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthChangePasswordChoose,e),AuthChangePasswordChoose.prototype.render=function(){var t=this,e=this.auth.socialAuth?K:J;return U.a.createElement(z,null,U.a.createElement(e,null,this.user.expired?"Ваш пароль истек":"Придумайте пароль"),U.a.createElement(ne,null,U.a.createElement(G.Jd,null,U.a.createElement(pe,null,this.user.expired?U.a.createElement(U.a.Fragment,null,"Придумайте новый пароль,",U.a.createElement("br",null),"он должен отличаться",U.a.createElement("br",null),"от предыдущего."):U.a.createElement(U.a.Fragment,null,"Пароль не должен совпадать",U.a.createElement("br",null),"с предыдущим")),U.a.createElement(ie,null,U.a.createElement(G.bd,{title:"Новый пароль",autoFocus:!0,viewed:!0,value:this.auth.values.get("password"),error:this.auth.visibleErrors.get("password"),onChange:Object(V.kb)(function(e){return t.auth.setValues("password",e)}),onFocus:function(){return t.auth.onFieldFocus("password")},onBlur:function(){return t.auth.onFieldBlur("password")}})),U.a.createElement(Fe,null,U.a.createElement(De,{check:/(?=.*[0-9])(?=.*[a-z])/i.test(this.auth.values.get("password"))},U.a.createElement(G.Vc,null,"Есть цифры и латинские буквы")),U.a.createElement(De,{check:/(?=.*[A-Z])(?=.*[a-z])/.test(this.auth.values.get("password"))},U.a.createElement(G.Vc,null,"Есть заглавные и строчные буквы")),U.a.createElement(De,{check:/^\S{7,30}$/.test(this.auth.values.get("password"))},U.a.createElement(G.Vc,null,"Не менее 7 и не более 30 символов"))),U.a.createElement(G.ge,{label:"Завершить все сеансы",description:"Понадобится ввести новый пароль при следующем входе",checked:this.auth.blockAllTokens,onChange:function(e){return t.auth.checkBlockAllTokens(e)}}),U.a.createElement(le,null,U.a.createElement(G.C,{onClick:function(){return t.auth.sendChangePassword()},children:this.user.expired?"Сменить пароль":"Продолжить"}))),this.auth.error?U.a.createElement(ue,null):null))},i.__decorate([Object(T.resolve)(a.Store)],AuthChangePasswordChoose.prototype,"auth",void 0),i.__decorate([Object(T.resolve)(a.User)],AuthChangePasswordChoose.prototype,"user",void 0),AuthChangePasswordChoose=i.__decorate([H.observer],AuthChangePasswordChoose)}(U.a.Component),Ue={self:{width:128,height:128,margin:[35,"auto",45]}},He=function(e){function AuthImage(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthImage,e),AuthImage.prototype.render=function(){var e=this.props,t=e.classes,r=e.children;return U.a.createElement("div",{className:t.self},r)},AuthImage=i.__decorate([Object(V.rb)(Ue)],AuthImage)}(V.bb),Te=function(e){function AuthChangePasswordSuccess(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthChangePasswordSuccess,e),AuthChangePasswordSuccess.prototype.render=function(){var e=this,t=this.auth.socialAuth?K:J;return U.a.createElement(z,null,U.a.createElement(t,null,"Пароль изменен"),U.a.createElement(G.Md,null,U.a.createElement(He,null,U.a.createElement(G.de,null)),U.a.createElement(pe,null,"В следующий раз вам",U.a.createElement("br",null),"понадобится поменять пароль",U.a.createElement("br",null),"через год."),U.a.createElement(le,null,U.a.createElement(G.C,{onClick:function(){return e.auth.loading?null:e.auth.hide()},loading:this.auth.loading,children:"Вернуться в кошелек"}))))},i.__decorate([Object(T.resolve)(a.Store)],AuthChangePasswordSuccess.prototype,"auth",void 0),AuthChangePasswordSuccess=i.__decorate([H.observer],AuthChangePasswordSuccess)}(U.a.Component),Ge=function(e){function AuthChangePasswordError(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthChangePasswordError,e),AuthChangePasswordError.prototype.render=function(){var e=this,t=this.auth.socialAuth?K:J;return U.a.createElement(z,null,U.a.createElement(t,null,"Не удалось сменить пароль"),U.a.createElement(He,null,U.a.createElement(G.Gb,null)),U.a.createElement(le,null,U.a.createElement(G.De,null,U.a.createElement(G.C,{onClick:function(){return e.auth.showChangePassword(e.auth.socialAuth)},children:"Попробовать еще раз"}),this.user.expired?U.a.createElement(G.Td,{onClick:function(){return e.auth.logOut()},children:"Выйти из Кошелька"}):U.a.createElement(G.Td,{onClick:function(){return e.auth.hide()},children:"Перейти на главную"}))))},i.__decorate([Object(T.resolve)(a.Store)],AuthChangePasswordError.prototype,"auth",void 0),i.__decorate([Object(T.resolve)(a.User)],AuthChangePasswordError.prototype,"user",void 0),AuthChangePasswordError=i.__decorate([H.observer],AuthChangePasswordError)}(U.a.Component),Ve=r(303),We=r(119),Me=r(318),ze=r(314),$e=function(e){function AuthChangePasswordAlert(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthChangePasswordAlert,e),AuthChangePasswordAlert.prototype.render=function(){var e=this,t=this.auth.socialAuth?K:J;return U.a.createElement(z,null,U.a.createElement(t,null,"Смените пароль, чтобы",U.a.createElement("br",null),"воспользоваться Кошельком."),U.a.createElement(He,null,U.a.createElement(Me.a,null)),U.a.createElement(le,null,U.a.createElement(ze.a,null,U.a.createElement(Ve.a,{onClick:function(){return e.auth.showChangePassword(e.auth.socialAuth)},children:"Сменить пароль"}),U.a.createElement(We.a,{onClick:function(){return e.auth.logOut()},children:"Выйти из Кошелька"}))))},i.__decorate([Object(T.resolve)(a.Store)],AuthChangePasswordAlert.prototype,"auth",void 0),AuthChangePasswordAlert=i.__decorate([H.observer],AuthChangePasswordAlert)}(U.a.Component),qe=function(e){function AuthChangePasswordLoginFailed(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthChangePasswordLoginFailed,e),AuthChangePasswordLoginFailed.prototype.render=function(){var e=this,t=this.auth.socialAuth?K:J;return U.a.createElement(z,null,U.a.createElement(t,null,"Не удалось войти в Кошелек"),U.a.createElement(G.Md,null,U.a.createElement(pe,null,"Попробуйте еще раз,",U.a.createElement("br",null),"используя новый пароль."),U.a.createElement(He,null,U.a.createElement(G.Gb,null)),U.a.createElement(le,null,U.a.createElement(G.De,null,U.a.createElement(G.C,{onClick:function(){return e.auth.showSignIn(e.auth.login,e.auth.socialAuth)},children:"Войти еще раз"}),U.a.createElement(G.Td,{onClick:function(){return e.auth.hide()},children:"Закрыть"})))))},i.__decorate([Object(T.resolve)(a.Store)],AuthChangePasswordLoginFailed.prototype,"auth",void 0),i.__decorate([Object(T.resolve)(a.User)],AuthChangePasswordLoginFailed.prototype,"user",void 0),AuthChangePasswordLoginFailed=i.__decorate([H.observer],AuthChangePasswordLoginFailed)}(U.a.Component),Je={self:{position:"relative",width:128,height:128,margin:"64px auto"},provider:{width:128,height:128,padding:32,borderRadius:64,border:[1,"solid",W.r.underlineColor]},providerIcon:{self:{},path:{}},error:{position:"absolute",bottom:-4,right:-4,width:48,height:48,borderRadius:24,border:[2,"solid",W.r.whiteColor]}},Qe=function(e){function AuthSocialBindError(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSocialBindError,e),AuthSocialBindError.prototype.render=function(){var e=this.props.classes,t=G.m[this.auth.socialAuth.profile.network.alias];return U.a.createElement("div",{className:e.self},U.a.createElement("div",{className:e.provider},U.a.createElement(t,{classes:e.providerIcon})),U.a.createElement("div",{className:e.error},U.a.createElement(G.Gb,null)))},i.__decorate([Object(T.resolve)(a.Store)],AuthSocialBindError.prototype,"auth",void 0),AuthSocialBindError=i.__decorate([Object(V.rb)(Je),H.observer],AuthSocialBindError)}(V.bb),Ze=function(e){function AuthSocialBind(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthSocialBind,e),AuthSocialBind.prototype.render=function(){var e=this,t=this.auth.socialAuth?K:J;return U.a.createElement(z,null,U.a.createElement(t,null,"Не удалось привязать аккаунт ",this.auth.socialAuth.profile.network.title),U.a.createElement(ne,null,U.a.createElement(Qe,null),U.a.createElement(le,null,U.a.createElement(G.De,null,U.a.createElement(G.C,{onClick:function(){return e.auth.showSocialBind(e.auth.socialAuth)},children:"Попробовать еще раз"}),U.a.createElement(G.Td,{onClick:function(){return e.auth.hide()},children:"Закрыть"})))),U.a.createElement(ee,null))},i.__decorate([Object(T.resolve)(a.Store)],AuthSocialBind.prototype,"auth",void 0),AuthSocialBind=i.__decorate([H.observer],AuthSocialBind)}(U.a.Component),Ye=((F={})[j.SIGNIN]=Ae,F[j.SIGNUP]=ge,F[j.SMS]=we,F[j.EMAIL]=Ie,F[j.PASSWORD]=Be,F[j.CHANGE_PASSWORD_CHOOSE]=Le,F[j.CHANGE_PASSWORD_SUCCESS]=Te,F[j.CHANGE_PASSWORD_ERROR]=Ge,F[j.CHANGE_PASSWORD_ALERT]=$e,F[j.CHANGE_PASSWORD_LOGIN_FAILED]=qe,F[j.SOCIAL_BIND]=Ze,F),Ke=function(e){function AuthView(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(AuthView,e),AuthView.prototype.render=function(){var e=Ye[this.auth.step];return U.a.createElement(G.yb,{show:this.auth.show},e?U.a.createElement(G.ab,{active:this.auth.isLoading,children:U.a.createElement(e,null)}):null)},i.__decorate([Object(T.resolve)(a.User)],AuthView.prototype,"user",void 0),i.__decorate([Object(T.resolve)(a.Store)],AuthView.prototype,"auth",void 0),AuthView=i.__decorate([H.observer],AuthView)}(U.a.Component);t.default=function(e){var t=e.createChild();return t.bind(a.View).toConstructor(Ke),t.bind(a.Store).to(B).inSingletonScope(),t}},1625:function(e,t,r){e.exports=r(214)}}]);